import{_ as k}from"./AuthenticatedLayout-8mYNjvMq.js";import{r as v,o as T,a,b as o,F as u,j as f,k as w,w as p,e,t as n,h as l,u as _,Q as g,i as $,d as c,Z as V,f as C,n as B}from"./app-BJ7ObvRL.js";import"./sweetalert2.esm.all-BccGxJ0c.js";import{d as x}from"./dayjs.min-CPTtnoPh.js";import{r as M}from"./relativeTime-DmIkWEcB.js";import{u as j}from"./utc-0w4r8yT7.js";import{P as N}from"./PaginatorComponent-B2V6C4LW.js";import"./ApplicationLogo-BF5n9Q1I.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PrimaryButton-DUQpwMEB.js";import"./SecondaryButton-B5eatlOV.js";const D={key:0},P={class:"border-b flex justify-between items-center py-2 sm:p-2"},z={class:"text-xs"},F={class:"font-bold text-sm"},S={key:0,class:"text-red-500"},q={key:1},A={key:2},E={class:"flex justify-end items-center mt-4"},L={class:"w-full lg:w-1/3"},b={__name:"MyTeamVoucherSetsComponent",props:{filterVoucherSets:{required:!1,default:null}},setup(y){x.extend(M),x.extend(j);const d=y,i=v({}),h=v(5);T(()=>{m()});function m(r=1){let s="/my-team-voucher-sets";d.filterVoucherSets&&(s=s+d.filterVoucherSets),axios.get(s+"?cached=false&page="+r+"&limit="+h.value+"&relations=createdByTeam,allocatedToServiceTeam").then(t=>{i.value=t.data.data}).catch(t=>{console.log(t)})}return(r,s)=>i.value.data&&i.value.data.length?(a(),o("div",D,[(a(!0),o(u,null,f(i.value.data,t=>(a(),w(_($),{href:r.route("voucher-set",t.id),class:"hover:no-underline hover:opacity-75"},{default:p(()=>[e("div",P,[e("div",z,[e("div",F," #"+n(t.id),1),t.is_test?(a(),o("div",S," Test voucher set ")):l("",!0),t.created_by_team&&t.created_by_team_id!==_(g)().props.auth.user.current_team_id?(a(),o("div",q," Created by: "+n(t.created_by_team.name),1)):l("",!0),t.allocated_to_service_team&&t.allocated_to_service_team_id!==_(g)().props.auth.user.current_team_id?(a(),o("div",A," Allocated to: "+n(t.allocated_to_service_team.name),1)):l("",!0)]),s[0]||(s[0]=e("div",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])],-1))])]),_:2},1032,["href"]))),256)),e("div",E,[e("div",L,[c(N,{onSetDataPage:m,"pagination-data":i.value},null,8,["pagination-data"])])])])):l("",!0)}},Q={class:"card"},Y={class:"flex items-start font-bold"},Z={class:"pl-2 text-2xl"},G={class:"card",id:"myTeamMembers"},H={key:0},I={class:""},J={key:0,class:"flex items-center"},K={class:"card"},O={class:""},R={class:"border-b py-2 flex justify-between"},U={key:0},W={key:1},X=["href"],ee={class:"card"},te={class:"card"},_e={__name:"MyTeam",setup(y){const d=v({}),i=v({});T(()=>{h(),m()});function h(){axios.get("/my-team?cached=false&relations=teamUsers.user").then(r=>{d.value=r.data.data}).catch(r=>{console.log(r)})}function m(){axios.get("/my-teams?cached=false&orderBy=name,asc").then(r=>{i.value=r.data.data}).catch(r=>{console.log(r)})}return(r,s)=>(a(),o(u,null,[c(_(V),{title:"Dashboard"}),c(k,null,{header:p(()=>s[0]||(s[0]=[C(" My Team ")])),default:p(()=>[e("div",Q,[e("div",Y,[e("div",Z,n(d.value.name),1)])]),e("div",G,[s[1]||(s[1]=e("div",{class:"card-header"}," Team members ",-1)),d.value.team_users&&d.value.team_users.length>0?(a(),o("div",H,[(a(!0),o(u,null,f(d.value.team_users,t=>(a(),o("div",I,[e("div",{class:B({"border-b p-2":d.value.team_users.length>1})},[t.user?(a(),o("div",J,[e("div",null,n(t.user.name),1)])):l("",!0)],2)]))),256))])):l("",!0)]),e("div",K,[s[2]||(s[2]=e("div",{class:"card-header"}," Teams You Belong To ",-1)),(a(!0),o(u,null,f(i.value.data,t=>(a(),o("div",O,[e("div",R,[e("div",null,n(t.name),1),e("div",null,[t.id===r.$page.props.auth.user.current_team_id?(a(),o("div",U," Current ")):(a(),o("div",W,[e("a",{href:"/switch-team/"+t.id,class:"text-red-500"},"Switch to this team",8,X)]))])])]))),256))]),e("div",ee,[s[3]||(s[3]=e("div",{class:"card-header"}," Voucher sets Created by my team ",-1)),c(b,{"filter-voucher-sets":"-created"})]),e("div",te,[s[4]||(s[4]=e("div",{class:"card-header"}," Voucher sets allocated to my team ",-1)),c(b,{"filter-voucher-sets":"-allocated"})]),s[5]||(s[5]=e("div",{class:"pb-32"},null,-1))]),_:1})],64))}};export{_e as default};
