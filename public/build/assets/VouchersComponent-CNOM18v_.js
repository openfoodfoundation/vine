import{r as x,o as V,c,e as S,a as _,d as e,F as B,h as I,b as d,w as n,f as m,t as a,u as i,S as u}from"./app-ywb_1jUC.js";import{P as T}from"./PaginatorComponent-DqbNZA4U.js";import{d as b}from"./dayjs.min-BcRgMtVk.js";import{r as k}from"./relativeTime-DY-UwITM.js";import{u as C}from"./utc-BfJwNwa1.js";const N={key:0},j={class:"w-full text-xs"},F={class:"hover:bg-gray-100 border-b"},q={class:"py-1"},D={class:"text-right"},P={class:"text-right"},A={class:"flex justify-end"},E={class:"flex justify-end items-center mt-4"},L={class:"w-full lg:w-1/3"},G={__name:"VouchersComponent",props:{teamId:{required:!1,default:null},filterVouchers:{required:!1,default:null},voucherSetId:{required:!1,default:null}},setup(w){b.extend(k),b.extend(C);const r=w,f=x(50),l=x({});V(()=>{(r.teamId||r.voucherSetId)&&(f.value=10),h()});function h(g=1){let s="";r.teamId&&r.filterVouchers?s="&where[]="+r.filterVouchers+","+r.teamId:r.voucherSetId&&(s="&where[]=voucher_set_id,"+r.voucherSetId),axios.get("/admin/vouchers?cached=false&page="+g+"&limit="+f.value+s+"&orderBy=created_at,desc&relations=voucherSet.currencyCountry,createdByTeam,allocatedToServiceTeam").then(t=>{l.value=t.data.data}).catch(t=>{console.log(t)})}return(g,s)=>l.value.data&&l.value.data.length?(_(),c("div",N,[e("table",j,[s[1]||(s[1]=e("thead",{class:"bg-gray-200 font-bold border-b"},[e("tr",null,[e("td",{class:"p-2"},"ID"),e("td",null,"Test?"),e("td",null,"Voucher Set"),e("td",null,"Created By"),e("td",null,"Allocated To"),e("td",{class:"text-right"},"Total Value"),e("td",{class:"text-right"},"Value Remaining"),e("td")])],-1)),e("tbody",null,[(_(!0),c(B,null,I(l.value.data,t=>{var v,y,p;return _(),c("tr",F,[e("td",q,[d(i(u),{href:"/admin/voucher/"+t.id},{default:n(()=>[m(" #"+a(t.id),1)]),_:2},1032,["href"])]),e("td",null,a(t.is_test?"Yes":""),1),e("td",null,a(((v=t.voucher_set)==null?void 0:v.name)??"(Voucher set name not generated yet)"),1),e("td",null,[d(i(u),{href:"/admin/team/"+t.created_by_team_id},{default:n(()=>{var o;return[m(a((o=t.created_by_team)==null?void 0:o.name),1)]}),_:2},1032,["href"])]),e("td",null,[d(i(u),{href:"/admin/team/"+t.allocated_to_service_team_id},{default:n(()=>{var o;return[m(a((o=t.allocated_to_service_team)==null?void 0:o.name),1)]}),_:2},1032,["href"])]),e("td",D,[e("div",null,a(Number(t.voucher_value_original/100).toFixed(2))+" "+a((y=t.voucher_set.currency_country)==null?void 0:y.currency_code),1)]),e("td",P,[e("div",null,a(Number(t.voucher_value_remaining/100).toFixed(2))+" "+a((p=t.voucher_set.currency_country)==null?void 0:p.currency_code),1)]),e("td",A,[d(i(u),{class:"secondaryButton",href:"/admin/voucher/"+t.id},{default:n(()=>s[0]||(s[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})],-1)])),_:2,__:[0]},1032,["href"])])])}),256))])]),e("div",E,[e("div",L,[d(T,{onSetDataPage:h,"pagination-data":l.value},null,8,["pagination-data"])])])])):S("",!0)}};export{G as _};
