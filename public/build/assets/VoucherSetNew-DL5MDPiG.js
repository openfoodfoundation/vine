import{S as y,_ as me}from"./AuthenticatedLayout-CYCyMt6B.js";import{p as pe,r as d,o as he,s as j,c as l,a as s,d as t,e as u,y as xe,i as z,w as k,f as r,m as f,q as fe,x as b,F as p,g as _,t as a,u as Z,n as O,b as F,v as _e,h as we}from"./app-DC3fkuFb.js";import{_ as ge}from"./AdminTopNavigation-C7qIohAQ.js";import{_ as G}from"./SecondaryButton-Bj9pny3G.js";import{P as q}from"./PrimaryButton-ByBtFaaS.js";import"./ApplicationLogo-DrEmNjJw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ke={class:"py-8 space-y-8"},ye={class:"card"},be={class:""},Ce={key:0},Me={class:"flex justify-start mt-8"},Se={key:0,class:"space-y-8"},Te={id:"testSection",class:"card"},je={class:"card-header flex justify-between"},Ze={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ve={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Be={class:"my-8"},$e={class:"mb-2",for:"voucherSet.is_test"},ze={id:"serviceTeamSection",class:"card"},Fe={class:"card-header flex justify-between"},Ue={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ee={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},He={key:0},Le={for:"service-team-search"},Ie={class:"my-4 flex flex-wrap gap-2"},qe={key:1},Ne={id:"merchantTeamSection",class:"card"},Ae={class:"card-header flex justify-between"},De={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Oe={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Re={for:"service-team-search"},Pe={class:"my-4 flex flex-wrap gap-2"},We={key:0,class:"mt-8"},Ye={class:"mt-2"},Ge=["onClick"],Qe={id:"fundingTeamSection",class:"card"},Ke={class:"card-header flex justify-between"},Je={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Xe={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},et={key:0},tt={for:"service-team-search"},st={class:"my-4 flex flex-wrap gap-2"},ot={key:1},lt={id:"totalValueSection",class:"card"},nt={class:"card-header flex justify-between"},it={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},rt={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},at={class:"my-8"},dt={for:"voucherSet.total_set_value"},ut={class:"font-bold"},vt={id:"denominationsSection",class:"card"},ct={class:"card-header flex justify-between"},mt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},pt={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ht={key:2,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},xt={class:"flex justify-between items-center"},ft={class:"mt-4"},_t={class:"mb-2 flex justify-start items-center border-b py-4"},wt=["onUpdate:modelValue"],gt={class:"pl-4"},kt={class:"text-xs"},yt=["onUpdate:modelValue","onKeyup"],bt={class:"pt-6"},Ct=["onClick"],Mt={class:"pt-8"},St={class:"text-center mx-24 p-8 rounded-lg border-4 border-gray-200"},Tt={class:"text-xs"},jt={key:0,class:"text-xs text-red-500 mt-4"},Zt={key:1,class:"text-xs text-green-500 mt-4"},Vt={key:2,class:"text-xs text-gray-500 mt-4"},Bt={id:"expirationSection",class:"card"},$t={class:"card-header flex justify-between"},zt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ft={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ut={class:"my-8"},Et={class:"mt-4"},Ht={class:"italic"},Lt={class:"mt-4"},It={key:0,class:"mt-8"},qt={key:1,class:"text-xs italic"},Nt={id:"voucherTypeSection",class:"card"},At={class:"card-header flex justify-between"},Dt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ot={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Rt={class:"mt-4"},Pt={class:""},Wt=["value"],Yt={id:"voucherTemplateSection",class:"card"},Gt={class:"card-header flex justify-between"},Qt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Kt={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Jt={class:"grid gap-4 grid-cols-6 mt-8"},Xt=["onClick"],es=["src"],ts={key:0,class:"text-xs italic text-center mt-1 text-green-500"},ss={key:1,class:"card"},os={class:"card-header flex justify-between"},ls={class:""},ns={key:0,class:"flex text-green-500 items-center"},is={key:1,class:"flex text-red-500 items-center"},rs={class:"my-8"},as={class:"list-disc space-y-6 pl-4"},ds={class:"font-bold"},us={key:0,class:"font-bold"},vs={class:"font-bold"},cs={key:0,class:"font-bold"},ms={class:"font-bold"},ps={class:"font-bold"},hs={class:"font-bold"},xs={class:""},fs={key:0},_s={class:"font-bold"},ws={key:1},gs={class:""},ks={key:0},ys={class:"mt-2"},bs=["src"],Cs={key:1},Ms={class:"flex justify-end"},Ss={key:0},Ts={key:1},js={__name:"VoucherSetNewComponent",setup(Q){const w=pe().props,U=d(!1),V=d(!1),B=d(!1),N=d([]),E=d([]),C=d(""),h=d(""),H=d([]),L=d([]),$=d(""),c=d([]),I=d([]),M=d([]),x=d(""),S=d(""),R=d([]),A=d({}),D=d(0),i=d({is_test:0,allocated_to_service_team_id:"",merchant_team_ids:[],funded_by_team_id:"",voucher_template_id:"",total_set_value:0,denominations:[],expires_at:"",voucher_set_type:""});function m(){return i.value.total_set_value-Y()}function K(){y.fire({title:"Are you sure?",icon:"info",text:"This will not only create a voucher set, but also email all the merchants you selected, asking for their approval to partake in the voucher set. Are you sure you want to do this?",showConfirmButton:!0,showCancelButton:!0}).then(n=>{n.isConfirmed&&(B.value=!0,Object.assign({},i.value),axios.post("/admin/voucher-sets",i.value).then(e=>{y.fire({title:"Nice!",icon:"success",text:e.data.data.message,showConfirmButton:!1,timer:600}).then(()=>{window.location.href="/admin/voucher-set/"+e.data.data.id}),B.value=!1}).catch(e=>{y.fire({title:"Oops!",icon:"error",text:e.response.data.meta.message}),console.log(e),B.value=!1}))})}function P(){i.value.denominations.push({value:500,colloquialCurrencyUnitValue:5,number:1})}function J(n){n>-1&&i.value.denominations.splice(n,1)}function X(){C.value.length?E.value=N.value.filter(n=>n.name.toLowerCase().includes(C.value)):E.value=N.value}function W(){if($.value.length){const n=H.value.filter(e=>e.merchant_team?.name.toLowerCase().includes($.value));L.value=n.filter(e=>!c.value.some(o=>e.merchant_team.id===o.id))}else L.value=H.value}function ee(){S.value.length?M.value=I.value.filter(n=>n.service_team?.name.toLowerCase().includes(S.value)):M.value=I.value}function te(){axios.get("/admin/teams").then(n=>{N.value=n.data.data.data}).catch(n=>{y.fire({icon:"error",title:"Oops!",text:n.response.data.meta.message})})}function se(n){axios.get("/admin/team-merchant-teams?relations=merchantTeam&where[]=team_id,"+n.id).then(e=>{H.value=e.data.data.data,L.value=e.data.data.data}).catch(e=>{y.fire({icon:"error",title:"Oops!",text:e.response.data.meta.message})})}function oe(){axios.get("/admin/team-service-teams?relations=serviceTeam&where[]=team_id,"+w.auth.user.current_team_id).then(n=>{I.value=n.data.data.data,M.value=n.data.data.data}).catch(n=>{y.fire({icon:"error",title:"Oops!",text:n.response.data.meta.message})})}function le(){axios.get("/admin/team-voucher-templates?cached=false&where[]=team_id,"+w.auth.user.current_team_id+"&where[]=archived_at,null").then(n=>{R.value=n.data.data.data}).catch(n=>{y.fire({icon:"error",title:"Oops!",text:n.response.data.meta.message})})}function v(n){const e=document.getElementById(n);e&&e.scrollIntoView({behavior:"smooth"})}function ne(n){h.value=n,i.value.funded_by_team_id=n.id,E.value=[],C.value=""}function ie(n){i.value.merchant_team_ids.includes(n.id)||(i.value.merchant_team_ids.push(n.id),c.value.push(n))}function re(n){x.value=n,i.value.allocated_to_service_team_id=n.id,M.value=[],S.value="",se(n)}function ae(n){i.value.voucher_template_id===n.id?(i.value.voucher_template_id="",A.value={}):(i.value.voucher_template_id=n.id,A.value=n)}function de(){x.value="",i.value.allocated_to_service_team_id="",M.value=Object.assign({},I.value),c.value=[],H.value=[],i.value.merchant_team_ids=[]}function ue(){V.value=!0}function Y(){let n=0;return i.value.denominations.forEach(e=>{n+=e.number*e.value}),n}function ve(n){n>-1&&c.value.splice(n,1)}function ce(n){n.value=n.colloquialCurrencyUnitValue*100}return he(()=>{te(),oe(),le(),P()}),j(c,()=>{W()},{deep:!0}),j(i,()=>{U.value=i.value.total_set_value>0&&i.value.merchant_team_ids.length>0&&i.value.voucher_template_id&&i.value.allocated_to_service_team_id&&i.value.voucher_set_type&&m()>=0},{deep:!0}),j(C,()=>{X()}),j($,()=>{W()}),j(S,()=>{ee()}),j(D,n=>{i.value.total_set_value=n*100}),(n,e)=>(s(),l("div",null,[t("div",ke,[t("div",ye,[e[27]||(e[27]=t("div",{class:"card-header"}," Create A Voucher Set ",-1)),t("div",be,[V.value?u("",!0):(s(),l("div",Ce,[...e[24]||(e[24]=[t("div",{class:"my-8"}," This process will bring you through creating a voucher set. There are 8 steps to complete. ",-1),t("div",{class:"mt-8"}," The following icons are used: ",-1)])])),e[26]||(e[26]=xe('<ul class="mt-6 italic space-y-4"><li class="flex gap-x-1"><svg class="size-6 text-green-500 fill-green-100" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="not-italic font-semibold">Complete</span> ‐ You have met the requirements for this section </li><li class="flex gap-x-1"><svg class="size-6 text-orange-500 fill-orange-100" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="not-italic font-semibold">Warning</span> ‐ This section is not required, so please double check the default answer </li><li class="flex gap-x-1"><svg class="size-6 text-red-500 fill-red-100" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="not-italic font-semibold">Incomplete</span> ‐ You have not met the requirements for this section </li></ul>',1)),t("div",Me,[V.value?u("",!0):(s(),z(G,{key:0,onClick:e[0]||(e[0]=o=>ue())},{default:k(()=>[...e[25]||(e[25]=[r(" Get started ",-1)])]),_:1}))])])]),V.value?(s(),l("div",Se,[t("div",Te,[t("div",je,[e[30]||(e[30]=r(" Is this a test voucher set? ",-1)),i.value.is_test?(s(),l("svg",Ze,[...e[28]||(e[28]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(s(),l("svg",Ve,[...e[29]||(e[29]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),e[32]||(e[32]=t("div",{class:"my-8"}," A test voucher set is for when you want to test the process, but the vouchers are not real. ",-1)),t("div",Be,[t("label",$e,[f(t("input",{id:"voucherSet.is_test","onUpdate:modelValue":e[1]||(e[1]=o=>i.value.is_test=o),class:"mr-2",type:"checkbox"},null,512),[[fe,i.value.is_test]]),e[31]||(e[31]=r(" YES - this is a test voucher set. ",-1))])])]),t("div",ze,[t("div",Fe,[e[35]||(e[35]=r(" The service team ",-1)),x.value?(s(),l("svg",Ue,[...e[33]||(e[33]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(s(),l("svg",Ee,[...e[34]||(e[34]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),e[36]||(e[36]=t("div",{class:"my-8"}," Which service team are you allocating this voucher set to? ",-1)),x.value?(s(),l("div",qe,[r(" Selected service team: "+a(x.value.name)+" ",1),x.value?(s(),l("span",{key:0,class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:e[3]||(e[3]=o=>de())}," Remove ")):u("",!0)])):(s(),l("div",He,[t("label",Le,[f(t("input",{id:"service-team-search","onUpdate:modelValue":e[2]||(e[2]=o=>S.value=o),class:"block w-1/2 md:w-1/3 mt-1",placeholder:"Filter your service teams..",type:"search"},null,512),[[b,S.value]])]),t("div",Ie,[(s(!0),l(p,null,_(M.value,o=>(s(),z(q,{onClick:g=>re(o.service_team)},{default:k(()=>[r(a(o.service_team.name),1)]),_:2},1032,["onClick"]))),256))])]))]),t("div",Ne,[t("div",Ae,[e[39]||(e[39]=r(" The merchant team ",-1)),c.value.length?(s(),l("svg",De,[...e[37]||(e[37]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(s(),l("svg",Oe,[...e[38]||(e[38]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),e[41]||(e[41]=t("div",{class:"my-8"}," Which merchant team(s) are you assigning this voucher set to? ",-1)),t("div",null,[t("label",Re,[f(t("input",{id:"merchant-team-search","onUpdate:modelValue":e[4]||(e[4]=o=>$.value=o),class:"block w-1/2 md:w-1/3 mt-1",placeholder:"Filter merchant teams..",type:"search"},null,512),[[b,$.value]])]),t("div",Pe,[(s(!0),l(p,null,_(L.value,o=>(s(),z(q,{onClick:g=>ie(o.merchant_team)},{default:k(()=>[r(a(o.merchant_team.name),1)]),_:2},1032,["onClick"]))),256))])]),c.value.length?(s(),l("div",We,[e[40]||(e[40]=r(" Selected merchant team(s): ",-1)),t("div",null,[(s(!0),l(p,null,_(c.value,(o,g)=>(s(),l("div",Ye,[r(a(o.name)+" ",1),t("span",{class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:T=>ve(g)}," Remove ",8,Ge)]))),256))])])):u("",!0)]),t("div",Qe,[t("div",Ke,[e[44]||(e[44]=r(" The funding team ",-1)),h.value?(s(),l("svg",Je,[...e[42]||(e[42]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(s(),l("svg",Xe,[...e[43]||(e[43]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),e[46]||(e[46]=t("div",{class:"my-8"}," Is this voucher set funded by anyone? If so, please nominate the team here. ",-1)),h.value?(s(),l("div",ot,[r(" Selected funding team: "+a(h.value.name)+" ",1),h.value?(s(),l("span",{key:0,class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:e[6]||(e[6]=o=>h.value="")}," Remove ")):u("",!0)])):(s(),l("div",et,[t("label",tt,[e[45]||(e[45]=r(" Search for a funding team ",-1)),f(t("input",{id:"merchant-team-search","onUpdate:modelValue":e[5]||(e[5]=o=>C.value=o),class:"block w-1/2 md:w-1/3",type:"search"},null,512),[[b,C.value]])]),t("div",st,[(s(!0),l(p,null,_(E.value,o=>(s(),z(q,{onClick:g=>ne(o)},{default:k(()=>[r(a(o.name),1)]),_:2},1032,["onClick"]))),256))])]))]),t("div",lt,[t("div",nt,[e[49]||(e[49]=r(" Total value ",-1)),i.value.total_set_value>0?(s(),l("svg",it,[...e[47]||(e[47]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(s(),l("svg",rt,[...e[48]||(e[48]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),t("div",at,[t("label",dt,[e[50]||(e[50]=r(" What will the total value of the voucher set be, in ",-1)),t("span",ut,a(Z(w).auth.teamCountry?.currency_code),1),e[51]||(e[51]=r("? ",-1)),f(t("input",{id:"voucherSet.total_set_value","onUpdate:modelValue":e[7]||(e[7]=o=>D.value=o),class:"block mt-2",type:"number"},null,512),[[b,D.value]])])])]),t("div",vt,[t("div",ct,[e[55]||(e[55]=r(" Denominations ",-1)),m()===0?(s(),l("svg",mt,[...e[52]||(e[52]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):m()>0?(s(),l("svg",pt,[...e[53]||(e[53]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(s(),l("svg",ht,[...e[54]||(e[54]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),t("div",xt,[t("div",ft,[t("div",null," Available to assign: "+a((i.value.total_set_value/100).toFixed(2))+" "+a(Z(w).auth.teamCountry?.currency_code),1),t("div",{class:O({"text-red":m()<0})}," Remaining: "+a((m()/100).toFixed(2)),3),t("div",null,[(s(!0),l(p,null,_(i.value.denominations,(o,g)=>(s(),l("div",_t,[t("div",null,[e[56]||(e[56]=t("div",{class:"text-xs"}," Create ",-1)),t("div",null,[f(t("input",{"onUpdate:modelValue":T=>o.number=T,class:"border rounded p-1",type:"number"},null,8,wt),[[b,o.number]])])]),t("div",gt,[t("div",kt," of "+a(Z(w).auth.teamCountry?.currency_code),1),t("div",null,[f(t("input",{"onUpdate:modelValue":T=>o.colloquialCurrencyUnitValue=T,class:"border rounded p-1",onKeyup:T=>ce(o),step:"1",type:"number"},null,40,yt),[[b,o.colloquialCurrencyUnitValue]])])]),t("div",bt,[g!==0?(s(),l("button",{key:0,class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:T=>J(g)},[...e[57]||(e[57]=[t("i",{class:"fa fa-times"},null,-1),r(" Remove ",-1)])],8,Ct)):u("",!0)])]))),256)),t("div",Mt,[F(G,{onClick:e[8]||(e[8]=o=>P())},{default:k(()=>[...e[58]||(e[58]=[r(" Add row ",-1),t("i",{class:"fa fa-plus"},null,-1)])]),_:1})])])]),t("div",St,[e[59]||(e[59]=t("div",{class:"text-2xl"}," Total assigned: ",-1)),t("div",{class:O([{"text-green-500":m()>=0,"text-red-500":m()<0},"text-3xl mt-4"])},[r(a((Y()/100).toFixed(2))+" ",1),t("div",Tt," out of "+a((i.value.total_set_value/100).toFixed(2)),1)],2),m()<0?(s(),l("div",jt," - over budget - ")):m()>0?(s(),l("div",Zt,a((m()/100).toFixed(2))+" remaining ",1)):(s(),l("div",Vt," Voucher fully allocated "))])])]),t("div",Bt,[t("div",$t,[e[62]||(e[62]=r(" Expiration ",-1)),i.value.expires_at?(s(),l("svg",zt,[...e[60]||(e[60]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(s(),l("svg",Ft,[...e[61]||(e[61]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),t("div",Ut,[e[64]||(e[64]=r(" When will these vouchers expire? ",-1)),t("div",Et,[t("label",Ht,[e[63]||(e[63]=r(" Select expiry date ",-1)),f(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>i.value.expires_at=o),class:"rounded",type:"date"},null,512),[[b,i.value.expires_at]])])]),t("div",Lt,[i.value.expires_at?(s(),l("div",It,[r(" Selected expiry date: "+a(i.value.expires_at)+" ",1),t("span",{class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:e[10]||(e[10]=o=>i.value.expires_at="")}," Remove ")])):(s(),l("div",qt," Not selecting an expiry date will mean vouchers stay valid forever. "))])])]),t("div",Nt,[t("div",At,[e[67]||(e[67]=r(" Type ",-1)),i.value.voucher_set_type?(s(),l("svg",Dt,[...e[65]||(e[65]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(s(),l("svg",Ot,[...e[66]||(e[66]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),t("div",Rt,[t("label",Pt,[e[69]||(e[69]=r(" Choose the type of the voucher set ",-1)),f(t("select",{"onUpdate:modelValue":e[11]||(e[11]=o=>i.value.voucher_set_type=o),class:"ml-2"},[e[68]||(e[68]=t("option",{value:""},"Select a type",-1)),(s(!0),l(p,null,_(Z(w).voucherSetTypes,o=>(s(),l("option",{value:o},a(o),9,Wt))),256))],512),[[_e,i.value.voucher_set_type]])])])]),t("div",Yt,[t("div",Gt,[e[72]||(e[72]=r(" Template ",-1)),i.value.voucher_template_id?(s(),l("svg",Qt,[...e[70]||(e[70]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(s(),l("svg",Kt,[...e[71]||(e[71]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),t("div",Jt,[(s(!0),l(p,null,_(R.value,o=>(s(),l("div",null,[t("div",{class:O([{"border-green-500":o.id===i.value.voucher_template_id,"opacity-40":i.value.voucher_template_id&&o.id!==i.value.voucher_template_id},"hover:cursor-pointer border-2 rounded"]),onClick:g=>ae(o)},[t("img",{src:o.example_template_image_url,alt:"",class:"border rounded"},null,8,es)],10,Xt),o.id===i.value.voucher_template_id?(s(),l("div",ts," Selected! ")):u("",!0)]))),256))])])])):u("",!0),V.value?(s(),l("div",ss,[t("div",os,[e[75]||(e[75]=r(" Review ",-1)),t("div",ls,[U.value?(s(),l("div",ns,[...e[73]||(e[73]=[r(" You have completed all the required sections ",-1),t("svg",{class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):(s(),l("div",is,[...e[74]||(e[74]=[r(" You have required sections that still need completing ",-1),t("svg",{class:"size-6 fill-red-100 ml-2",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]))])]),e[88]||(e[88]=t("div",{class:"my-8"},[t("div",null," Please review the following details for your voucher set. ")],-1)),t("div",rs,[t("ul",as,[t("li",null,[e[76]||(e[76]=r(" The voucher set is ",-1)),t("span",ds,a(i.value.is_test?"a test":"not a test"),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[12]||(e[12]=o=>v("testSection"))}," Edit ")]),t("li",null,[r(" It has "+a(x.value?"":" not yet ")+" been allocated to service team ",1),x.value?(s(),l("span",us,a(x.value.name),1)):u("",!0),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[13]||(e[13]=o=>v("serviceTeamSection"))}," Edit ")]),t("li",null,[r(" It has "+a(c.value.length?"":" not yet ")+" been assigned to a merchant team(s) ",1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[14]||(e[14]=o=>v("merchantTeamSection"))}," Edit "),(s(!0),l(p,null,_(c.value,o=>(s(),l("div",{key:o.id,class:"my-1 font-bold"},a(o.name),1))),128))]),t("li",null,[e[77]||(e[77]=r(" It has ",-1)),t("span",vs,a(h.value?"":" not "),1),e[78]||(e[78]=r(" been associated to funding team ",-1)),h.value?(s(),l("span",cs,a(h.value.name),1)):u("",!0),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[15]||(e[15]=o=>v("fundingTeamSection"))}," Edit ")]),t("li",null,[e[79]||(e[79]=r(" It has a total value of: ",-1)),t("span",ms,a((i.value.total_set_value/100).toFixed(2)),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[16]||(e[16]=o=>v("totalValueSection"))}," Edit ")]),t("li",null,[e[80]||(e[80]=r(" Divided into denominations of: ",-1)),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[17]||(e[17]=o=>v("denominationsSection"))}," Edit "),t("ul",null,[(s(!0),l(p,null,_(i.value.denominations,o=>(s(),l("li",ps,a(o.number)+" "+a(o.number===1?"unit":"units")+" of "+a(o.colloquialCurrencyUnitValue)+" "+a(Z(w).auth.teamCountry?.currency_code),1))),256))])]),t("li",null,[e[81]||(e[81]=r(" The voucher ",-1)),t("span",hs,a(i.value.expires_at?"expires at "+i.value.expires_at:"does not expire"),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[18]||(e[18]=o=>v("expirationSection"))}," Edit ")]),t("li",xs,[i.value.voucher_set_type?(s(),l("div",fs,[e[82]||(e[82]=r(" Has a type of ",-1)),t("span",_s,a(i.value.voucher_set_type),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[19]||(e[19]=o=>v("expirationSection"))}," Edit ")])):(s(),l("div",ws,[e[83]||(e[83]=r(" Does ",-1)),e[84]||(e[84]=t("span",{class:"font-bold"},"not yet have a type",-1)),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[20]||(e[20]=o=>v("expirationSection"))}," Edit ")]))]),t("li",gs,[i.value.voucher_template_id?(s(),l("div",ks,[e[85]||(e[85]=r(" Is using this voucher template ",-1)),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[21]||(e[21]=o=>v("voucherTemplateSection"))}," Edit "),t("div",ys,[t("img",{src:A.value.example_template_image_url,alt:"",class:"border rounded max-h-48"},null,8,bs)])])):(s(),l("div",Cs,[e[86]||(e[86]=r(" Does ",-1)),e[87]||(e[87]=t("span",{class:"font-bold"},"not yet have a template",-1)),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[22]||(e[22]=o=>v("voucherTemplateSection"))}," Edit ")]))])])]),t("div",Ms,[U.value?(s(),z(q,{key:0,disabled:B.value,onClick:e[23]||(e[23]=o=>K())},{default:k(()=>[B.value?(s(),l("div",Ss," Generating.. ")):(s(),l("div",Ts," Generate! "))]),_:1},8,["disabled"])):u("",!0)])])):u("",!0)])]))}},Es={__name:"VoucherSetNew",setup(Q){return(w,U)=>(s(),l(p,null,[F(Z(we),{title:"Vouchers"}),F(me,null,{header:k(()=>[F(ge)]),default:k(()=>[F(js)]),_:1})],64))}};export{Es as default};
