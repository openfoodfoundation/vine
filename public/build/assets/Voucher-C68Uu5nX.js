import{_ as b}from"./AuthenticatedLayout-CAI2qol5.js";import{r as g,o as k,a,b as r,d as v,u as i,w as c,F as p,Z as V,e,t as d,h as l,i as m,f as n,j as N}from"./app-VZyAvj5K.js";import{_ as R}from"./AdminTopNavigation-xu6j3rGQ.js";import{d as u}from"./dayjs.min-BVd9R2y1.js";import{r as T}from"./relativeTime-Drfbrc9S.js";import{u as w}from"./utc-CVDRjg_h.js";import"./ApplicationLogo-CFsyZIwb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PrimaryButton-It-5jYX2.js";const B={class:"grid grid-cols-2 gap-8 container mx-auto mt-8"},$={class:"card"},C={class:"opacity-25"},S={key:0,class:"mt-4"},D={key:1,class:"font-bold text-red-500 text-sm"},j={class:"card"},E={key:0},F={class:"card"},L={class:"grid grid-cols-4 gap-y-12 text-center mt-8"},q={class:"font-bold text-3xl"},A={class:"font-bold text-3xl"},I={class:"font-bold text-3xl"},M={key:0},O={class:"font-bold text-3xl"},U={class:"text-xs"},Z={key:1},z={class:"font-bold text-3xl"},G={class:"text-xs"},H={class:"grid grid-cols-2 gap-8 container mx-auto"},J={class:"card"},K={key:0},P={key:1,class:"text-xs mt-2"},Q={class:"card"},W={key:0},X={class:"card"},Y={key:0,class:"text-sm"},ee={class:"border-b py-2 sm:p-2"},te={class:"font-bold"},se={key:0},de={class:"font-bold"},oe={key:1},ae={class:"font-bold"},he={__name:"Voucher",props:{id:{required:!0}},setup(x){u.extend(T),u.extend(w);const h=x,s=g({});k(()=>{y()});function y(){axios.get("/admin/vouchers/"+h.id+"?cached=false&relations=voucherSet,createdByTeam,allocatedToServiceTeam,voucherRedemptions.redeemedByUser,voucherRedemptions.redeemedByTeam").then(_=>{s.value=_.data.data}).catch(_=>{console.log(_)})}return(_,t)=>(a(),r(p,null,[v(i(V),{title:"Voucher set"}),v(b,null,{header:c(()=>[v(R)]),default:c(()=>{var f;return[e("div",B,[e("div",$,[t[1]||(t[1]=e("div",{class:"card-header"}," Voucher Details ",-1)),e("h2",C," ID: "+d(h.id),1),s.value.voucher_short_code?(a(),r("div",S,[e("h2",null," Short Code: "+d(s.value.voucher_short_code),1),t[0]||(t[0]=e("div",{class:"text-xs text-gray-500"}," Short codes are used in unattended (online) redemptions ",-1))])):l("",!0),s.value.is_test?(a(),r("div",D," Test voucher ")):l("",!0)]),e("div",j,[t[2]||(t[2]=e("div",{class:"card-header"}," Voucher set ",-1)),s.value.voucher_set_id?(a(),r("div",E,[v(i(m),{href:_.route("admin.voucher-set",{id:s.value.voucher_set_id})},{default:c(()=>[n(d(s.value.voucher_set_id),1)]),_:1},8,["href"])])):l("",!0)])]),e("div",F,[t[8]||(t[8]=e("div",{class:"card-header"}," Voucher details ",-1)),e("div",L,[e("div",null,[e("div",q," $"+d(s.value.voucher_value_original/100),1),t[3]||(t[3]=n(" Original value "))]),e("div",null,[e("div",A," $"+d(s.value.voucher_value_remaining/100),1),t[4]||(t[4]=n(" Remaining value "))]),e("div",null,[e("div",I,d(s.value.num_voucher_redemptions??"0"),1),t[5]||(t[5]=n(" # Redemptions "))]),s.value.last_redemption_at?(a(),r("div",M,[t[6]||(t[6]=e("div",null," Last redeemed ",-1)),e("div",O,d(i(u).utc(s.value.last_redemption_at).fromNow()),1),e("div",U," ("+d(i(u)(s.value.last_redemption_at))+") ",1)])):l("",!0),(f=s.value.voucher_set)!=null&&f.expires_at?(a(),r("div",Z,[t[7]||(t[7]=e("div",null," Expires ",-1)),e("div",z,d(i(u).utc(s.value.voucher_set.expires_at).fromNow()),1),e("div",G," ("+d(i(u)(s.value.voucher_set.expires_at))+") ",1)])):l("",!0)])]),e("div",H,[e("div",J,[t[9]||(t[9]=e("div",{class:"card-header"}," Created by team ",-1)),s.value.created_by_team?(a(),r("div",K,[v(i(m),{href:_.route("admin.team",{id:s.value.created_by_team_id})},{default:c(()=>{var o;return[n(d((o=s.value.created_by_team)==null?void 0:o.name),1)]}),_:1},8,["href"])])):l("",!0),s.value.created_at?(a(),r("div",P," Created at: "+d(i(u).utc(s.value.created_at).fromNow())+" ("+d(i(u)(s.value.created_at))+") ",1)):l("",!0)]),e("div",Q,[t[10]||(t[10]=e("div",{class:"card-header"}," Allocated to team ",-1)),s.value.allocated_to_service_team?(a(),r("div",W,[v(i(m),{href:_.route("admin.team",{id:s.value.allocated_to_service_team_id})},{default:c(()=>{var o;return[n(d((o=s.value.allocated_to_service_team)==null?void 0:o.name),1)]}),_:1},8,["href"])])):l("",!0)])]),e("div",X,[t[14]||(t[14]=e("div",{class:"card-header"}," Voucher redemptions ",-1)),s.value.voucher_redemptions&&s.value.voucher_redemptions.length?(a(),r("div",Y,[(a(!0),r(p,null,N(s.value.voucher_redemptions,o=>(a(),r("div",ee,[e("div",null,[t[11]||(t[11]=n(" Redeemed amount: ")),e("span",te,"$"+d(o.redeemed_amount/100),1)]),o.redeemed_by_user&&o.redeemed_by_team?(a(),r("div",se,[t[12]||(t[12]=n(" Redeemed by: ")),e("span",de,d(o.redeemed_by_user.name)+" ("+d(o.redeemed_by_team.name)+")",1)])):l("",!0),o.created_at?(a(),r("div",oe,[t[13]||(t[13]=n(" Redeemed at: ")),e("span",ae,d(i(u).utc(o.created_at).fromNow())+" ("+d(i(u)(o.created_at))+")",1)])):l("",!0)]))),256))])):l("",!0)]),t[15]||(t[15]=e("div",{class:"pb-32"},null,-1))]}),_:1})],64))}};export{he as default};
