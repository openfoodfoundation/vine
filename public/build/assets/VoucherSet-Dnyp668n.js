import{_ as V}from"./AuthenticatedLayout-D11akeJv.js";import{r as p,o as b,c as l,e as r,a as o,d as e,F as f,g as k,i as $,w as y,t as a,u as n,p as g,l as w,b as m,h as C,f as _}from"./app-DmpzTF29.js";import{d as i}from"./dayjs.min-CVnLEuXg.js";import{r as T}from"./relativeTime-YocTBVjx.js";import{u as S}from"./utc-Ck8zM3r2.js";import{P as B}from"./PaginatorComponent-BstaA1hZ.js";import"./ApplicationLogo-DNswn0CG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PrimaryButton-BxaKbujp.js";import"./SecondaryButton-IWByLOq_.js";const N={key:0},I={class:"border-b flex justify-between items-center py-2 sm:p-2"},M={class:"text-xs"},P={key:0,class:"font-bold text-sm"},j={key:1,class:"font-bold text-sm"},R={key:2,class:"text-red-500"},D={key:3},F={key:4},q={class:"flex justify-end items-center mt-4"},A={class:"w-full lg:w-1/3"},E={__name:"MyTeamVouchersComponent",props:{voucherSetId:{required:!1,default:null}},setup(h){i.extend(T),i.extend(S);const v=h,s=p({}),x=p(5);b(()=>{c()});function c(t=1){axios.get("/my-team-vouchers?cached=false&where[]=voucher_set_id,"+v.voucherSetId+"&page="+t+"&limit="+x.value+"&relations=createdByTeam,allocatedToServiceTeam").then(u=>{s.value=u.data.data}).catch(u=>{console.log(u)})}return(t,u)=>s.value.data&&s.value.data.length?(o(),l("div",N,[(o(!0),l(f,null,k(s.value.data,d=>(o(),$(n(w),{href:t.route("voucher",d.id),class:"hover:no-underline hover:opacity-75"},{default:y(()=>[e("div",I,[e("div",M,[d.voucher_short_code?(o(),l("div",P," #"+a(d.voucher_short_code),1)):(o(),l("div",j," #"+a(d.id),1)),d.is_test?(o(),l("div",R," Test voucher ")):r("",!0),d.created_by_team&&d.created_by_team_id!==n(g)().props.auth.user.current_team_id?(o(),l("div",D," Created by: "+a(d.created_by_team.name),1)):r("",!0),d.allocated_to_service_team&&d.allocated_to_service_team_id!==n(g)().props.auth.user.current_team_id?(o(),l("div",F," Allocated to: "+a(d.allocated_to_service_team.name),1)):r("",!0)]),u[0]||(u[0]=e("div",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])],-1))])]),_:2},1032,["href"]))),256)),e("div",q,[e("div",A,[m(B,{onSetDataPage:c,"pagination-data":s.value},null,8,["pagination-data"])])])])):r("",!0)}},L={class:"card"},z={class:"text-xs"},U={key:0,class:"font-bold text-red-500 text-sm"},G={class:"card"},H={class:"grid grid-cols-4 gap-y-12 text-center mt-8"},J={class:"font-bold text-3xl"},K={class:"font-bold text-3xl"},O={class:"font-bold text-3xl"},Q={class:"font-bold text-3xl"},W={class:"font-bold text-3xl"},X={class:"font-bold text-3xl"},Y={class:"font-bold text-3xl"},Z={class:"font-bold text-3xl"},ee={key:0},te={class:"font-bold text-3xl"},se={class:"text-xs"},ae={key:1},oe={class:"font-bold text-3xl"},le={class:"text-xs"},de={class:"card"},re={key:0},ie={key:1,class:"text-xs mt-2"},ne={class:"card"},ue={key:0},_e={class:"card"},ce={key:0},ve={class:"list-disc ml-4"},me={class:"card"},Ve={__name:"VoucherSet",props:{voucherSetId:{type:String,required:!1}},setup(h){i.extend(T),i.extend(S);const v=h,s=p({});b(()=>{x()});function x(){axios.get("/my-team-voucher-sets/"+v.voucherSetId+"?cached=false&relations=createdByTeam,allocatedToServiceTeam,voucherSetMerchantTeams.merchantTeam").then(c=>{s.value=c.data.data}).catch(c=>{console.log(c)})}return(c,t)=>(o(),l(f,null,[m(n(C),{title:"Voucher Set"}),m(V,null,{header:y(()=>[...t[0]||(t[0]=[e("h2",{class:"font-normal text-xl text-gray-800 leading-tight"},"Voucher Set",-1)])]),default:y(()=>[e("div",L,[e("h2",null,a(s.value.name),1),e("div",z," ID: "+a(s.value.id),1),s.value.is_test?(o(),l("div",U," Test voucher set ")):r("",!0)]),e("div",G,[t[11]||(t[11]=e("div",{class:"card-header"}," Voucher set details ",-1)),e("div",H,[e("div",null,[e("div",J," $"+a(s.value.total_set_value/100),1),t[1]||(t[1]=_(" Total set value ",-1))]),e("div",null,[e("div",K," $"+a(s.value.total_set_value_remaining/100),1),t[2]||(t[2]=_(" Total remaining value ",-1))]),e("div",null,[e("div",O,a(Math.round((s.value.total_set_value-s.value.total_set_value_remaining)/s.value.total_set_value*1e4)/100)+"% ",1),t[3]||(t[3]=_(" Redeemed percentage ",-1))]),e("div",null,[e("div",Q,a(s.value.num_vouchers),1),t[4]||(t[4]=_(" # Vouchers ",-1))]),e("div",null,[e("div",W,a(s.value.num_voucher_redemptions),1),t[5]||(t[5]=_(" # Redemptions ",-1))]),e("div",null,[e("div",X,a(s.value.num_vouchers_fully_redeemed),1),t[6]||(t[6]=_(" # Vouchers Fully Redeemed ",-1))]),e("div",null,[e("div",Y,a(s.value.num_vouchers_partially_redeemed),1),t[7]||(t[7]=_(" # Vouchers Partially Redeemed ",-1))]),e("div",null,[e("div",Z,a(s.value.num_vouchers_unredeemed),1),t[8]||(t[8]=_(" # Vouchers Unredeemed ",-1))]),s.value.last_redemption_at?(o(),l("div",ee,[t[9]||(t[9]=e("div",null," Last redeemed ",-1)),e("div",te,a(n(i).utc(s.value.last_redemption_at).fromNow()),1),e("div",se," ("+a(n(i)(s.value.last_redemption_at))+") ",1)])):r("",!0),s.value.expires_at?(o(),l("div",ae,[t[10]||(t[10]=e("div",null," Expires ",-1)),e("div",oe,a(n(i).utc(s.value.expires_at).fromNow()),1),e("div",le," ("+a(n(i)(s.value.expires_at))+") ",1)])):r("",!0)])]),e("div",de,[t[12]||(t[12]=e("div",{class:"card-header"}," Created by team ",-1)),s.value.created_by_team?(o(),l("div",re,a(s.value.created_by_team.name),1)):r("",!0),s.value.created_at?(o(),l("div",ie," Created at: "+a(n(i).utc(s.value.created_at).fromNow())+" ("+a(n(i)(s.value.created_at))+") ",1)):r("",!0)]),e("div",ne,[t[13]||(t[13]=e("div",{class:"card-header"}," Allocated To Service Team ",-1)),s.value.allocated_to_service_team?(o(),l("div",ue,a(s.value.allocated_to_service_team.name),1)):r("",!0)]),e("div",_e,[t[14]||(t[14]=e("div",{class:"card-header"}," Merchants ",-1)),s.value.voucher_set_merchant_teams?(o(),l("div",ce,[(o(!0),l(f,null,k(s.value.voucher_set_merchant_teams,u=>(o(),l("ul",ve,[e("li",null,a(u.merchant_team.name),1)]))),256))])):r("",!0)]),e("div",me,[t[15]||(t[15]=e("div",{class:"card-header"}," Vouchers ",-1)),m(E,{"voucher-set-id":v.voucherSetId},null,8,["voucher-set-id"])]),t[16]||(t[16]=e("div",{class:"pb-32"},null,-1))]),_:1})],64))}};export{Ve as default};
