import{_ as b,S as h}from"./AuthenticatedLayout-CceP5bI9.js";import{r as A,o as x,c as i,a as r,b as l,u as v,g,w as d,d as t,t as a,e as u,f as n,S as w,F as T}from"./app-Bxcu2Eth.js";import{_ as N}from"./AdminTopNavigation-BS54z0Xq.js";import{d as c}from"./dayjs.min-EiUFz_hV.js";import{r as B}from"./relativeTime-BB7cfkax.js";import{l as C}from"./localizedFormat-lEURi84k.js";import{P}from"./PrimaryButton-BxPB8kvC.js";import"./ApplicationLogo-BAZBnrEk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"card"},S={class:"card"},F={class:"my-1"},V={key:0,class:"my-1"},$={key:1,class:"my-1"},I={key:2,class:"my-1"},j={class:"my-1"},E={class:"card"},R={key:0},q={class:"card"},U={__name:"APIAccessToken",props:{id:{required:!0,type:Number}},setup(_){const p=_,s=A({});x(()=>{k()});function m(o){return c.extend(B),c.extend(C),c(o).fromNow()+" ("+c(o).format("LLLL")+")"}function k(){axios.get("/admin/user-personal-access-tokens/"+p.id+"?cached=false&relations=user").then(o=>{s.value=o.data.data}).catch(o=>{console.log(o)})}function y(){h.fire({title:"Are you sure you want to delete this token?",text:"This action cannot be undone, and the user will no longer be able to use this token. Please confirm if you wish to proceed.",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Revoke this token",showCancelButton:!0}).then(o=>{o.isConfirmed&&axios.delete("/admin/user-personal-access-tokens/"+p.id).then(e=>{window.location.href=route("admin.api-access-tokens")}).catch(e=>{console.log(e)})})}return(o,e)=>(r(),i(T,null,[l(v(g),{title:"API Access Token"}),l(b,null,{header:d(()=>[l(N)]),default:d(()=>[t("div",L,[t("h2",null,a(s.value.name)+" (#"+a(s.value.id)+") ",1)]),t("div",S,[e[6]||(e[6]=t("div",{class:"card-header"}," API Access Token details ",-1)),t("div",F,[e[1]||(e[1]=t("span",{class:"font-bold"}," Name: ",-1)),n(" "+a(s.value.name),1)]),s.value.tokenable_id?(r(),i("div",V,[e[2]||(e[2]=t("span",{class:"font-bold"}," Assigned To: ",-1)),l(v(w),{href:o.route("admin.user",{id:s.value.tokenable_id})},{default:d(()=>{var f;return[n(a((f=s.value.user)==null?void 0:f.name),1)]}),_:1},8,["href"])])):u("",!0),s.value.created_at?(r(),i("div",$,[e[3]||(e[3]=t("span",{class:"font-bold"}," Created: ",-1)),n(" "+a(m(s.value.created_at)),1)])):u("",!0),s.value.last_used_at?(r(),i("div",I,[e[4]||(e[4]=t("span",{class:"font-bold"}," Last used: ",-1)),n(" "+a(m(s.value.last_used_at)),1)])):u("",!0),t("div",j,[e[5]||(e[5]=t("span",{class:"font-bold"}," Expires: ",-1)),n(" "+a(s.value.expires_at?m(s.value.expires_at):"(No expiry)"),1)])]),t("div",E,[e[7]||(e[7]=t("div",{class:"card-header"}," Abilities ",-1)),s.value.abilities&&s.value.abilities.length?(r(),i("div",R,a(s.value.abilities.join(", ")),1)):u("",!0)]),t("div",q,[l(P,{onClick:e[0]||(e[0]=f=>y())},{default:d(()=>e[8]||(e[8]=[n(" Revoke this token ")])),_:1,__:[8]})])]),_:1})],64))}};export{U as default};
