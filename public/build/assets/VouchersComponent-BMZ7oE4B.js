import{r as y,o as w,c as u,e as V,a as _,d as e,F as B,g as I,b as d,w as n,f as m,t as s,u as i,P as c}from"./app-BnPtLwbX.js";import{P as S}from"./PaginatorComponent-C7BkJ9FA.js";import{d as x}from"./dayjs.min-DZKmmX-5.js";import{r as T}from"./relativeTime-4lJs7X16.js";import{u as k}from"./utc-BFYgIH9R.js";const C={key:0},N={class:"w-full text-xs"},P={class:"hover:bg-gray-100 border-b"},j={class:"py-1"},F={class:"text-right"},q={class:"text-right"},D={class:"flex justify-end"},A={class:"flex justify-end items-center mt-4"},E={class:"w-full lg:w-1/3"},z={__name:"VouchersComponent",props:{teamId:{required:!1,default:null},filterVouchers:{required:!1,default:null},voucherSetId:{required:!1,default:null}},setup(b){x.extend(T),x.extend(k);const a=b,f=y(50),l=y({});w(()=>{(a.teamId||a.voucherSetId)&&(f.value=10),h()});function h(g=1){let r="";a.teamId&&a.filterVouchers?r="&where[]="+a.filterVouchers+","+a.teamId:a.voucherSetId&&(r="&where[]=voucher_set_id,"+a.voucherSetId),axios.get("/admin/vouchers?cached=false&page="+g+"&limit="+f.value+r+"&orderBy=created_at,desc&relations=voucherSet.currencyCountry,createdByTeam,allocatedToServiceTeam").then(t=>{l.value=t.data.data}).catch(t=>{console.log(t)})}return(g,r)=>l.value.data&&l.value.data.length?(_(),u("div",C,[e("table",N,[r[1]||(r[1]=e("thead",{class:"bg-gray-200 font-bold border-b"},[e("tr",null,[e("td",{class:"p-2"},"ID"),e("td",null,"Test?"),e("td",null,"Created By"),e("td",null,"Allocated To"),e("td",{class:"text-right"},"Total Value"),e("td",{class:"text-right"},"Value Remaining"),e("td")])],-1)),e("tbody",null,[(_(!0),u(B,null,I(l.value.data,t=>{var v,p;return _(),u("tr",P,[e("td",j,[d(i(c),{href:"/admin/voucher/"+t.id},{default:n(()=>[m(" #"+s(t.id),1)]),_:2},1032,["href"])]),e("td",null,s(t.is_test?"Yes":""),1),e("td",null,[d(i(c),{href:"/admin/team/"+t.created_by_team_id},{default:n(()=>{var o;return[m(s((o=t.created_by_team)==null?void 0:o.name),1)]}),_:2},1032,["href"])]),e("td",null,[d(i(c),{href:"/admin/team/"+t.allocated_to_service_team_id},{default:n(()=>{var o;return[m(s((o=t.allocated_to_service_team)==null?void 0:o.name),1)]}),_:2},1032,["href"])]),e("td",F,[e("div",null,s(Number(t.voucher_value_original/100).toFixed(2))+" "+s((v=t.voucher_set.currency_country)==null?void 0:v.currency_code),1)]),e("td",q,[e("div",null,s(Number(t.voucher_value_remaining/100).toFixed(2))+" "+s((p=t.voucher_set.currency_country)==null?void 0:p.currency_code),1)]),e("td",D,[d(i(c),{class:"secondaryButton",href:"/admin/voucher/"+t.id},{default:n(()=>r[0]||(r[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})],-1)])),_:2},1032,["href"])])])}),256))])]),e("div",A,[e("div",E,[d(S,{onSetDataPage:h,"pagination-data":l.value},null,8,["pagination-data"])])])])):V("",!0)}};export{z as _};
