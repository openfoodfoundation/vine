import{_ as B}from"./AuthenticatedLayout-C1uiwIH8.js";import{r as N,o as R,c as r,a,b as v,u as i,m as T,w as c,d as e,e as l,t as o,P as m,f as n,F as h,g as k,h as C}from"./app-BnPtLwbX.js";import{_ as S}from"./AdminTopNavigation-CqLmaDuE.js";import{d as u}from"./dayjs.min-DZKmmX-5.js";import{r as $}from"./relativeTime-4lJs7X16.js";import{u as M}from"./utc-BFYgIH9R.js";import"./ApplicationLogo-Pt54_Rnq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PrimaryButton-C1b6dLWA.js";const j={class:"grid grid-cols-2 gap-8 container mx-auto mt-8"},D={class:"card"},E={class:"opacity-25"},F={key:0,class:"mt-4"},L={key:1,class:"font-bold text-red-500 text-sm"},P={class:"card"},q={key:0},z={class:"card"},A={class:"grid grid-cols-4 gap-y-12 text-center mt-8"},I={class:"font-bold text-3xl"},O={class:"font-bold text-3xl"},U={class:"font-bold text-3xl"},W={key:0},G={class:"font-bold text-3xl"},H={class:"text-xs"},J={key:1},K={class:"font-bold text-3xl"},Q={class:"text-xs"},X={class:"grid grid-cols-2 gap-8 container mx-auto"},Y={class:"card"},Z={key:0},ee={key:1,class:"text-xs mt-2"},te={class:"card"},se={key:0},oe={class:"card"},de={key:0},ae={class:"card"},re={key:0,class:"text-sm"},ie={class:"border-b flex justify-between items-center py-2 sm:p-2"},le={class:"text-xs opacity-25"},ne={class:"font-bold"},ue={key:0},_e={class:"font-bold"},ve={key:1},ce={class:"font-bold"},we={__name:"Voucher",props:{id:{required:!0}},setup(w){u.extend($),u.extend(M);const f=w,s=N({});R(()=>{V()});function V(){axios.get("/admin/vouchers/"+f.id+"?cached=false&relations=voucherSet.voucherSetMerchantTeams.merchantTeam,createdByTeam,allocatedToServiceTeam,voucherRedemptions.redeemedByUser,voucherRedemptions.redeemedByTeam").then(_=>{s.value=_.data.data}).catch(_=>{console.log(_)})}return(_,t)=>(a(),r(h,null,[v(i(T),{title:"Voucher set"}),v(B,null,{header:c(()=>[v(S)]),default:c(()=>{var p,x,y,g;return[e("div",j,[e("div",D,[t[1]||(t[1]=e("div",{class:"card-header"}," Voucher Details ",-1)),e("h2",E," ID: "+o(f.id),1),s.value.voucher_short_code?(a(),r("div",F,[e("h2",null," Short Code: "+o(s.value.voucher_short_code),1),t[0]||(t[0]=e("div",{class:"text-xs text-gray-500"}," Short codes are used in unattended (online) redemptions ",-1))])):l("",!0),s.value.is_test?(a(),r("div",L," Test voucher ")):l("",!0)]),e("div",P,[t[2]||(t[2]=e("div",{class:"card-header"}," Voucher set ",-1)),s.value.voucher_set_id?(a(),r("div",q,[v(i(m),{href:_.route("admin.voucher-set",{id:s.value.voucher_set_id})},{default:c(()=>[n(o(s.value.voucher_set_id),1)]),_:1},8,["href"])])):l("",!0)])]),e("div",z,[t[8]||(t[8]=e("div",{class:"card-header"}," Voucher details ",-1)),e("div",A,[e("div",null,[e("div",I," $"+o(s.value.voucher_value_original/100),1),t[3]||(t[3]=n(" Original value "))]),e("div",null,[e("div",O," $"+o(s.value.voucher_value_remaining/100),1),t[4]||(t[4]=n(" Remaining value "))]),e("div",null,[e("div",U,o(s.value.num_voucher_redemptions??"0"),1),t[5]||(t[5]=n(" # Redemptions "))]),s.value.last_redemption_at?(a(),r("div",W,[t[6]||(t[6]=e("div",null," Last redeemed ",-1)),e("div",G,o(i(u).utc(s.value.last_redemption_at).fromNow()),1),e("div",H," ("+o(i(u)(s.value.last_redemption_at))+") ",1)])):l("",!0),(p=s.value.voucher_set)!=null&&p.expires_at?(a(),r("div",J,[t[7]||(t[7]=e("div",null," Expires ",-1)),e("div",K,o(i(u).utc(s.value.voucher_set.expires_at).fromNow()),1),e("div",Q," ("+o(i(u)(s.value.voucher_set.expires_at))+") ",1)])):l("",!0)])]),e("div",X,[e("div",Y,[t[9]||(t[9]=e("div",{class:"card-header"}," Created by team ",-1)),s.value.created_by_team?(a(),r("div",Z,[v(i(m),{href:_.route("admin.team",{id:s.value.created_by_team_id})},{default:c(()=>{var d;return[n(o((d=s.value.created_by_team)==null?void 0:d.name),1)]}),_:1},8,["href"])])):l("",!0),s.value.created_at?(a(),r("div",ee," Created at: "+o(i(u).utc(s.value.created_at).fromNow())+" ("+o(i(u)(s.value.created_at))+") ",1)):l("",!0)]),e("div",te,[t[10]||(t[10]=e("div",{class:"card-header"}," Allocated to team ",-1)),s.value.allocated_to_service_team?(a(),r("div",se,[v(i(m),{href:_.route("admin.team",{id:s.value.allocated_to_service_team_id})},{default:c(()=>{var d;return[n(o((d=s.value.allocated_to_service_team)==null?void 0:d.name),1)]}),_:1},8,["href"])])):l("",!0)])]),e("div",oe,[t[11]||(t[11]=e("div",{class:"card-header"}," Merchants Who May Redeem Vouchers ",-1)),(x=s.value.voucher_set)!=null&&x.voucher_set_merchant_teams&&((y=s.value.voucher_set)!=null&&y.voucher_set_merchant_teams.length)?(a(),r("div",de,[(a(!0),r(h,null,k((g=s.value.voucher_set)==null?void 0:g.voucher_set_merchant_teams,d=>(a(),r("div",null,[v(i(m),{href:_.route("admin.team",d.merchant_team_id),class:""},{default:c(()=>{var b;return[n(o((b=d.merchant_team)==null?void 0:b.name),1)]}),_:2},1032,["href"])]))),256))])):l("",!0)]),e("div",ae,[t[16]||(t[16]=e("div",{class:"card-header"}," Voucher redemptions ",-1)),s.value.voucher_redemptions&&s.value.voucher_redemptions.length?(a(),r("div",re,[(a(!0),r(h,null,k(s.value.voucher_redemptions,d=>(a(),C(i(m),{href:_.route("admin.voucher-redemption",d.id),class:"hover:no-underline hover:opacity-75"},{default:c(()=>[e("div",ie,[e("div",null,[e("div",le," #"+o(d.id),1),e("div",null,[t[12]||(t[12]=n(" Redeemed amount: ")),e("span",ne,"$"+o(d.redeemed_amount/100),1)]),d.redeemed_by_user&&d.redeemed_by_team?(a(),r("div",ue,[t[13]||(t[13]=n(" Redeemed by: ")),e("span",_e,o(d.redeemed_by_user.name)+" ("+o(d.redeemed_by_team.name)+")",1)])):l("",!0),d.created_at?(a(),r("div",ve,[t[14]||(t[14]=n(" Redeemed at: ")),e("span",ce,o(i(u).utc(d.created_at).fromNow())+" ("+o(i(u)(d.created_at))+")",1)])):l("",!0)]),t[15]||(t[15]=e("div",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])],-1))])]),_:2},1032,["href"]))),256))])):l("",!0)]),t[17]||(t[17]=e("div",{class:"pb-32"},null,-1))]}),_:1})],64))}};export{we as default};
