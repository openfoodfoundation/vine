import{_ as V}from"./AuthenticatedLayout-fdh2LT__.js";import{c as P,g as E,r as z,o as I,a as T,b as Y,d as b,u as F,w as L,F as H,Z as R,e as s,t as m,f as p,i as Z,h as w}from"./app-CLWo_2_0.js";import{_ as q}from"./AdminTopNavigation-B_k0Rku1.js";import{S as G}from"./sweetalert2.all-CR-AECOm.js";import{d as D}from"./dayjs.min-B8jeV6Gm.js";import{P as U}from"./PrimaryButton-DzdjS49d.js";import"./ApplicationLogo-BOnuEcuS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";var S={exports:{}};(function(v,g){(function(e,a){v.exports=a()})(P,function(){return function(e,a,l){e=e||{};var n=a.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function r(t,d,f,h){return n.fromToBase(t,d,f,h)}l.en.relativeTime=o,n.fromToBase=function(t,d,f,h,B){for(var M,c,k,A=f.$locale().relativeTime||o,y=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],C=y.length,x=0;x<C;x+=1){var u=y[x];u.d&&(M=h?l(t).diff(f,u.d,!0):f.diff(t,u.d,!0));var _=(e.rounding||Math.round)(Math.abs(M));if(k=M>0,_<=u.r||!u.r){_<=1&&x>0&&(u=y[x-1]);var N=A[u.l];B&&(_=B(""+_)),c=typeof N=="string"?N.replace("%d",_):N(_,d,u.l,k);break}}if(d)return c;var $=k?A.future:A.past;return typeof $=="function"?$(c):$.replace("%s",c)},n.to=function(t,d){return r(t,d,this,!0)},n.from=function(t,d){return r(t,d,this)};var i=function(t){return t.$u?l.utc():l()};n.toNow=function(t){return this.to(i(this),t)},n.fromNow=function(t){return this.from(i(this),t)}}})})(S);var J=S.exports;const K=E(J);var j={exports:{}};(function(v,g){(function(e,a){v.exports=a()})(P,function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(a,l,n){var o=l.prototype,r=o.format;n.en.formats=e,o.format=function(i){i===void 0&&(i="YYYY-MM-DDTHH:mm:ssZ");var t=this.$locale().formats,d=function(f,h){return f.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(B,M,c){var k=c&&c.toUpperCase();return M||h[c]||e[c]||h[k].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(A,y,C){return y||C.slice(1)})})}(i,t===void 0?{}:t);return r.call(this,d)}}})})(j);var O=j.exports;const Q=E(O),W={class:"card"},X={class:"card"},ee=s("div",{class:"card-header"}," API Access Token details ",-1),te={class:"my-1"},oe=s("span",{class:"font-bold"}," Name: ",-1),se={key:0,class:"my-1"},ae=s("span",{class:"font-bold"}," Assigned To: ",-1),ne={class:"my-1"},re=s("span",{class:"font-bold"}," Created: ",-1),ie={key:1,class:"my-1"},de=s("span",{class:"font-bold"}," Last used: ",-1),ce={key:2,class:"my-1"},le=s("span",{class:"font-bold"}," Expires: ",-1),ue={class:"card"},me=s("div",{class:"card-header"}," Abilities ",-1),fe={key:0},he={class:"card"},Ye={__name:"APIAccessToken",props:{id:{required:!0,type:Number}},setup(v){const g=v,e=z({});I(()=>{l()});function a(o){return D.extend(K),D.extend(Q),D(o).fromNow()+" ("+D(o).format("LLL")+")"}function l(){axios.get("/admin/user-personal-access-tokens/"+g.id+"?cached=false&relations=user").then(o=>{e.value=o.data.data}).catch(o=>{console.log(o)})}function n(){G.fire({title:"Are you sure you want to delete this token?",text:"This action cannot be undone, and the user will no longer be able to use this token. Please confirm if you wish to proceed.",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Revoke this token",showCancelButton:!0}).then(o=>{o.isConfirmed&&axios.delete("/admin/user-personal-access-tokens/"+g.id).then(r=>{window.location.href=route("admin.api-access-tokens")}).catch(r=>{console.log(r)})})}return(o,r)=>(T(),Y(H,null,[b(F(R),{title:"API Access Token"}),b(V,null,{header:L(()=>[b(q)]),default:L(()=>[s("div",W,[s("h2",null,m(e.value.name)+" (#"+m(e.value.id)+") ",1)]),s("div",X,[ee,s("div",te,[oe,p(" "+m(e.value.name),1)]),e.value.tokenable_id?(T(),Y("div",se,[ae,b(F(Z),{href:o.route("admin.user",{id:e.value.tokenable_id})},{default:L(()=>{var i;return[p(m((i=e.value.user)==null?void 0:i.name),1)]}),_:1},8,["href"])])):w("",!0),s("div",ne,[re,p(" "+m(a(e.value.created_at)),1)]),e.value.last_used_at?(T(),Y("div",ie,[de,p(" "+m(a(e.value.last_used_at)),1)])):w("",!0),e.value.expires_at?(T(),Y("div",ce,[le,p(" "+m(a(e.value.expires_at)),1)])):w("",!0)]),s("div",ue,[me,e.value.abilities&&e.value.abilities.length?(T(),Y("div",fe,m(e.value.abilities.join(", ")),1)):w("",!0)]),s("div",he,[b(U,{onClick:r[0]||(r[0]=i=>n())},{default:L(()=>[p(" Revoke this token ")]),_:1})])]),_:1})],64))}};export{Ye as default};
