import{a as n,b as i,e as t,t as C,r as h,d as l,l as L,m as P,F as I,j,h as T,o as H,w,f as g,u as A,i as q,n as J,c as Q,g as X,Z as ee}from"./app-De6ADG2Z.js";import{_ as te}from"./AuthenticatedLayout-Ddc8y2KE.js";import{_ as ae}from"./AdminTopNavigation-CiIcEXyl.js";import{P as O}from"./PaginatorComponent-5ycE4kq2.js";import{S}from"./sweetalert2.all-CiIoo-le.js";import{P as D}from"./PrimaryButton-7kF1Zoeu.js";import{_ as M}from"./TextInput-D6Kj0igu.js";import{_ as B}from"./InputLabel-BI4E3QqK.js";import{_ as Z}from"./AdminTeamCreateComponent-DsFDwwbU.js";import{_ as se}from"./AdminUserDetailsComponent-CeQgIDVw.js";import{_ as ne}from"./SecondaryButton-BkDohym5.js";import{_ as ie}from"./AjaxLoadingIndicator-DEnLBDPM.js";import{d as E}from"./dayjs.min-8HiHFi2H.js";import{r as oe}from"./relativeTime-CrOw5TTE.js";import{D as le}from"./DangerButton-BePqVOTh.js";import"./ApplicationLogo-CmYXJ9Tu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const re={class:"flex justify-start items-center"},de={class:"text-xs mr-2"},ce={class:""},U={__name:"AdminTeamDetailsComponent",props:{team:{required:!0,type:Object}},setup(p){const f=p;return(_,m)=>(n(),i("div",re,[t("div",de,"#"+C(f.team.id),1),t("div",ce,C(f.team.name),1)]))}},ue={key:0},me={key:1},ve={key:0,class:"mt-4"},fe={class:"border-b py-1"},he=["onClick"],_e={key:0,class:"text-red-500 text-xs italic pl-2"},pe={key:1},$e={__name:"AdminTeamMerchantTeamSelectComponent",props:{teamId:{required:!1,default:null}},emits:["teamSelected"],setup(p,{emit:f}){const _=p,m=h(!1),o=h(""),d=h({}),v=f;function y(){axios.get("/admin/teams?where[]=name,like,*"+o.value+"*&limit=100&relations=teamsThisTeamIsMerchantFor").then(c=>{d.value=c.data.data}).catch(c=>{console.log(c)})}function u(){m.value=!0,d.value={}}function $(c){x(c)}function x(c){v("teamSelected",c),o.value="",d.value={}}function k(c){return c.teams_this_team_is_merchant_for.find(r=>r.team_id===_.teamId)}return(c,r)=>m.value?(n(),i("div",ue,[l(Z,{searchStr:o.value,onTeamCreated:$},null,8,["searchStr"])])):(n(),i("div",me,[t("div",null,[l(B,{for:"name",value:"Team name(Type to search and press Enter)"}),l(M,{onKeyup:r[0]||(r[0]=L(P(a=>y(),["prevent"]),["enter"])),id:"name",type:"text",class:"mt-1 block w-full",modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=a=>o.value=a),required:""},null,8,["modelValue"])]),o.value.length>0&&d.value.total>0?(n(),i("div",ve,[(n(!0),i(I,null,j(d.value.data,a=>(n(),i("div",fe,[t("button",{onClick:e=>x(a),class:"flex justify-start items-end"},[l(U,{team:a},null,8,["team"]),k(a)?(n(),i("span",_e,"***Already added")):T("",!0)],8,he)]))),256)),t("div",{class:"text-red-500 text-sm mt-4 cursor-pointer hover:underline",onClick:r[2]||(r[2]=a=>u())}," Create a new team? ")])):T("",!0),o.value.length>0&&d.value.total===0?(n(),i("div",pe,[t("div",{class:"text-red-500 text-sm mt-4 cursor-pointer hover:underline",onClick:r[3]||(r[3]=a=>u())}," We could not find teams. Do you want to create a new team? ")])):T("",!0)]))}},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-0 md:gap-4"},ge={class:"card"},ye={class:"card-header flex justify-between items-center"},we=t("div",null," Merchant teams ",-1),ke={class:"text-xs italic"},Ce={class:""},Te={class:"flex justify-end"},be={key:0},Se={key:1},Ne={key:0},Ie=t("div",{class:"py-2"},"Select merchant team...",-1),De={key:1},je={class:"py-2"},Ae={class:"font-bold"},Me={key:2},Ue={key:0,class:"mb-8"},Ve={class:"border-b py-1 flex justify-between items-end"},Be=["onClick"],qe=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"size-3"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),Oe={class:"flex justify-end items-center mt-4"},Pe={class:"w-full lg:w-1/3"},Ye={class:"card"},ze={class:"card-header"},Fe={class:"text-xs italic"},Ee={key:0,class:"mb-8"},He={class:"border-b py-1 flex justify-between items-end"},Ke=["onClick"],We=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"size-3"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),Le={class:"flex justify-end items-center mt-4"},Ze={class:"w-full lg:w-1/3"},Ge={__name:"AdminTeamMerchantTeamsComponent",props:{teamId:{required:!0,type:Number},teamName:{required:!0}},setup(p){const f=p,_=h(!1),m=h(!1),o=h({}),d=h({}),v=h({});H(()=>{$(),x()});function y(){_.value=!0}function u(){_.value=!1,m.value=!1,v.value={}}function $(a=1){axios.get("/admin/team-merchant-teams?cached=false&where[]=team_id,"+f.teamId+"&page="+a+"&relations=merchantTeam").then(e=>{o.value=e.data.data}).catch(e=>{console.log(e)})}function x(a=1){axios.get("/admin/team-merchant-teams?cached=false&where[]=merchant_team_id,"+f.teamId+"&page="+a+"&relations=team").then(e=>{d.value=e.data.data}).catch(e=>{console.log(e)})}function k(a){S.fire({title:"Are you sure you want to delete?",text:"This action cannot be undone. Please confirm if you wish to proceed.",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Delete merchant team",showCancelButton:!0}).then(e=>{e.isConfirmed&&axios.delete("/admin/team-merchant-teams/"+a).then(s=>{S.fire({title:"Success!",icon:"success",timer:1e3}).then(()=>{$(),x()})}).catch(s=>{console.log(s)})})}function c(){let a={team_id:f.teamId,merchant_team_id:v.value.id};axios.post("/admin/team-merchant-teams",a).then(e=>{S.fire({title:"Success!",icon:"success",timer:1e3}).then(()=>{v.value={},m.value=!1,$(),x()})}).catch(e=>{console.log(e)})}function r(a){v.value=a,_.value=!1,m.value=!0}return(a,e)=>(n(),i("div",xe,[t("div",ge,[t("div",ye,[t("div",null,[we,t("div",ke," These teams may redeem vouchers for "+C(p.teamName),1)]),t("div",Ce,[t("div",Te,[!_.value&&!m.value?(n(),i("div",be,[l(D,{onClick:e[0]||(e[0]=s=>y()),class:"ms-4"},{default:w(()=>[g(" Add Merchant Team ")]),_:1})])):(n(),i("div",Se,[l(D,{onClick:e[1]||(e[1]=s=>u()),class:"ms-4"},{default:w(()=>[g(" Cancel ")]),_:1})]))])])]),_.value?(n(),i("div",Ne,[Ie,l($e,{teamId:p.teamId,onTeamSelected:r},null,8,["teamId"])])):m.value?(n(),i("div",De,[t("div",je,[g("Add "),t("span",Ae,C(v.value.name),1),g(" as merchant team? ")]),l(D,{onClick:e[2]||(e[2]=s=>c()),class:""},{default:w(()=>[g(" Add ")]),_:1})])):(n(),i("div",Me,[o.value.data&&o.value.data.length?(n(),i("div",Ue,[(n(!0),i(I,null,j(o.value.data,s=>(n(),i("div",Ve,[l(A(q),{href:a.route("admin.team",s.merchant_team_id)},{default:w(()=>[l(U,{team:s.merchant_team},null,8,["team"])]),_:2},1032,["href"]),t("button",{onClick:b=>k(s.id),class:"text-xs text-red-500 flex items-center"},[qe,g(" Delete ")],8,Be)]))),256)),t("div",Oe,[t("div",Pe,[l(O,{onSetDataPage:$,"pagination-data":o.value},null,8,["pagination-data"])])])])):T("",!0)]))]),t("div",Ye,[t("div",ze,[t("div",null," Teams "+C(p.teamName)+" is merchant for ",1),t("div",Fe,C(p.teamName)+" may redeem vouchers for these teams ",1)]),d.value.data&&d.value.data.length?(n(),i("div",Ee,[(n(!0),i(I,null,j(d.value.data,s=>(n(),i("div",He,[l(A(q),{href:a.route("admin.team",s.team_id)},{default:w(()=>[l(U,{team:s.team},null,8,["team"])]),_:2},1032,["href"]),t("button",{onClick:b=>k(s.id),class:"text-xs text-red-500 flex items-center"},[We,g(" Delete ")],8,Ke)]))),256)),t("div",Le,[t("div",Ze,[l(O,{onSetDataPage:x,"pagination-data":d.value},null,8,["pagination-data"])])])])):T("",!0)])]))}},Re={key:0},Je={key:1},Qe={key:0,class:"mt-4"},Xe={class:"border-b py-1"},et=["onClick"],tt={key:0,class:"text-red-500 text-xs italic pl-2"},at={key:1},st={__name:"AdminTeamServiceTeamSelectComponent",props:{teamId:{required:!1,default:null}},emits:["teamSelected"],setup(p,{emit:f}){const _=p,m=h(!1),o=h(""),d=h({}),v=f;function y(){axios.get("/admin/teams?where[]=name,like,*"+o.value+"*&limit=100&relations=teamsThisTeamIsServiceFor").then(c=>{d.value=c.data.data}).catch(c=>{console.log(c)})}function u(){m.value=!0,d.value={}}function $(c){x(c)}function x(c){v("teamSelected",c),o.value="",d.value={}}function k(c){return c.teams_this_team_is_service_for.find(r=>r.team_id===_.teamId)}return(c,r)=>m.value?(n(),i("div",Re,[l(Z,{searchStr:o.value,onTeamCreated:$},null,8,["searchStr"])])):(n(),i("div",Je,[t("div",null,[l(B,{for:"name",value:"Team name(Type to search and press Enter)"}),l(M,{onKeyup:r[0]||(r[0]=L(P(a=>y(),["prevent"]),["enter"])),id:"name",type:"text",class:"mt-1 block w-full",modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=a=>o.value=a),required:""},null,8,["modelValue"])]),o.value.length>0&&d.value.total>0?(n(),i("div",Qe,[(n(!0),i(I,null,j(d.value.data,a=>(n(),i("div",Xe,[t("button",{onClick:e=>x(a),class:"flex justify-start items-end"},[l(U,{team:a},null,8,["team"]),k(a)?(n(),i("span",tt,"***Already added")):T("",!0)],8,et)]))),256)),t("div",{class:"text-red-500 text-sm mt-4 cursor-pointer hover:underline",onClick:r[2]||(r[2]=a=>u())}," Create a new team? ")])):T("",!0),o.value.length>0&&d.value.total===0?(n(),i("div",at,[t("div",{class:"text-red-500 text-sm mt-4 cursor-pointer hover:underline",onClick:r[3]||(r[3]=a=>u())}," We could not find teams. Do you want to create a new team? ")])):T("",!0)]))}},nt={class:"grid grid-cols-1 md:grid-cols-2 gap-0 md:gap-4"},it={class:"card"},ot={class:"card-header flex justify-between items-center"},lt=t("div",null," Service teams ",-1),rt={class:"text-xs italic"},dt={class:""},ct={class:"flex justify-end"},ut={class:"flex justify-end"},mt={key:0},vt={key:1},ft={key:0},ht=t("div",{class:"py-2"},"Select service team...",-1),_t={key:1},pt={class:"py-2"},$t={class:"font-bold"},xt={key:2},gt={key:0,class:"mb-8"},yt={class:"border-b py-1 flex justify-between items-end"},wt=["onClick"],kt=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"size-3"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),Ct={class:"flex justify-end items-center mt-4"},Tt={class:"w-full lg:w-1/3"},bt={class:"card"},St={class:"card-header"},Nt={class:"text-xs italic"},It={key:0,class:"mb-8"},Dt={class:"border-b py-1 flex justify-between items-end"},jt=["onClick"],At=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"size-3"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),Mt={class:"flex justify-end items-center mt-4"},Ut={class:"w-full lg:w-1/3"},Vt={__name:"AdminTeamServiceTeamsComponent",props:{teamId:{required:!0,type:Number},teamName:{required:!0}},setup(p){const f=p,_=h(!1),m=h(!1),o=h({}),d=h({}),v=h({});H(()=>{$(),x()});function y(){_.value=!0}function u(){_.value=!1,m.value=!1,v.value={}}function $(a=1){axios.get("/admin/team-service-teams?cached=false&where[]=team_id,"+f.teamId+"&page="+a+"&relations=serviceTeam").then(e=>{o.value=e.data.data}).catch(e=>{console.log(e)})}function x(a=1){axios.get("/admin/team-service-teams?cached=false&where[]=service_team_id,"+f.teamId+"&page="+a+"&relations=team").then(e=>{d.value=e.data.data}).catch(e=>{console.log(e)})}function k(a){S.fire({title:"Are you sure you want to delete?",text:"This action cannot be undone. Please confirm if you wish to proceed.",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Delete service team",showCancelButton:!0}).then(e=>{e.isConfirmed&&axios.delete("/admin/team-service-teams/"+a).then(s=>{S.fire({title:"Success!",icon:"success",timer:1e3}).then(()=>{$(),x()})}).catch(s=>{console.log(s)})})}function c(){let a={team_id:f.teamId,service_team_id:v.value.id};axios.post("/admin/team-service-teams",a).then(e=>{S.fire({title:"Success!",icon:"success",timer:1e3}).then(()=>{v.value={},m.value=!1,$(),x()})}).catch(e=>{console.log(e)})}function r(a){v.value=a,_.value=!1,m.value=!0}return(a,e)=>(n(),i("div",nt,[t("div",it,[t("div",ot,[t("div",null,[lt,t("div",rt," These teams may distribute vouchers for redemption at "+C(p.teamName),1)]),t("div",dt,[t("div",ct,[t("div",ut,[!_.value&&!m.value?(n(),i("div",mt,[l(D,{onClick:e[0]||(e[0]=s=>y()),class:"ms-4"},{default:w(()=>[g(" Add Service Team ")]),_:1})])):(n(),i("div",vt,[l(D,{onClick:e[1]||(e[1]=s=>u()),class:"ms-4"},{default:w(()=>[g(" Cancel ")]),_:1})]))])])])]),_.value?(n(),i("div",ft,[ht,l(st,{teamId:p.teamId,onTeamSelected:r},null,8,["teamId"])])):m.value?(n(),i("div",_t,[t("div",pt,[g("Adding "),t("span",$t,C(v.value.name),1),g(" as service team?")]),l(D,{onClick:e[2]||(e[2]=s=>c()),class:""},{default:w(()=>[g(" Add ")]),_:1})])):(n(),i("div",xt,[o.value.data&&o.value.data.length?(n(),i("div",gt,[(n(!0),i(I,null,j(o.value.data,s=>(n(),i("div",yt,[l(A(q),{href:a.route("admin.team",s.service_team_id)},{default:w(()=>[l(U,{team:s.service_team},null,8,["team"])]),_:2},1032,["href"]),t("button",{onClick:b=>k(s.id),class:"text-xs text-red-500 flex items-center"},[kt,g(" Delete ")],8,wt)]))),256)),t("div",Ct,[t("div",Tt,[l(O,{onSetDataPage:$,"pagination-data":o.value},null,8,["pagination-data"])])])])):T("",!0)]))]),t("div",bt,[t("div",St,[t("div",null," Teams "+C(p.teamName)+" is service for ",1),t("div",Nt,C(p.teamName)+" may distribute vouchers to these teams ",1)]),d.value.data&&d.value.data.length?(n(),i("div",It,[(n(!0),i(I,null,j(d.value.data,s=>(n(),i("div",Dt,[l(A(q),{href:a.route("admin.team",s.team_id)},{default:w(()=>[l(U,{team:s.team},null,8,["team"])]),_:2},1032,["href"]),t("button",{onClick:b=>k(s.id),class:"text-xs text-red-500 flex items-center"},[At,g(" Delete ")],8,jt)]))),256)),t("div",Mt,[t("div",Ut,[l(O,{onSetDataPage:x,"pagination-data":d.value},null,8,["pagination-data"])])])])):T("",!0)])]))}},Bt={key:0},qt={class:"flex items-center justify-end mt-4"},Ot={key:1},Pt={key:0,class:"mt-4"},Yt=["onClick"],zt={key:1},Ft={__name:"AdminUserSelectComponent",props:{teamId:{required:!0,type:Number}},emits:["createNewTeamUser"],setup(p,{emit:f}){const _=p,m=h(!1),o=h({name:"",email:"",current_team_id:null}),d=h(""),v=h({}),y=f;function u(){o.value.current_team_id=_.teamId,axios.post("admin/users",o.value).then(c=>{let r=c.data.data.id;k(r),o.value={name:"",email:"",current_team_id:null},m.value=!1}).catch(c=>{console.log(c)})}function $(){axios.get("/admin/users?where[]=name,like,*"+d.value+"*&limit=100").then(c=>{v.value=c.data.data}).catch(c=>{console.log(c)})}function x(){m.value=!0,v.value={},o.value.name=d.value}function k(c){y("createNewTeamUser",c),d.value="",v.value={}}return(c,r)=>m.value?(n(),i("div",Bt,[t("div",null,[l(B,{for:"name",value:"Name"}),l(M,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:o.value.name,"onUpdate:modelValue":r[0]||(r[0]=a=>o.value.name=a),required:""},null,8,["modelValue"])]),t("div",null,[l(B,{for:"email",value:"Email"}),l(M,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:o.value.email,"onUpdate:modelValue":r[1]||(r[1]=a=>o.value.email=a),required:""},null,8,["modelValue"])]),t("div",qt,[l(D,{onClick:r[2]||(r[2]=P(a=>u(),["prevent"])),class:J(["ms-4",{"opacity-25":!o.value.name||!o.value.email}]),disabled:!o.value.name||!o.value.email},{default:w(()=>[g(" Submit ")]),_:1},8,["class","disabled"])])])):(n(),i("div",Ot,[t("div",null,[l(B,{for:"name",value:"Find A User"}),l(M,{onKeyup:r[3]||(r[3]=a=>$()),modelValue:d.value,"onUpdate:modelValue":r[4]||(r[4]=a=>d.value=a),class:"mt-1 block w-full",placeholder:"Search by name..",type:"text"},null,8,["modelValue"])]),d.value.length>0&&v.value.total>0?(n(),i("div",Pt,[(n(!0),i(I,null,j(v.value.data,a=>(n(),i("a",{href:"#",onClick:e=>k(a.id),class:"border-b py-1",tabindex:"0"},[l(se,{user:a},null,8,["user"])],8,Yt))),256)),t("div",{class:"text-red-500 text-sm mt-4 cursor-pointer hover:underline",onClick:r[5]||(r[5]=a=>x())}," Create a new user? ")])):T("",!0),d.value.length>0&&v.value.total===0?(n(),i("div",zt,[t("div",{class:"text-red-500 text-sm mt-4 cursor-pointer hover:underline",onClick:r[6]||(r[6]=a=>x())}," We could not find users. Do you want to create a new user? ")])):T("",!0)]))}};var G={exports:{}};(function(p,f){(function(_,m){p.exports=m()})(Q,function(){var _="minute",m=/[+-]\d\d(?::?\d\d)?/g,o=/([+-]|\d\d)/g;return function(d,v,y){var u=v.prototype;y.utc=function(e){var s={date:e,utc:!0,args:arguments};return new v(s)},u.utc=function(e){var s=y(this.toDate(),{locale:this.$L,utc:!0});return e?s.add(this.utcOffset(),_):s},u.local=function(){return y(this.toDate(),{locale:this.$L,utc:!1})};var $=u.parse;u.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),$.call(this,e)};var x=u.init;u.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else x.call(this)};var k=u.utcOffset;u.utcOffset=function(e,s){var b=this.$utils().u;if(b(e))return this.$u?0:b(this.$offset)?k.call(this):this.$offset;if(typeof e=="string"&&(e=function(Y){Y===void 0&&(Y="");var W=Y.match(m);if(!W)return null;var z=(""+W[0]).match(o)||["-",0,0],R=z[0],F=60*+z[1]+ +z[2];return F===0?0:R==="+"?F:-F}(e),e===null))return this;var V=Math.abs(e)<=16?60*e:e,N=this;if(s)return N.$offset=V,N.$u=e===0,N;if(e!==0){var K=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(N=this.local().add(V+K,_)).$offset=V,N.$x.$localOffset=K}else N=this.utc();return N};var c=u.format;u.format=function(e){var s=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,s)},u.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var r=u.toDate;u.toDate=function(e){return e==="s"&&this.$offset?y(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():r.call(this)};var a=u.diff;u.diff=function(e,s,b){if(e&&this.$u===e.$u)return a.call(this,e,s,b);var V=this.local(),N=y(e).local();return a.call(V,N,s,b)}}})})(G);var Et=G.exports;const Ht=X(Et),Kt={class:"card"},Wt={class:""},Lt={class:"card"},Zt=t("div",{class:"card-header"}," Team details ",-1),Gt={class:"flex justify-start items-center"},Rt={class:"text-xs mr-2"},Jt={key:0,class:"mt-2 flex justify-end"},Qt={class:"card"},Xt=t("div",{class:"card-header"}," Team members ",-1),ea={key:0},ta={class:"flex justify-between items-center hover:opacity-75"},aa={class:"flex justify-end items-center"},sa={key:0,class:"pr-2 text-xs"},na=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})],-1),ia={class:"flex"},oa={key:0},la={key:1,class:"px-2"},ra={key:2,class:"px-2"},da=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-3 font-bold"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1),ca={class:"flex justify-end items-center mt-4"},ua={class:"w-full lg:w-1/3"},ma={class:"card"},va=t("div",{class:"card-header"}," Add user to team ",-1),fa={class:"container mx-auto"},ha={class:"container mx-auto"},_a=t("div",{class:"card"},[t("div",{class:"text-sm pb-2 text-gray-500"},"Voucher sets created by team"),g(" - paginated ")],-1),pa=t("div",{class:"card"},[t("div",{class:"text-sm pb-2 text-gray-500"},"Voucher sets allocated to team"),g(" - paginated ")],-1),Va={__name:"Team",props:{id:{required:!0,type:Number}},setup(p){E.extend(oe),E.extend(Ht);const f=p,_=h(10),m=h(""),o=h({}),d=h({}),v=h(!1);H(()=>{u(),$()});function y(a){let e={user_id:a,team_id:f.id};axios.post("/admin/team-users",e).then(s=>{S.fire({title:"Success!",icon:"success",timer:1e3}).then(()=>{$()})}).catch(s=>{console.log(s)})}function u(){axios.get("/admin/teams/"+f.id+"?cached=false").then(a=>{o.value=a.data.data,m.value=o.value.name}).catch(a=>{console.log(a)})}function $(a=1){axios.get("/admin/team-users?cached=false&page="+a+"&where[]=team_id,"+f.id+"&relations=user&limit="+_.value+"&orderBy=id,desc").then(e=>{d.value=e.data.data}).catch(e=>{console.log(e)})}function x(a){v.value=!0;let e={send_invite_email:!0};axios.put("/admin/team-users/"+a.id,e).then(s=>{$(),v.value=!1}).catch(s=>{console.log(s),v.value=!1})}function k(a){S.fire({icon:"warning",title:"Are you sure?",text:"This will remove this user from this team. You can always add them back.",showConfirmButton:!0,showCancelButton:!0}).then(e=>{e.isConfirmed&&axios.delete("/admin/team-users/"+a.id).then(s=>{S.fire({title:"Success!",icon:"success",timer:1e3}).then(()=>{$()})}).catch(s=>{console.log(s)})})}function c(a){$(a)}function r(){let a={name:m.value};axios.put("/admin/teams/"+f.id,a).then(e=>{S.fire({title:"Success!",icon:"success",timer:1e3}).then(()=>{u()})}).catch(e=>{console.log(e)})}return(a,e)=>(n(),i(I,null,[l(A(ee),{title:"Team"}),l(te,null,{header:w(()=>[l(ae)]),default:w(()=>[t("div",Kt,[t("div",Wt,[t("h2",null,C(o.value.name),1),t("div",null,"#"+C(f.id),1)])]),t("div",Lt,[Zt,t("div",Gt,[t("div",Rt,"#"+C(o.value.id),1),l(M,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s)},null,8,["modelValue"])]),m.value!==o.value.name?(n(),i("div",Jt,[l(D,{onClick:e[1]||(e[1]=s=>r())},{default:w(()=>[g("Update")]),_:1})])):T("",!0)]),t("div",Qt,[l(ie,{loading:v.value},null,8,["loading"]),Xt,d.value.data&&d.value.data.length>0?(n(),i("div",ea,[(n(!0),i(I,null,j(d.value.data,s=>(n(),i("div",ta,[l(A(q),{href:a.route("admin.user",s.user_id),class:"border-b p-2 mr-2 flex-grow flex justify-between items-center hover:no-underline"},{default:w(()=>{var b;return[t("div",null,C((b=s.user)==null?void 0:b.name),1),t("div",aa,[s.invitation_sent_at?(n(),i("div",sa," Invited: "+C(A(E).utc(s.invitation_sent_at).fromNow()),1)):T("",!0),na])]}),_:2},1032,["href"]),t("div",ia,[l(ne,{onClick:b=>x(s),class:"mr-2"},{default:w(()=>[t("div",null,[s.invitation_sent_at?(n(),i("div",oa,"Resend Invite")):v.value?(n(),i("div",la,"Sending..")):(n(),i("div",ra,"Send Invite"))])]),_:2},1032,["onClick"]),l(le,{onClick:P(b=>k(s),["prevent"])},{default:w(()=>[da]),_:2},1032,["onClick"])])]))),256))])):T("",!0),t("div",ca,[t("div",ua,[l(O,{onSetDataPage:c,"pagination-data":d.value},null,8,["pagination-data"])])])]),t("div",ma,[va,l(Ft,{teamId:f.id,onCreateNewTeamUser:y},null,8,["teamId"])]),t("div",fa,[l(Ge,{teamId:f.id,teamName:o.value.name},null,8,["teamId","teamName"])]),t("div",ha,[l(Vt,{teamId:f.id,teamName:o.value.name},null,8,["teamId","teamName"])]),_a,pa]),_:1})],64))}};export{Va as default};
