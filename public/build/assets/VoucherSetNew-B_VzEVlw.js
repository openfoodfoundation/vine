import{S as b,_ as me}from"./AuthenticatedLayout-B6VlDw4A.js";import{Q as pe,r as d,o as he,p as B,b as s,c as l,d as t,f as m,q as xe,h as V,w as k,e as r,l as _,m as fe,s as C,F as h,g as w,t as a,u as j,n as q,a as $,v as _e,Z as we}from"./app-CknLk8mF.js";import{_ as ge}from"./AdminTopNavigation-CrN5HeTe.js";import{_ as Q}from"./SecondaryButton-Dv86Z1G_.js";import{P as N}from"./PrimaryButton-4sDq8JmD.js";import"./ApplicationLogo-7Swe9YIb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ke={class:"py-8 space-y-8"},ye={class:"card"},be={class:""},Ce={key:0},Me={class:"flex justify-start mt-8"},Te={key:0,class:"space-y-8"},Se={id:"testSection",class:"card"},je={class:"card-header flex justify-between"},Ze={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Be={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ve={class:"my-8"},$e={class:"mb-2",for:"voucherSet.is_test"},ze={id:"serviceTeamSection",class:"card"},Ee={class:"card-header flex justify-between"},He={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Le={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Fe={key:0},Ie={for:"service-team-search"},Ue={class:"my-4 flex flex-wrap gap-2"},Ne={key:1},Ae={id:"merchantTeamSection",class:"card"},De={class:"card-header flex justify-between"},Re={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},qe={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Oe={for:"service-team-search"},We={class:"my-4 flex flex-wrap gap-2"},Ye={key:0,class:"mt-8"},Pe={class:"mt-2"},Qe=["onClick"],Ge={id:"fundingTeamSection",class:"card"},Je={class:"card-header flex justify-between"},Ke={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Xe={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},et={key:0},tt={for:"service-team-search"},st={class:"my-4 flex flex-wrap gap-2"},ot={key:1},lt={id:"totalValueSection",class:"card"},nt={class:"card-header flex justify-between"},it={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},rt={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},at={class:"my-8"},dt={for:"voucherSet.total_set_value"},ut={class:"font-bold"},vt={id:"denominationsSection",class:"card"},ct={class:"card-header flex justify-between"},mt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},pt={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ht={key:2,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},xt={class:"flex justify-between items-center"},ft={class:"mt-4"},_t={class:"mb-2 flex justify-start items-center border-b py-4"},wt=["onUpdate:modelValue"],gt={class:"pl-4"},kt={class:"text-xs"},yt=["onUpdate:modelValue"],bt={class:"pt-6"},Ct=["onClick"],Mt={class:"pt-8"},Tt={class:"text-center mx-24 p-8 rounded-lg border-4 border-gray-200"},St={class:"text-xs"},jt={key:0,class:"text-xs text-red-500 mt-4"},Zt={key:1,class:"text-xs text-green-500 mt-4"},Bt={key:2,class:"text-xs text-gray-500 mt-4"},Vt={id:"expirationSection",class:"card"},$t={class:"card-header flex justify-between"},zt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Et={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ht={class:"my-8"},Lt={class:"mt-4"},Ft={class:"italic"},It={class:"mt-4"},Ut={key:0,class:"mt-8"},Nt={key:1,class:"text-xs italic"},At={id:"voucherTypeSection",class:"card"},Dt={class:"card-header flex justify-between"},Rt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},qt={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ot={class:"mt-4"},Wt={class:""},Yt=["value"],Pt={id:"voucherTemplateSection",class:"card"},Qt={class:"card-header flex justify-between"},Gt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Jt={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Kt={class:"grid gap-4 grid-cols-6 mt-8"},Xt=["onClick"],es=["src"],ts={key:0,class:"text-xs italic text-center mt-1 text-green-500"},ss={class:"card"},os={class:"card-header flex justify-between"},ls={class:""},ns={key:0,class:"flex text-green-500 items-center"},is={key:1,class:"flex text-red-500 items-center"},rs={class:"my-8"},as={class:"list-disc space-y-6 pl-4"},ds={class:"font-bold"},us={key:0,class:"font-bold"},vs={class:"font-bold"},cs={key:0,class:"font-bold"},ms={class:"font-bold"},ps={class:"font-bold"},hs={class:"font-bold"},xs={class:""},fs={key:0},_s={class:"font-bold"},ws={key:1},gs={class:""},ks={key:0},ys={class:"mt-2"},bs=["src"],Cs={key:1},Ms={class:"flex justify-end"},Ts={__name:"VoucherSetNewComponent",setup(G){const g=pe().props,z=d(!1),E=d(!1),A=d([]),H=d([]),M=d(""),x=d(""),L=d([]),F=d([]),Z=d(""),u=d([]),I=d([]),T=d([]),f=d(""),S=d(""),O=d([]),D=d({}),n=d({is_test:0,allocated_to_service_team_id:"",merchant_team_ids:[],funded_by_team_id:"",voucher_template_id:"",total_set_value:0,denominations:[{number:1,value:5}],expires_at:"",voucher_set_type:""});function p(){return n.value.total_set_value-Y()}function J(){b.fire({title:"Are you sure?",icon:"info",text:"This will not only create a voucher set, but also email all the merchants you selected, asking for their approval to partake in the voucher set. Are you sure you want to do this?",showConfirmButton:!0,showCancelButton:!0}).then(i=>{i.isConfirmed&&axios.post("/admin/voucher-sets",n.value).then(e=>{b.fire({title:"Nice!",icon:"success",text:e.data.data.message,showConfirmButton:!1,timer:600}).then(()=>{window.location.href="/admin/voucher-set/"+e.data.data.id})}).catch(e=>{b.fire({title:"Oops!",icon:"error",text:e.response.data.meta.message}),console.log(e)})})}function K(){n.value.denominations.push({value:5,number:1})}function X(i){i>-1&&n.value.denominations.splice(i,1)}function ee(){M.value.length?H.value=A.value.filter(i=>i.name.toLowerCase().includes(M.value)):H.value=A.value}function W(){if(Z.value.length){const i=L.value.filter(e=>{var y;return(y=e.merchant_team)==null?void 0:y.name.toLowerCase().includes(Z.value)});F.value=i.filter(e=>!u.value.some(y=>e.merchant_team.id===y.id))}else F.value=L.value}function te(){S.value.length?T.value=I.value.filter(i=>{var e;return(e=i.service_team)==null?void 0:e.name.toLowerCase().includes(S.value)}):T.value=I.value}function se(){axios.get("/admin/teams").then(i=>{A.value=i.data.data.data}).catch(i=>{b.fire({icon:"error",title:"Oops!",text:i.response.data.meta.message})})}function oe(i){axios.get("/admin/team-merchant-teams?relations=merchantTeam&where[]=team_id,"+i.id).then(e=>{L.value=e.data.data.data,F.value=e.data.data.data}).catch(e=>{b.fire({icon:"error",title:"Oops!",text:e.response.data.meta.message})})}function le(){axios.get("/admin/team-service-teams?relations=serviceTeam&where[]=team_id,"+g.auth.user.current_team_id).then(i=>{I.value=i.data.data.data,T.value=i.data.data.data}).catch(i=>{b.fire({icon:"error",title:"Oops!",text:i.response.data.meta.message})})}function ne(){axios.get("/admin/team-voucher-templates?cached=false&where[]=team_id,"+g.auth.user.current_team_id+"&where[]=archived_at,null").then(i=>{O.value=i.data.data.data}).catch(i=>{b.fire({icon:"error",title:"Oops!",text:i.response.data.meta.message})})}function v(i){const e=document.getElementById(i);e&&e.scrollIntoView({behavior:"smooth"})}function ie(i){x.value=i,n.value.funded_by_team_id=i.id,H.value=[],M.value=""}function re(i){n.value.merchant_team_ids=[],n.value.merchant_team_ids.includes(i.id)||(n.value.merchant_team_ids.push(i.id),u.value=[],u.value.push(i))}function ae(i){f.value=i,n.value.allocated_to_service_team_id=i.id,T.value=[],S.value="",oe(i)}function de(i){n.value.voucher_template_id===i.id?(n.value.voucher_template_id="",D.value={}):(n.value.voucher_template_id=i.id,D.value=i)}function ue(){f.value="",n.value.allocated_to_service_team_id="",T.value=Object.assign({},I.value),u.value=[],L.value=[],n.value.merchant_team_ids=[]}function ve(){E.value=!0}function Y(){let i=0;return n.value.denominations.forEach(e=>{i+=e.number*e.value}),i}function ce(i){i>-1&&u.value.splice(i,1)}return he(()=>{se(),le(),ne()}),B(u,()=>{W()},{deep:!0}),B(n,()=>{z.value=n.value.total_set_value>0&&n.value.merchant_team_ids.length>0&&n.value.voucher_template_id&&n.value.allocated_to_service_team_id&&n.value.voucher_set_type&&p()>=0},{deep:!0}),B(M,()=>{ee()}),B(Z,()=>{W()}),B(S,()=>{te()}),(i,e)=>{var y,P;return s(),l("div",null,[t("div",ke,[t("div",ye,[e[27]||(e[27]=t("div",{class:"card-header"}," Create A Voucher Set ",-1)),t("div",be,[E.value?m("",!0):(s(),l("div",Ce,e[24]||(e[24]=[t("div",{class:"my-8"}," This process will bring you through creating a voucher set. There are 8 steps to complete. ",-1),t("div",{class:"mt-8"}," The following icons are used: ",-1)]))),e[26]||(e[26]=xe('<ul class="mt-6 italic space-y-4"><li class="flex gap-x-1"><svg class="size-6 text-green-500 fill-green-100" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="not-italic font-semibold">Complete</span> ‐ You have met the requirements for this section </li><li class="flex gap-x-1"><svg class="size-6 text-orange-500 fill-orange-100" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="not-italic font-semibold">Warning</span> ‐ This section is not required, so please double check the default answer </li><li class="flex gap-x-1"><svg class="size-6 text-red-500 fill-red-100" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="not-italic font-semibold">Incomplete</span> ‐ You have not met the requirements for this section </li></ul>',1)),t("div",Me,[E.value?m("",!0):(s(),V(Q,{key:0,onClick:e[0]||(e[0]=o=>ve())},{default:k(()=>e[25]||(e[25]=[r(" Get started ")])),_:1}))])])]),E.value?(s(),l("div",Te,[t("div",Se,[t("div",je,[e[30]||(e[30]=r(" Is this a test voucher set? ")),n.value.is_test?(s(),l("svg",Ze,e[28]||(e[28]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",Be,e[29]||(e[29]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),e[32]||(e[32]=t("div",{class:"my-8"}," A test voucher set is for when you want to test the process, but the vouchers are not real. ",-1)),t("div",Ve,[t("label",$e,[_(t("input",{id:"voucherSet.is_test","onUpdate:modelValue":e[1]||(e[1]=o=>n.value.is_test=o),class:"mr-2",type:"checkbox"},null,512),[[fe,n.value.is_test]]),e[31]||(e[31]=r(" YES - this is a test voucher set. "))])])]),t("div",ze,[t("div",Ee,[e[35]||(e[35]=r(" The service team ")),f.value?(s(),l("svg",He,e[33]||(e[33]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",Le,e[34]||(e[34]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),e[36]||(e[36]=t("div",{class:"my-8"}," Which service team are you allocating this voucher set to? ",-1)),f.value?(s(),l("div",Ne,[r(" Selected service team: "+a(f.value.name)+" ",1),f.value?(s(),l("span",{key:0,class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:e[3]||(e[3]=o=>ue())}," Remove ")):m("",!0)])):(s(),l("div",Fe,[t("label",Ie,[_(t("input",{id:"service-team-search","onUpdate:modelValue":e[2]||(e[2]=o=>S.value=o),class:"block w-1/2 md:w-1/3 mt-1",placeholder:"Filter your service teams..",type:"search"},null,512),[[C,S.value]])]),t("div",Ue,[(s(!0),l(h,null,w(T.value,o=>(s(),V(N,{onClick:c=>ae(o.service_team)},{default:k(()=>[r(a(o.service_team.name),1)]),_:2},1032,["onClick"]))),256))])]))]),t("div",Ae,[t("div",De,[e[39]||(e[39]=r(" The merchant team ")),u.value.length?(s(),l("svg",Re,e[37]||(e[37]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",qe,e[38]||(e[38]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),e[41]||(e[41]=t("div",{class:"my-8"}," Which merchant team(s) are you assigning this voucher set to? ",-1)),t("div",null,[t("label",Oe,[_(t("input",{id:"merchant-team-search","onUpdate:modelValue":e[4]||(e[4]=o=>Z.value=o),class:"block w-1/2 md:w-1/3 mt-1",placeholder:"Filter merchant teams..",type:"search"},null,512),[[C,Z.value]])]),t("div",We,[(s(!0),l(h,null,w(F.value,o=>(s(),V(N,{onClick:c=>re(o.merchant_team)},{default:k(()=>[r(a(o.merchant_team.name),1)]),_:2},1032,["onClick"]))),256))])]),u.value.length?(s(),l("div",Ye,[e[40]||(e[40]=r(" Selected merchant team(s): ")),t("div",null,[(s(!0),l(h,null,w(u.value,(o,c)=>(s(),l("div",Pe,[r(a(o.name)+" ",1),t("span",{class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:R=>ce(c)}," Remove ",8,Qe)]))),256))])])):m("",!0)]),t("div",Ge,[t("div",Je,[e[44]||(e[44]=r(" The funding team ")),x.value?(s(),l("svg",Ke,e[42]||(e[42]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",Xe,e[43]||(e[43]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),e[46]||(e[46]=t("div",{class:"my-8"}," Is this voucher set funded by anyone? If so, please nominate the team here. ",-1)),x.value?(s(),l("div",ot,[r(" Selected funding team: "+a(x.value.name)+" ",1),x.value?(s(),l("span",{key:0,class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:e[6]||(e[6]=o=>x.value="")}," Remove ")):m("",!0)])):(s(),l("div",et,[t("label",tt,[e[45]||(e[45]=r(" Search for a funding team ")),_(t("input",{id:"merchant-team-search","onUpdate:modelValue":e[5]||(e[5]=o=>M.value=o),class:"block w-1/2 md:w-1/3",type:"search"},null,512),[[C,M.value]])]),t("div",st,[(s(!0),l(h,null,w(H.value,o=>(s(),V(N,{onClick:c=>ie(o)},{default:k(()=>[r(a(o.name),1)]),_:2},1032,["onClick"]))),256))])]))]),t("div",lt,[t("div",nt,[e[49]||(e[49]=r(" Total value ")),n.value.total_set_value>0?(s(),l("svg",it,e[47]||(e[47]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",rt,e[48]||(e[48]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",at,[t("label",dt,[e[50]||(e[50]=r(" What will the total value of the voucher set be, in ")),t("span",ut,a((y=j(g).auth.teamCountry)==null?void 0:y.currency_code),1),e[51]||(e[51]=r("? ")),_(t("input",{id:"voucherSet.total_set_value","onUpdate:modelValue":e[7]||(e[7]=o=>n.value.total_set_value=o),class:"block mt-2",type:"number"},null,512),[[C,n.value.total_set_value]])])])]),t("div",vt,[t("div",ct,[e[55]||(e[55]=r(" Denominations ")),p()===0?(s(),l("svg",mt,e[52]||(e[52]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):p()>0?(s(),l("svg",pt,e[53]||(e[53]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",ht,e[54]||(e[54]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",xt,[t("div",ft,[t("div",null," Available to assign: "+a(n.value.total_set_value)+" "+a((P=j(g).auth.teamCountry)==null?void 0:P.currency_code),1),t("div",{class:q({"text-red":p()<0})}," Remaining: "+a(p()),3),t("div",null,[(s(!0),l(h,null,w(n.value.denominations,(o,c)=>{var R;return s(),l("div",_t,[t("div",null,[e[56]||(e[56]=t("div",{class:"text-xs"}," Create ",-1)),t("div",null,[_(t("input",{"onUpdate:modelValue":U=>o.number=U,class:"border rounded p-1",type:"number"},null,8,wt),[[C,o.number]])])]),t("div",gt,[t("div",kt," of "+a((R=j(g).auth.teamCountry)==null?void 0:R.currency_code),1),t("div",null,[_(t("input",{"onUpdate:modelValue":U=>o.value=U,class:"border rounded p-1",step:"1",type:"number"},null,8,yt),[[C,o.value]])])]),t("div",bt,[c!==0?(s(),l("button",{key:0,class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:U=>X(c)},e[57]||(e[57]=[t("i",{class:"fa fa-times"},null,-1),r(" Remove ")]),8,Ct)):m("",!0)])])}),256)),t("div",Mt,[$(Q,{onClick:e[8]||(e[8]=o=>K())},{default:k(()=>e[58]||(e[58]=[r(" Add row "),t("i",{class:"fa fa-plus"},null,-1)])),_:1})])])]),t("div",Tt,[e[59]||(e[59]=t("div",{class:"text-2xl"}," Total assigned: ",-1)),t("div",{class:q([{"text-green-500":p()>=0,"text-red-500":p()<0},"text-3xl mt-4"])},[r(a(Y())+" ",1),t("div",St," out of "+a(n.value.total_set_value),1)],2),p()<0?(s(),l("div",jt," - over budget - ")):p()>0?(s(),l("div",Zt,a(p())+" remaining ",1)):(s(),l("div",Bt," Voucher fully allocated "))])])]),t("div",Vt,[t("div",$t,[e[62]||(e[62]=r(" Expiration ")),n.value.expires_at?(s(),l("svg",zt,e[60]||(e[60]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",Et,e[61]||(e[61]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",Ht,[e[64]||(e[64]=r(" When will these vouchers expire? ")),t("div",Lt,[t("label",Ft,[e[63]||(e[63]=r(" Select expiry date ")),_(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>n.value.expires_at=o),class:"rounded",type:"date"},null,512),[[C,n.value.expires_at]])])]),t("div",It,[n.value.expires_at?(s(),l("div",Ut,[r(" Selected expiry date: "+a(n.value.expires_at)+" ",1),t("span",{class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:e[10]||(e[10]=o=>n.value.expires_at="")}," Remove ")])):(s(),l("div",Nt," Not selecting an expiry date will mean vouchers stay valid forever. "))])])]),t("div",At,[t("div",Dt,[e[67]||(e[67]=r(" Type ")),n.value.voucher_set_type?(s(),l("svg",Rt,e[65]||(e[65]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",qt,e[66]||(e[66]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",Ot,[t("label",Wt,[e[69]||(e[69]=r(" Choose the type of the voucher set ")),_(t("select",{"onUpdate:modelValue":e[11]||(e[11]=o=>n.value.voucher_set_type=o),class:"ml-2"},[e[68]||(e[68]=t("option",{value:""},"Select a type",-1)),(s(!0),l(h,null,w(j(g).voucherSetTypes,o=>(s(),l("option",{value:o},a(o),9,Yt))),256))],512),[[_e,n.value.voucher_set_type]])])])]),t("div",Pt,[t("div",Qt,[e[72]||(e[72]=r(" Template ")),n.value.voucher_template_id?(s(),l("svg",Gt,e[70]||(e[70]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",Jt,e[71]||(e[71]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",Kt,[(s(!0),l(h,null,w(O.value,o=>(s(),l("div",null,[t("div",{class:q([{"border-green-500":o.id===n.value.voucher_template_id,"opacity-40":n.value.voucher_template_id&&o.id!==n.value.voucher_template_id},"hover:cursor-pointer border-2 rounded"]),onClick:c=>de(o)},[t("img",{src:o.example_template_image_url,alt:"",class:"border rounded"},null,8,es)],10,Xt),o.id===n.value.voucher_template_id?(s(),l("div",ts," Selected! ")):m("",!0)]))),256))])])])):m("",!0),t("div",ss,[t("div",os,[e[75]||(e[75]=r(" Review ")),t("div",ls,[z.value?(s(),l("div",ns,e[73]||(e[73]=[r(" You have completed all the required sections "),t("svg",{class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(s(),l("div",is,e[74]||(e[74]=[r(" You have required sections that still need completing "),t("svg",{class:"size-6 fill-red-100 ml-2",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])))])]),e[89]||(e[89]=t("div",{class:"my-8"},[t("div",null," Please review the following details for your voucher set. ")],-1)),t("div",rs,[t("ul",as,[t("li",null,[e[76]||(e[76]=r(" The voucher set is ")),t("span",ds,a(n.value.is_test?"a test":"not a test"),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[12]||(e[12]=o=>v("testSection"))}," Edit ")]),t("li",null,[r(" It has "+a(f.value?"":" not yet ")+" been allocated to service team ",1),f.value?(s(),l("span",us,a(f.value.name),1)):m("",!0),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[13]||(e[13]=o=>v("serviceTeamSection"))}," Edit ")]),t("li",null,[r(" It has "+a(u.value.length?"":" not yet ")+" been assigned to a merchant team(s) ",1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[14]||(e[14]=o=>v("merchantTeamSection"))}," Edit "),(s(!0),l(h,null,w(u.value,o=>(s(),l("div",{key:o.id,class:"my-1 font-bold"},a(o.name),1))),128))]),t("li",null,[e[77]||(e[77]=r(" It has ")),t("span",vs,a(x.value?"":" not "),1),e[78]||(e[78]=r(" been associated to funding team ")),x.value?(s(),l("span",cs,a(x.value.name),1)):m("",!0),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[15]||(e[15]=o=>v("fundingTeamSection"))}," Edit ")]),t("li",null,[e[79]||(e[79]=r(" It has a total value of: ")),t("span",ms,a(n.value.total_set_value),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[16]||(e[16]=o=>v("totalValueSection"))}," Edit ")]),t("li",null,[e[80]||(e[80]=r(" Divided into denominations of: ")),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[17]||(e[17]=o=>v("denominationsSection"))}," Edit "),t("ul",null,[(s(!0),l(h,null,w(n.value.denominations,o=>{var c;return s(),l("li",ps,a(o.number)+" "+a(o.number===1?"unit":"units")+" of "+a(o.value)+" "+a((c=j(g).auth.teamCountry)==null?void 0:c.currency_code),1)}),256))])]),t("li",null,[e[81]||(e[81]=r(" The voucher ")),t("span",hs,a(n.value.expires_at?"expires at "+n.value.expires_at:"does not expire"),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[18]||(e[18]=o=>v("expirationSection"))}," Edit ")]),t("li",xs,[n.value.voucher_set_type?(s(),l("div",fs,[e[82]||(e[82]=r(" Has a type of ")),t("span",_s,a(n.value.voucher_set_type),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[19]||(e[19]=o=>v("expirationSection"))}," Edit ")])):(s(),l("div",ws,[e[83]||(e[83]=r(" Does ")),e[84]||(e[84]=t("span",{class:"font-bold"},"not yet have a type",-1)),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[20]||(e[20]=o=>v("expirationSection"))}," Edit ")]))]),t("li",gs,[n.value.voucher_template_id?(s(),l("div",ks,[e[85]||(e[85]=r(" Is using this voucher template ")),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[21]||(e[21]=o=>v("voucherTemplateSection"))}," Edit "),t("div",ys,[t("img",{src:D.value.example_template_image_url,alt:"",class:"border rounded max-h-48"},null,8,bs)])])):(s(),l("div",Cs,[e[86]||(e[86]=r(" Does ")),e[87]||(e[87]=t("span",{class:"font-bold"},"not yet have a template",-1)),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[22]||(e[22]=o=>v("voucherTemplateSection"))}," Edit ")]))])])]),t("div",Ms,[z.value?(s(),V(N,{key:0,onClick:e[23]||(e[23]=o=>J())},{default:k(()=>e[88]||(e[88]=[r(" Generate! ")])),_:1})):m("",!0)])])])])}}},Es={__name:"VoucherSetNew",setup(G){return(g,z)=>(s(),l(h,null,[$(j(we),{title:"Vouchers"}),$(me,null,{header:k(()=>[$(ge)]),default:k(()=>[$(Ts)]),_:1})],64))}};export{Es as default};
