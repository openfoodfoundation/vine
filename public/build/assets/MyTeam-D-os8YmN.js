import{S as T,_ as P}from"./AuthenticatedLayout-Djo1bTI_.js";import{r as v,o as C,a as s,b as o,F as h,j as x,k as $,w as p,e,t as _,h as m,u as g,Q as b,i as D,d as f,f as w,Z as q,n as z}from"./app-M5lmLk6K.js";import{d as V}from"./dayjs.min-CtW17Q6j.js";import{r as E}from"./relativeTime-DosVr24s.js";import{u as F}from"./utc-CenEdPYq.js";import{P as U}from"./PaginatorComponent-DuyBT-e8.js";import{_ as A}from"./TextInput-BsEYVfj9.js";import{P as M}from"./PrimaryButton-D8cHWI55.js";import"./ApplicationLogo-EzTn0HjX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-Bt8XyJxT.js";const K={key:0},L={class:"border-b flex justify-between items-center py-2 sm:p-2"},O={class:"text-xs"},Q={class:"font-bold text-sm"},Y={key:0,class:"text-red-500"},Z={key:1},G={key:2},H={class:"flex justify-end items-center mt-4"},I={class:"w-full lg:w-1/3"},B={__name:"MyTeamVoucherSetsComponent",props:{filterVoucherSets:{required:!1,default:null}},setup(k){V.extend(E),V.extend(F);const n=k,i=v({}),c=v(5);C(()=>{d()});function d(l=1){let a="/my-team-voucher-sets";n.filterVoucherSets&&(a=a+n.filterVoucherSets),axios.get(a+"?cached=false&page="+l+"&limit="+c.value+"&relations=createdByTeam,allocatedToServiceTeam").then(t=>{i.value=t.data.data}).catch(t=>{console.log(t)})}return(l,a)=>i.value.data&&i.value.data.length?(s(),o("div",K,[(s(!0),o(h,null,x(i.value.data,t=>(s(),$(g(D),{href:l.route("voucher-set",t.id),class:"hover:no-underline hover:opacity-75"},{default:p(()=>[e("div",L,[e("div",O,[e("div",Q," #"+_(t.id),1),t.is_test?(s(),o("div",Y," Test voucher set ")):m("",!0),t.created_by_team&&t.created_by_team_id!==g(b)().props.auth.user.current_team_id?(s(),o("div",Z," Created by: "+_(t.created_by_team.name),1)):m("",!0),t.allocated_to_service_team&&t.allocated_to_service_team_id!==g(b)().props.auth.user.current_team_id?(s(),o("div",G," Allocated to: "+_(t.allocated_to_service_team.name),1)):m("",!0)]),a[0]||(a[0]=e("div",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])],-1))])]),_:2},1032,["href"]))),256)),e("div",H,[e("div",I,[f(U,{onSetDataPage:d,"pagination-data":i.value},null,8,["pagination-data"])])])])):m("",!0)}},J={key:0,class:"card"},R={key:0},W={class:"flex justify-between items-center"},X={class:"flex-grow mr-2"},ee={class:"ml-2"},te={key:0,class:"p-2 text-sm"},se=["onClick"],ae={key:1,class:"flex justify-between items-center"},oe={class:"ml-2"},re={__name:"MyTeamEditorComponent",setup(k){const n=v({}),i=v({}),c=v({}),d=v(""),l=v(!1);C(()=>{t()});function a(){l.value=!1,d.value="",n.value={}}function t(){axios.get("/my-team?cached=false&relations=country").then(u=>{i.value=u.data.data,c.value=i.value.country}).catch(u=>{console.log(u)})}function j(u){c.value=u,n.value={},l.value=!1}function S(){let u={country_id:c.value.id};axios.put("/my-team/"+b().props.auth.user.current_team_id,u).then(r=>{T.fire({title:"Success!",icon:"success",timer:1e3}).then(()=>{t()})}).catch(r=>{T.fire({icon:"error",title:"Oops!",text:r.response.data.message})})}function N(){d.value.length>2&&axios.get("/countries?cached=false&where[]=name,like,*"+d.value+"*&").then(u=>{n.value=u.data.data}).catch(u=>{console.log(u)})}return(u,r)=>i.value.country?(s(),o("div",J,[r[7]||(r[7]=e("div",{class:"card-header"}," Country / Currency ",-1)),l.value?(s(),o("div",R,[e("div",W,[e("div",X,[f(A,{id:"country",type:"text",class:"mt-1 block w-full",modelValue:d.value,"onUpdate:modelValue":r[0]||(r[0]=y=>d.value=y),required:"",onKeyup:r[1]||(r[1]=y=>N())},null,8,["modelValue"])]),e("div",ee,[d.value.length===0||c.value.id===i.value.country_id?(s(),$(M,{key:0,onClick:r[2]||(r[2]=y=>a())},{default:p(()=>r[5]||(r[5]=[w("Cancel")])),_:1})):m("",!0)])]),n.value.data&&n.value.data.length?(s(),o("div",te,[(s(!0),o(h,null,x(n.value.data,y=>(s(),o("div",{class:"py-1 border-b cursor-pointer hover:opacity-50",onClick:ke=>j(y)},_(y.name),9,se))),256))])):m("",!0)])):(s(),o("div",ae,[e("div",{onClick:r[3]||(r[3]=y=>l.value=!0),class:"cursor-pointer flex-grow mr-2"},_(c.value.name)+" ("+_(c.value.currency_code)+") ",1),e("div",oe,[d.value.length>0&&c.value.id!==i.value.country_id?(s(),$(M,{key:0,onClick:r[4]||(r[4]=y=>S())},{default:p(()=>r[6]||(r[6]=[w("Save")])),_:1})):m("",!0)])]))])):m("",!0)}},le={class:"card"},ne={class:"flex items-start font-bold"},ie={class:"pl-2 text-2xl"},de={class:"card",id:"myTeamMembers"},ue={key:0},ce={class:""},me={key:0,class:"flex items-center"},ve={class:"card"},_e={class:""},ye={class:"border-b py-2 flex justify-between"},fe={key:0},he={key:1},pe=["href"],ge={class:"card"},xe={class:"card"},Pe={__name:"MyTeam",setup(k){const n=v({}),i=v({});C(()=>{c(),d()});function c(){axios.get("/my-team?cached=false&relations=teamUsers.user").then(l=>{n.value=l.data.data}).catch(l=>{console.log(l)})}function d(){axios.get("/my-teams?cached=false&orderBy=name,asc").then(l=>{i.value=l.data.data}).catch(l=>{console.log(l)})}return(l,a)=>(s(),o(h,null,[f(g(q),{title:"Dashboard"}),f(P,null,{header:p(()=>a[0]||(a[0]=[w(" My Team ")])),default:p(()=>[e("div",le,[e("div",ne,[e("div",ie,_(n.value.name),1)])]),e("div",de,[a[1]||(a[1]=e("div",{class:"card-header"}," Team members ",-1)),n.value.team_users&&n.value.team_users.length>0?(s(),o("div",ue,[(s(!0),o(h,null,x(n.value.team_users,t=>(s(),o("div",ce,[e("div",{class:z({"border-b p-2":n.value.team_users.length>1})},[t.user?(s(),o("div",me,[e("div",null,_(t.user.name),1)])):m("",!0)],2)]))),256))])):m("",!0)]),e("div",ve,[a[2]||(a[2]=e("div",{class:"card-header"}," Teams You Belong To ",-1)),(s(!0),o(h,null,x(i.value.data,t=>(s(),o("div",_e,[e("div",ye,[e("div",null,_(t.name),1),e("div",null,[t.id===l.$page.props.auth.user.current_team_id?(s(),o("div",fe," Current ")):(s(),o("div",he,[e("a",{href:"/switch-team/"+t.id,class:"text-red-500"},"Switch to this team",8,pe)]))])])]))),256))]),f(re),e("div",ge,[a[3]||(a[3]=e("div",{class:"card-header"}," Voucher sets Created by my team ",-1)),f(B,{"filter-voucher-sets":"-created"})]),e("div",xe,[a[4]||(a[4]=e("div",{class:"card-header"}," Voucher sets allocated to my team ",-1)),f(B,{"filter-voucher-sets":"-allocated"})]),a[5]||(a[5]=e("div",{class:"pb-32"},null,-1))]),_:1})],64))}};export{Pe as default};
