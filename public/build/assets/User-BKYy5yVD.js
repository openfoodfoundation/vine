import{r as m,Q as T,j as $,o as t,c as a,d,u as v,w as h,F as u,Z as B,b as e,t as c,h as p,a as _,f as N,n as P,e as A,k as S,i as D,l as j,v as F}from"./app-D39v8M-d.js";import{_ as M}from"./AuthenticatedLayout-CPH-HHPY.js";import{_ as q,S as E}from"./AdminTopNavigation-Bf9vftIr.js";import{P as z}from"./PaginatorComponent-CZMgHw-s.js";import{_ as L}from"./AdminUserDetailsComponent-BOeVfyIS.js";import{P as Q}from"./PrimaryButton-BhYs-ebo.js";import{_ as Z,a as G}from"./InputLabel-DmwcC91m.js";import"./ApplicationLogo-qg3dnkiT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-CNzQpbJ5.js";const H={class:"card"},I={class:"flex items-start font-bold"},J={class:"pl-2 text-2xl"},K={class:"card"},O=e("div",{class:"card-header"}," User details ",-1),R={class:"card"},W=e("div",{class:"card-header"}," User teams ",-1),X={key:0},Y={key:0},ee={key:0,class:"text-xs text-red-500"},se={class:""},te={class:"flex justify-end items-center mt-4"},ae={class:"w-full lg:w-1/3"},oe={class:"card"},ie=e("div",{class:"card-header"}," User Personal Access Tokens (PATs)) ",-1),le={key:0},ne={class:"border-b py-2"},de={class:"list-item ml-8"},re={key:0},ce={class:"ml-8 text-xs"},ue={key:1},_e={class:"card"},me=e("div",{class:"card-header"}," Create Personal Access Token (No Edit) ",-1),ve={key:0},he={class:"pb-4"},pe={class:"grid grid-cols-1 md:grid-cols-4"},fe=["for"],ge=["id","value"],ke={class:"flex items-center justify-end mt-4"},$e={__name:"User",props:{id:{required:!0,type:Number}},setup(w){const f=w,U=m(5),l=m({name:"",token_abilities:[]}),k=T().props.personalAccessTokenAbilities,r=m({}),n=m({});$(()=>{b(),x()});function C(){l.value.user_id=n.value.id,axios.post("/admin/user-personal-access-tokens",l.value).then(o=>{E.fire({title:"Success!",icon:"success",timer:1e3}).then(()=>{l.value={name:"",token_abilities:[]},b()})}).catch(o=>{console.log(o)})}function b(){axios.get("/admin/users/"+f.id+"?cached=false&relations=currentTeam").then(o=>{n.value=o.data.data}).catch(o=>{console.log(o)})}function x(o=1){axios.get("/admin/team-users?cached=false&page="+o+"&where[]=user_id,"+f.id+"&relations=team&limit="+U.value+"&orderBy=id,desc").then(i=>{r.value=i.data.data}).catch(i=>{console.log(i)})}function V(o){x(o)}function y(o){return o.replaceAll("-"," ")}return(o,i)=>(t(),a(u,null,[d(v(B),{title:"Users"}),d(M,null,{header:h(()=>[d(q)]),default:h(()=>[e("div",H,[e("div",I,[e("div",null,"#"+c(f.id),1),e("div",J,c(n.value.name),1)])]),e("div",K,[O,d(L,{user:n.value},null,8,["user"])]),e("div",R,[W,r.value.data&&r.value.data.length>0?(t(),a("div",X,[(t(!0),a(u,null,p(r.value.data,s=>(t(),S(v(D),{href:o.route("admin.team",s.team_id),class:"hover:no-underline hover:opacity-75"},{default:h(()=>[e("div",{class:P({"border-b p-2":r.value.data.length>1})},[s.team?(t(),a("div",Y,[s.team_id===n.value.current_team_id?(t(),a("div",ee,"*Current team")):_("",!0),e("div",se,c(s.team.name),1)])):_("",!0)],2)]),_:2},1032,["href"]))),256))])):_("",!0),e("div",te,[e("div",ae,[d(z,{onSetDataPage:V,"pagination-data":r.value},null,8,["pagination-data"])])])]),e("div",oe,[ie,n.value.tokens&&n.value.tokens.length?(t(),a("div",le,[(t(!0),a(u,null,p(n.value.tokens,s=>(t(),a("div",ne,[e("div",de,c(s.name),1),s.abilities&&s.abilities.length?(t(),a("div",re,[(t(!0),a(u,null,p(s.abilities,g=>(t(),a("div",ce," - "+c(y(g)),1))),256))])):_("",!0)]))),256))])):(t(),a("div",ue,"User does not have PATs."))]),e("div",_e,[me,v(k).length?(t(),a("div",ve,[e("div",he,[d(Z,{for:"name",value:"PAT name"}),d(G,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:l.value.name,"onUpdate:modelValue":i[0]||(i[0]=s=>l.value.name=s),required:""},null,8,["modelValue"])]),e("div",pe,[(t(!0),a(u,null,p(v(k),s=>(t(),a("div",null,[e("label",{for:s,class:"cursor-pointer"},[j(e("input",{type:"checkbox",id:s,class:"mr-4",value:s,"onUpdate:modelValue":i[1]||(i[1]=g=>l.value.token_abilities=g)},null,8,ge),[[F,l.value.token_abilities]]),A(" "+c(y(s)),1)],8,fe)]))),256))]),e("div",ke,[d(Q,{onClick:i[2]||(i[2]=N(s=>C(),["prevent"])),class:P(["ms-4",{"opacity-25":!l.value.name}]),desabled:!l.value.name},{default:h(()=>[A(" Submit ")]),_:1},8,["class","desabled"])])])):_("",!0)])]),_:1})],64))}};export{$e as default};
