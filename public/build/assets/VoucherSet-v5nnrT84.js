import{_ as V}from"./AuthenticatedLayout-DgWiLRbm.js";import{r as N,o as w,c as d,a as m,u as i,w as _,F as x,b as r,Z as S,d as e,t as a,f as n,e as l,i as f,g as b,h as y}from"./app-BgTg-wTQ.js";import{_ as B}from"./AdminTopNavigation-DcqQ0oM7.js";import{P as M}from"./PrimaryButton-ewuKBXiV.js";import{_ as $}from"./SecondaryButton-C1ZX3gUh.js";import{d as u}from"./dayjs.min-CzmgHtHW.js";import{r as j}from"./relativeTime-C0lhKRru.js";import{u as C}from"./utc-BuVL9Ooi.js";import{_ as A}from"./VouchersComponent-fEsaihny.js";import{D}from"./DangerButton-B29_EqIq.js";import"./ApplicationLogo-Ix_2Vrpk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PaginatorComponent-BIhoA5oE.js";const L={class:"card"},E={key:0,class:"font-bold text-red-500 text-sm"},F={class:"card"},P={class:"card-header"},U={key:0,class:"text-red-500 text-xs font-bold"},W={class:"grid grid-cols-4 gap-y-12 text-center mt-8"},Z={class:"font-bold text-3xl"},z={class:"font-bold text-3xl"},G={class:"font-bold text-3xl"},H={class:"font-bold text-3xl"},I={key:0},J={class:"font-bold text-3xl"},K={class:"text-xs"},O={key:1},Q={class:"font-bold text-3xl"},X={class:"text-xs"},Y={class:"card"},q={key:0},R={key:1,class:"text-xs mt-2"},ee={class:"card"},te={key:0},se={class:"card"},ae={key:0},re={class:"card"},de={key:0},oe={class:"flex justify-between items-center py-4"},ie={class:"text-xs"},le={class:"flex items-center gap-x-2"},ne={class:"text-xs text-right"},_e={key:0},ue={class:"flex justify-end"},me={class:"card"},we={__name:"VoucherSet",props:{id:{required:!0}},setup(k){u.extend(j),u.extend(C);const p=k,s=N({});w(()=>{T()});function T(){axios.get("/admin/voucher-sets/"+p.id+"?cached=false&relations=createdByTeam,allocatedToServiceTeam,voucherSetMerchantTeams.merchantTeam,voucherSetMerchantTeamApprovalRequests.merchantUser,voucherSetMerchantTeamApprovalRequests.merchantTeam").then(c=>{s.value=c.data.data}).catch(c=>{console.log(c)})}return(c,t)=>(r(),d(x,null,[m(i(S),{title:"Voucher set"}),m(V,null,{header:_(()=>[m(B)]),default:_(()=>{var g;return[e("div",L,[e("h2",null,a(p.id),1),s.value.is_test?(r(),d("div",E," Test voucher set ")):n("",!0)]),e("div",F,[e("div",P,[t[0]||(t[0]=l(" Voucher set details ")),s.value.voucher_generation_finished_at?n("",!0):(r(),d("span",U,"Vouchers not generated yet."))]),e("div",W,[e("div",null,[e("div",Z," $"+a(s.value.total_set_value/100),1),t[1]||(t[1]=l(" Total set value "))]),e("div",null,[e("div",z," $"+a(s.value.total_set_value_remaining/100),1),t[2]||(t[2]=l(" Total remaining value "))]),e("div",null,[e("div",G,a(s.value.num_vouchers),1),t[3]||(t[3]=l(" # Vouchers "))]),e("div",null,[e("div",H,a(s.value.num_voucher_redemptions),1),t[4]||(t[4]=l(" # Redemptions "))]),s.value.last_redemption_at?(r(),d("div",I,[t[5]||(t[5]=e("div",null," Last redeemed ",-1)),e("div",J,a(i(u).utc(s.value.last_redemption_at).fromNow()),1),e("div",K," ("+a(i(u)(s.value.last_redemption_at))+") ",1)])):n("",!0),s.value.expires_at?(r(),d("div",O,[t[6]||(t[6]=e("div",null," Expires ",-1)),e("div",Q,a(i(u).utc(s.value.expires_at).fromNow()),1),e("div",X," ("+a(i(u)(s.value.expires_at))+") ",1)])):n("",!0)])]),e("div",Y,[t[7]||(t[7]=e("div",{class:"card-header"}," Created by team ",-1)),s.value.created_by_team?(r(),d("div",q,[m(i(f),{href:c.route("admin.team",{id:s.value.created_by_team_id})},{default:_(()=>[l(a(s.value.created_by_team.name),1)]),_:1},8,["href"])])):n("",!0),s.value.created_at?(r(),d("div",R," Created at: "+a(i(u).utc(s.value.created_at).fromNow())+" ("+a(i(u)(s.value.created_at))+") ",1)):n("",!0)]),e("div",ee,[t[8]||(t[8]=e("div",{class:"card-header"}," Allocated to team ",-1)),s.value.allocated_to_service_team?(r(),d("div",te,[m(i(f),{href:c.route("admin.team",{id:s.value.allocated_to_service_team_id})},{default:_(()=>[l(a(s.value.allocated_to_service_team.name),1)]),_:1},8,["href"])])):n("",!0)]),e("div",se,[t[9]||(t[9]=e("div",{class:"card-header"}," Merchant teams ",-1)),s.value.voucher_set_merchant_teams?(r(),d("div",ae,[(r(!0),d(x,null,b(s.value.voucher_set_merchant_teams,o=>(r(),d("div",null,[m(i(f),{href:c.route("admin.team",{id:o.merchant_team_id})},{default:_(()=>{var v;return[l(a(((v=o.merchant_team)==null?void 0:v.name)??"Merchant team"),1)]}),_:2},1032,["href"])]))),256))])):n("",!0)]),e("div",re,[t[14]||(t[14]=e("div",{class:"card-header"},[e("div",null," Merchant team approval requests ")],-1)),t[15]||(t[15]=e("div",{class:"text-xs"}," We only need one user from any merchant team to approve their participation. ",-1)),(g=s.value.voucher_set_merchant_team_approval_requests)!=null&&g.length?(r(),d("div",de,[(r(!0),d(x,null,b(s.value.voucher_set_merchant_team_approval_requests,o=>{var v;return r(),d("div",null,[e("div",oe,[e("div",null,[e("div",null,[m(i(f),{class:"font-bold",href:"/admin/team/"+o.merchant_team_id},{default:_(()=>{var h;return[l(a((h=o.merchant_team)==null?void 0:h.name),1)]}),_:2},1032,["href"]),t[10]||(t[10]=l(" | ")),m(i(f),{href:"/admin/user/"+o.merchant_user_id},{default:_(()=>{var h;return[l(a((h=o.merchant_user)==null?void 0:h.name),1)]}),_:2},1032,["href"])]),e("div",ie,a((v=o.merchant_user)==null?void 0:v.email),1)]),e("div",le,[e("div",ne,[e("div",null," Created: "+a(i(u).utc(o.created_at).fromNow()),1),o.approval_status_last_updated_at?(r(),d("div",_e," Last actioned: "+a(i(u).utc(o.approval_status_last_updated_at).fromNow()),1)):n("",!0)]),e("div",ue,[o.approval_status==="ready"?(r(),y($,{key:0},{default:_(()=>t[11]||(t[11]=[l(" Ready ")])),_:1})):n("",!0),o.approval_status==="approved"?(r(),y(M,{key:1},{default:_(()=>t[12]||(t[12]=[l(" Approved ")])),_:1})):n("",!0),o.approval_status==="rejected"?(r(),y(D,{key:2},{default:_(()=>t[13]||(t[13]=[l(" Rejected ")])),_:1})):n("",!0)])])])])}),256))])):n("",!0)]),e("div",me,[t[16]||(t[16]=e("div",{class:"card-header"}," Vouchers ",-1)),m(A,{"voucher-set-id":p.id},null,8,["voucher-set-id"])]),t[17]||(t[17]=e("div",{class:"pb-32"},null,-1))]}),_:1})],64))}};export{we as default};
