import{_ as g}from"./AuthenticatedLayout-D11akeJv.js";import{r as b,o as k,c as d,a,b as v,u as r,h as w,w as c,d as e,e as l,t as o,l as m,f as n,F as h,g as p,i as V}from"./app-DmpzTF29.js";import{_ as B}from"./AdminTopNavigation-CbsZ4OES.js";import{d as u}from"./dayjs.min-CVnLEuXg.js";import{r as N}from"./relativeTime-YocTBVjx.js";import{u as R}from"./utc-Ck8zM3r2.js";import"./ApplicationLogo-DNswn0CG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PrimaryButton-BxaKbujp.js";const T={class:"grid grid-cols-2 gap-8 container mx-auto mt-8"},C={class:"card"},S={class:"opacity-25"},$={key:0,class:"mt-4"},M={key:1,class:"font-bold text-red-500 text-sm"},j={class:"card"},D={key:0},E={class:"font-bold"},F={class:"card"},L={class:"grid grid-cols-4 gap-y-12 text-center mt-8"},q={class:"font-bold text-3xl"},z={class:"font-bold text-3xl"},A={class:"font-bold text-3xl"},I={key:0},O={class:"font-bold text-3xl"},U={class:"text-xs"},W={key:1},G={class:"font-bold text-3xl"},H={class:"text-xs"},J={class:"grid grid-cols-2 gap-8 container mx-auto"},K={class:"card"},P={key:0},Q={key:1,class:"text-xs mt-2"},X={class:"card"},Y={key:0},Z={class:"card"},ee={key:0},te={class:"card"},se={key:0,class:"text-sm"},oe={class:"border-b flex justify-between items-center py-2 sm:p-2"},ae={class:"text-xs opacity-25"},de={class:"font-bold"},re={key:0},ie={class:"font-bold"},le={key:1},ne={class:"font-bold"},ye={__name:"Voucher",props:{id:{required:!0}},setup(x){u.extend(N),u.extend(R);const f=x,s=b({});k(()=>{y()});function y(){axios.get("/admin/vouchers/"+f.id+"?cached=false&relations=voucherSet.voucherSetMerchantTeams.merchantTeam,createdByTeam,allocatedToServiceTeam,voucherRedemptions.redeemedByUser,voucherRedemptions.redeemedByTeam").then(_=>{s.value=_.data.data}).catch(_=>{console.log(_)})}return(_,t)=>(a(),d(h,null,[v(r(w),{title:"Voucher set"}),v(g,null,{header:c(()=>[v(B)]),default:c(()=>[e("div",T,[e("div",C,[t[1]||(t[1]=e("div",{class:"card-header"}," Voucher Details ",-1)),e("h2",S," ID: "+o(f.id),1),s.value.voucher_short_code?(a(),d("div",$,[e("h2",null," Short Code: "+o(s.value.voucher_short_code),1),t[0]||(t[0]=e("div",{class:"text-xs text-gray-500"}," Short codes are used in unattended (online) redemptions ",-1))])):l("",!0),s.value.is_test?(a(),d("div",M," Test voucher ")):l("",!0)]),e("div",j,[t[2]||(t[2]=e("div",{class:"card-header"}," Voucher set ",-1)),s.value.voucher_set_id?(a(),d("div",D,[e("div",E,o(s.value.voucher_set?.name??"(Voucher set name not generated yet)"),1),v(r(m),{href:_.route("admin.voucher-set",{id:s.value.voucher_set_id}),class:"text-blue-500 underline"},{default:c(()=>[n(o(s.value.voucher_set_id),1)]),_:1},8,["href"])])):l("",!0)])]),e("div",F,[t[8]||(t[8]=e("div",{class:"card-header"}," Voucher details ",-1)),e("div",L,[e("div",null,[e("div",q," $"+o(s.value.voucher_value_original/100),1),t[3]||(t[3]=n(" Original value ",-1))]),e("div",null,[e("div",z," $"+o(s.value.voucher_value_remaining/100),1),t[4]||(t[4]=n(" Remaining value ",-1))]),e("div",null,[e("div",A,o(s.value.num_voucher_redemptions??"0"),1),t[5]||(t[5]=n(" # Redemptions ",-1))]),s.value.last_redemption_at?(a(),d("div",I,[t[6]||(t[6]=e("div",null," Last redeemed ",-1)),e("div",O,o(r(u).utc(s.value.last_redemption_at).fromNow()),1),e("div",U," ("+o(r(u)(s.value.last_redemption_at))+") ",1)])):l("",!0),s.value.voucher_set?.expires_at?(a(),d("div",W,[t[7]||(t[7]=e("div",null," Expires ",-1)),e("div",G,o(r(u).utc(s.value.voucher_set.expires_at).fromNow()),1),e("div",H," ("+o(r(u)(s.value.voucher_set.expires_at))+") ",1)])):l("",!0)])]),e("div",J,[e("div",K,[t[9]||(t[9]=e("div",{class:"card-header"}," Created by team ",-1)),s.value.created_by_team?(a(),d("div",P,[v(r(m),{href:_.route("admin.team",{id:s.value.created_by_team_id})},{default:c(()=>[n(o(s.value.created_by_team?.name),1)]),_:1},8,["href"])])):l("",!0),s.value.created_at?(a(),d("div",Q," Created at: "+o(r(u).utc(s.value.created_at).fromNow())+" ("+o(r(u)(s.value.created_at))+") ",1)):l("",!0)]),e("div",X,[t[10]||(t[10]=e("div",{class:"card-header"}," Allocated to team ",-1)),s.value.allocated_to_service_team?(a(),d("div",Y,[v(r(m),{href:_.route("admin.team",{id:s.value.allocated_to_service_team_id})},{default:c(()=>[n(o(s.value.allocated_to_service_team?.name),1)]),_:1},8,["href"])])):l("",!0)])]),e("div",Z,[t[11]||(t[11]=e("div",{class:"card-header"}," Merchants Who May Redeem Vouchers ",-1)),s.value.voucher_set?.voucher_set_merchant_teams&&s.value.voucher_set?.voucher_set_merchant_teams.length?(a(),d("div",ee,[(a(!0),d(h,null,p(s.value.voucher_set?.voucher_set_merchant_teams,i=>(a(),d("div",null,[v(r(m),{href:_.route("admin.team",i.merchant_team_id),class:""},{default:c(()=>[n(o(i.merchant_team?.name),1)]),_:2},1032,["href"])]))),256))])):l("",!0)]),e("div",te,[t[16]||(t[16]=e("div",{class:"card-header"}," Voucher redemptions ",-1)),s.value.voucher_redemptions&&s.value.voucher_redemptions.length?(a(),d("div",se,[(a(!0),d(h,null,p(s.value.voucher_redemptions,i=>(a(),V(r(m),{href:_.route("admin.voucher-redemption",i.id),class:"hover:no-underline hover:opacity-75"},{default:c(()=>[e("div",oe,[e("div",null,[e("div",ae," #"+o(i.id),1),e("div",null,[t[12]||(t[12]=n(" Redeemed amount: ",-1)),e("span",de,"$"+o(i.redeemed_amount/100),1)]),i.redeemed_by_user&&i.redeemed_by_team?(a(),d("div",re,[t[13]||(t[13]=n(" Redeemed by: ",-1)),e("span",ie,o(i.redeemed_by_user.name)+" ("+o(i.redeemed_by_team.name)+")",1)])):l("",!0),i.created_at?(a(),d("div",le,[t[14]||(t[14]=n(" Redeemed at: ",-1)),e("span",ne,o(r(u).utc(i.created_at).fromNow())+" ("+o(r(u)(i.created_at))+")",1)])):l("",!0)]),t[15]||(t[15]=e("div",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])],-1))])]),_:2},1032,["href"]))),256))])):l("",!0)]),t[17]||(t[17]=e("div",{class:"pb-32"},null,-1))]),_:1})],64))}};export{ye as default};
