import{_ as N}from"./AuthenticatedLayout-WT0zc4Dl.js";import{r as R,o as S,c as r,a as d,b as v,u as i,g as T,w as c,d as e,e as l,t as o,S as m,f as n,F as h,h as w,i as C}from"./app-eM5Dm2xO.js";import{_ as $}from"./AdminTopNavigation-DHVm6RHD.js";import{d as u}from"./dayjs.min-Df_5bIfu.js";import{r as M}from"./relativeTime-D8DyR-56.js";import{u as j}from"./utc-YUqv1m0j.js";import"./ApplicationLogo-k3veCyqr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PrimaryButton-C3hjicyg.js";const D={class:"grid grid-cols-2 gap-8 container mx-auto mt-8"},E={class:"card"},F={class:"opacity-25"},L={key:0,class:"mt-4"},q={key:1,class:"font-bold text-red-500 text-sm"},z={class:"card"},A={key:0},I={class:"font-bold"},O={class:"card"},U={class:"grid grid-cols-4 gap-y-12 text-center mt-8"},W={class:"font-bold text-3xl"},G={class:"font-bold text-3xl"},H={class:"font-bold text-3xl"},J={key:0},K={class:"font-bold text-3xl"},P={class:"text-xs"},Q={key:1},X={class:"font-bold text-3xl"},Y={class:"text-xs"},Z={class:"grid grid-cols-2 gap-8 container mx-auto"},ee={class:"card"},te={key:0},se={key:1,class:"text-xs mt-2"},oe={class:"card"},ae={key:0},de={class:"card"},re={key:0},ie={class:"card"},le={key:0,class:"text-sm"},ne={class:"border-b flex justify-between items-center py-2 sm:p-2"},ue={class:"text-xs opacity-25"},_e={class:"font-bold"},ve={key:0},ce={class:"font-bold"},me={key:1},he={class:"font-bold"},Be={__name:"Voucher",props:{id:{required:!0}},setup(V){u.extend(M),u.extend(j);const f=V,s=R({});S(()=>{B()});function B(){axios.get("/admin/vouchers/"+f.id+"?cached=false&relations=voucherSet.voucherSetMerchantTeams.merchantTeam,createdByTeam,allocatedToServiceTeam,voucherRedemptions.redeemedByUser,voucherRedemptions.redeemedByTeam").then(_=>{s.value=_.data.data}).catch(_=>{console.log(_)})}return(_,t)=>(d(),r(h,null,[v(i(T),{title:"Voucher set"}),v(N,null,{header:c(()=>[v($)]),default:c(()=>{var p,x,y,g,b;return[e("div",D,[e("div",E,[t[1]||(t[1]=e("div",{class:"card-header"}," Voucher Details ",-1)),e("h2",F," ID: "+o(f.id),1),s.value.voucher_short_code?(d(),r("div",L,[e("h2",null," Short Code: "+o(s.value.voucher_short_code),1),t[0]||(t[0]=e("div",{class:"text-xs text-gray-500"}," Short codes are used in unattended (online) redemptions ",-1))])):l("",!0),s.value.is_test?(d(),r("div",q," Test voucher ")):l("",!0)]),e("div",z,[t[2]||(t[2]=e("div",{class:"card-header"}," Voucher set ",-1)),s.value.voucher_set_id?(d(),r("div",A,[e("div",I,o(((p=s.value.voucher_set)==null?void 0:p.name)??"(Voucher set name not generated yet)"),1),v(i(m),{href:_.route("admin.voucher-set",{id:s.value.voucher_set_id}),class:"text-blue-500 underline"},{default:c(()=>[n(o(s.value.voucher_set_id),1)]),_:1},8,["href"])])):l("",!0)])]),e("div",O,[t[8]||(t[8]=e("div",{class:"card-header"}," Voucher details ",-1)),e("div",U,[e("div",null,[e("div",W," $"+o(s.value.voucher_value_original/100),1),t[3]||(t[3]=n(" Original value "))]),e("div",null,[e("div",G," $"+o(s.value.voucher_value_remaining/100),1),t[4]||(t[4]=n(" Remaining value "))]),e("div",null,[e("div",H,o(s.value.num_voucher_redemptions??"0"),1),t[5]||(t[5]=n(" # Redemptions "))]),s.value.last_redemption_at?(d(),r("div",J,[t[6]||(t[6]=e("div",null," Last redeemed ",-1)),e("div",K,o(i(u).utc(s.value.last_redemption_at).fromNow()),1),e("div",P," ("+o(i(u)(s.value.last_redemption_at))+") ",1)])):l("",!0),(x=s.value.voucher_set)!=null&&x.expires_at?(d(),r("div",Q,[t[7]||(t[7]=e("div",null," Expires ",-1)),e("div",X,o(i(u).utc(s.value.voucher_set.expires_at).fromNow()),1),e("div",Y," ("+o(i(u)(s.value.voucher_set.expires_at))+") ",1)])):l("",!0)])]),e("div",Z,[e("div",ee,[t[9]||(t[9]=e("div",{class:"card-header"}," Created by team ",-1)),s.value.created_by_team?(d(),r("div",te,[v(i(m),{href:_.route("admin.team",{id:s.value.created_by_team_id})},{default:c(()=>{var a;return[n(o((a=s.value.created_by_team)==null?void 0:a.name),1)]}),_:1},8,["href"])])):l("",!0),s.value.created_at?(d(),r("div",se," Created at: "+o(i(u).utc(s.value.created_at).fromNow())+" ("+o(i(u)(s.value.created_at))+") ",1)):l("",!0)]),e("div",oe,[t[10]||(t[10]=e("div",{class:"card-header"}," Allocated to team ",-1)),s.value.allocated_to_service_team?(d(),r("div",ae,[v(i(m),{href:_.route("admin.team",{id:s.value.allocated_to_service_team_id})},{default:c(()=>{var a;return[n(o((a=s.value.allocated_to_service_team)==null?void 0:a.name),1)]}),_:1},8,["href"])])):l("",!0)])]),e("div",de,[t[11]||(t[11]=e("div",{class:"card-header"}," Merchants Who May Redeem Vouchers ",-1)),(y=s.value.voucher_set)!=null&&y.voucher_set_merchant_teams&&((g=s.value.voucher_set)!=null&&g.voucher_set_merchant_teams.length)?(d(),r("div",re,[(d(!0),r(h,null,w((b=s.value.voucher_set)==null?void 0:b.voucher_set_merchant_teams,a=>(d(),r("div",null,[v(i(m),{href:_.route("admin.team",a.merchant_team_id),class:""},{default:c(()=>{var k;return[n(o((k=a.merchant_team)==null?void 0:k.name),1)]}),_:2},1032,["href"])]))),256))])):l("",!0)]),e("div",ie,[t[16]||(t[16]=e("div",{class:"card-header"}," Voucher redemptions ",-1)),s.value.voucher_redemptions&&s.value.voucher_redemptions.length?(d(),r("div",le,[(d(!0),r(h,null,w(s.value.voucher_redemptions,a=>(d(),C(i(m),{href:_.route("admin.voucher-redemption",a.id),class:"hover:no-underline hover:opacity-75"},{default:c(()=>[e("div",ne,[e("div",null,[e("div",ue," #"+o(a.id),1),e("div",null,[t[12]||(t[12]=n(" Redeemed amount: ")),e("span",_e,"$"+o(a.redeemed_amount/100),1)]),a.redeemed_by_user&&a.redeemed_by_team?(d(),r("div",ve,[t[13]||(t[13]=n(" Redeemed by: ")),e("span",ce,o(a.redeemed_by_user.name)+" ("+o(a.redeemed_by_team.name)+")",1)])):l("",!0),a.created_at?(d(),r("div",me,[t[14]||(t[14]=n(" Redeemed at: ")),e("span",he,o(i(u).utc(a.created_at).fromNow())+" ("+o(i(u)(a.created_at))+")",1)])):l("",!0)]),t[15]||(t[15]=e("div",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])],-1))])]),_:2},1032,["href"]))),256))])):l("",!0)]),t[17]||(t[17]=e("div",{class:"pb-32"},null,-1))]}),_:1,__:[17]})],64))}};export{Be as default};
