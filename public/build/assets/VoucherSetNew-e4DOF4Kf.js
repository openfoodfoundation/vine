import{S as b,_ as he}from"./AuthenticatedLayout-BG53JtRa.js";import{Q as xe,r as d,o as fe,p as j,b as s,c as l,d as t,f as u,q as _e,h as z,w as k,e as r,l as _,m as we,s as C,F as h,g as w,t as a,u as Z,n as R,a as F,v as ge,Z as ke}from"./app-CYeOo2ND.js";import{_ as ye}from"./AdminTopNavigation-DJNqrNQo.js";import{_ as K}from"./SecondaryButton-T3p7O31K.js";import{P as q}from"./PrimaryButton-CsmfLU4F.js";import"./ApplicationLogo-C8nuDZSX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const be={class:"py-8 space-y-8"},Ce={class:"card"},Me={class:""},Se={key:0},Te={class:"flex justify-start mt-8"},je={key:0,class:"space-y-8"},Ze={id:"testSection",class:"card"},Ve={class:"card-header flex justify-between"},Be={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},$e={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ze={class:"my-8"},Fe={class:"mb-2",for:"voucherSet.is_test"},Ue={id:"serviceTeamSection",class:"card"},Ee={class:"card-header flex justify-between"},He={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Le={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ie={key:0},qe={for:"service-team-search"},Ne={class:"my-4 flex flex-wrap gap-2"},Ae={key:1},De={id:"merchantTeamSection",class:"card"},Oe={class:"card-header flex justify-between"},Re={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},We={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ye={for:"service-team-search"},Pe={class:"my-4 flex flex-wrap gap-2"},Qe={key:0,class:"mt-8"},Ge={class:"mt-2"},Ke=["onClick"],Je={id:"fundingTeamSection",class:"card"},Xe={class:"card-header flex justify-between"},et={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},tt={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},st={key:0},ot={for:"service-team-search"},lt={class:"my-4 flex flex-wrap gap-2"},nt={key:1},it={id:"totalValueSection",class:"card"},rt={class:"card-header flex justify-between"},at={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},dt={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ut={class:"my-8"},vt={for:"voucherSet.total_set_value"},ct={class:"font-bold"},mt={id:"denominationsSection",class:"card"},pt={class:"card-header flex justify-between"},ht={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},xt={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ft={key:2,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_t={class:"flex justify-between items-center"},wt={class:"mt-4"},gt={class:"mb-2 flex justify-start items-center border-b py-4"},kt=["onUpdate:modelValue"],yt={class:"pl-4"},bt={class:"text-xs"},Ct=["onUpdate:modelValue","onKeyup"],Mt={class:"pt-6"},St=["onClick"],Tt={class:"pt-8"},jt={class:"text-center mx-24 p-8 rounded-lg border-4 border-gray-200"},Zt={class:"text-xs"},Vt={key:0,class:"text-xs text-red-500 mt-4"},Bt={key:1,class:"text-xs text-green-500 mt-4"},$t={key:2,class:"text-xs text-gray-500 mt-4"},zt={id:"expirationSection",class:"card"},Ft={class:"card-header flex justify-between"},Ut={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Et={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ht={class:"my-8"},Lt={class:"mt-4"},It={class:"italic"},qt={class:"mt-4"},Nt={key:0,class:"mt-8"},At={key:1,class:"text-xs italic"},Dt={id:"voucherTypeSection",class:"card"},Ot={class:"card-header flex justify-between"},Rt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Wt={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Yt={class:"mt-4"},Pt={class:""},Qt=["value"],Gt={id:"voucherTemplateSection",class:"card"},Kt={class:"card-header flex justify-between"},Jt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Xt={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},es={class:"grid gap-4 grid-cols-6 mt-8"},ts=["onClick"],ss=["src"],os={key:0,class:"text-xs italic text-center mt-1 text-green-500"},ls={key:1,class:"card"},ns={class:"card-header flex justify-between"},is={class:""},rs={key:0,class:"flex text-green-500 items-center"},as={key:1,class:"flex text-red-500 items-center"},ds={class:"my-8"},us={class:"list-disc space-y-6 pl-4"},vs={class:"font-bold"},cs={key:0,class:"font-bold"},ms={class:"font-bold"},ps={key:0,class:"font-bold"},hs={class:"font-bold"},xs={class:"font-bold"},fs={class:"font-bold"},_s={class:""},ws={key:0},gs={class:"font-bold"},ks={key:1},ys={class:""},bs={key:0},Cs={class:"mt-2"},Ms=["src"],Ss={key:1},Ts={class:"flex justify-end"},js={__name:"VoucherSetNewComponent",setup(J){const g=xe().props,U=d(!1),V=d(!1),N=d([]),E=d([]),M=d(""),x=d(""),H=d([]),L=d([]),B=d(""),v=d([]),I=d([]),S=d([]),f=d(""),T=d(""),W=d([]),A=d({}),D=d(0),i=d({is_test:0,allocated_to_service_team_id:"",merchant_team_ids:[],funded_by_team_id:"",voucher_template_id:"",total_set_value:0,denominations:[],expires_at:"",voucher_set_type:""});function p(){return i.value.total_set_value-Q()}function X(){b.fire({title:"Are you sure?",icon:"info",text:"This will not only create a voucher set, but also email all the merchants you selected, asking for their approval to partake in the voucher set. Are you sure you want to do this?",showConfirmButton:!0,showCancelButton:!0}).then(n=>{n.isConfirmed&&(Object.assign({},i.value),axios.post("/admin/voucher-sets",i.value).then(e=>{b.fire({title:"Nice!",icon:"success",text:e.data.data.message,showConfirmButton:!1,timer:600}).then(()=>{window.location.href="/admin/voucher-set/"+e.data.data.id})}).catch(e=>{b.fire({title:"Oops!",icon:"error",text:e.response.data.meta.message}),console.log(e)}))})}function Y(){i.value.denominations.push({value:500,colloquialCurrencyUnitValue:5,number:1})}function ee(n){n>-1&&i.value.denominations.splice(n,1)}function te(){M.value.length?E.value=N.value.filter(n=>n.name.toLowerCase().includes(M.value)):E.value=N.value}function P(){if(B.value.length){const n=H.value.filter(e=>{var y;return(y=e.merchant_team)==null?void 0:y.name.toLowerCase().includes(B.value)});L.value=n.filter(e=>!v.value.some(y=>e.merchant_team.id===y.id))}else L.value=H.value}function se(){T.value.length?S.value=I.value.filter(n=>{var e;return(e=n.service_team)==null?void 0:e.name.toLowerCase().includes(T.value)}):S.value=I.value}function oe(){axios.get("/admin/teams").then(n=>{N.value=n.data.data.data}).catch(n=>{b.fire({icon:"error",title:"Oops!",text:n.response.data.meta.message})})}function le(n){axios.get("/admin/team-merchant-teams?relations=merchantTeam&where[]=team_id,"+n.id).then(e=>{H.value=e.data.data.data,L.value=e.data.data.data}).catch(e=>{b.fire({icon:"error",title:"Oops!",text:e.response.data.meta.message})})}function ne(){axios.get("/admin/team-service-teams?relations=serviceTeam&where[]=team_id,"+g.auth.user.current_team_id).then(n=>{I.value=n.data.data.data,S.value=n.data.data.data}).catch(n=>{b.fire({icon:"error",title:"Oops!",text:n.response.data.meta.message})})}function ie(){axios.get("/admin/team-voucher-templates?cached=false&where[]=team_id,"+g.auth.user.current_team_id+"&where[]=archived_at,null").then(n=>{W.value=n.data.data.data}).catch(n=>{b.fire({icon:"error",title:"Oops!",text:n.response.data.meta.message})})}function c(n){const e=document.getElementById(n);e&&e.scrollIntoView({behavior:"smooth"})}function re(n){x.value=n,i.value.funded_by_team_id=n.id,E.value=[],M.value=""}function ae(n){i.value.merchant_team_ids=[],i.value.merchant_team_ids.includes(n.id)||(i.value.merchant_team_ids.push(n.id),v.value=[],v.value.push(n))}function de(n){f.value=n,i.value.allocated_to_service_team_id=n.id,S.value=[],T.value="",le(n)}function ue(n){i.value.voucher_template_id===n.id?(i.value.voucher_template_id="",A.value={}):(i.value.voucher_template_id=n.id,A.value=n)}function ve(){f.value="",i.value.allocated_to_service_team_id="",S.value=Object.assign({},I.value),v.value=[],H.value=[],i.value.merchant_team_ids=[]}function ce(){V.value=!0}function Q(){let n=0;return i.value.denominations.forEach(e=>{n+=e.number*e.value}),n}function me(n){n>-1&&v.value.splice(n,1)}function pe(n){n.value=n.colloquialCurrencyUnitValue*100}return fe(()=>{oe(),ne(),ie(),Y()}),j(v,()=>{P()},{deep:!0}),j(i,()=>{U.value=i.value.total_set_value>0&&i.value.merchant_team_ids.length>0&&i.value.voucher_template_id&&i.value.allocated_to_service_team_id&&i.value.voucher_set_type&&p()>=0},{deep:!0}),j(M,()=>{te()}),j(B,()=>{P()}),j(T,()=>{se()}),j(D,n=>{i.value.total_set_value=n*100}),(n,e)=>{var y,G;return s(),l("div",null,[t("div",be,[t("div",Ce,[e[27]||(e[27]=t("div",{class:"card-header"}," Create A Voucher Set ",-1)),t("div",Me,[V.value?u("",!0):(s(),l("div",Se,e[24]||(e[24]=[t("div",{class:"my-8"}," This process will bring you through creating a voucher set. There are 8 steps to complete. ",-1),t("div",{class:"mt-8"}," The following icons are used: ",-1)]))),e[26]||(e[26]=_e('<ul class="mt-6 italic space-y-4"><li class="flex gap-x-1"><svg class="size-6 text-green-500 fill-green-100" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="not-italic font-semibold">Complete</span> ‐ You have met the requirements for this section </li><li class="flex gap-x-1"><svg class="size-6 text-orange-500 fill-orange-100" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="not-italic font-semibold">Warning</span> ‐ This section is not required, so please double check the default answer </li><li class="flex gap-x-1"><svg class="size-6 text-red-500 fill-red-100" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="not-italic font-semibold">Incomplete</span> ‐ You have not met the requirements for this section </li></ul>',1)),t("div",Te,[V.value?u("",!0):(s(),z(K,{key:0,onClick:e[0]||(e[0]=o=>ce())},{default:k(()=>e[25]||(e[25]=[r(" Get started ")])),_:1}))])])]),V.value?(s(),l("div",je,[t("div",Ze,[t("div",Ve,[e[30]||(e[30]=r(" Is this a test voucher set? ")),i.value.is_test?(s(),l("svg",Be,e[28]||(e[28]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",$e,e[29]||(e[29]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),e[32]||(e[32]=t("div",{class:"my-8"}," A test voucher set is for when you want to test the process, but the vouchers are not real. ",-1)),t("div",ze,[t("label",Fe,[_(t("input",{id:"voucherSet.is_test","onUpdate:modelValue":e[1]||(e[1]=o=>i.value.is_test=o),class:"mr-2",type:"checkbox"},null,512),[[we,i.value.is_test]]),e[31]||(e[31]=r(" YES - this is a test voucher set. "))])])]),t("div",Ue,[t("div",Ee,[e[35]||(e[35]=r(" The service team ")),f.value?(s(),l("svg",He,e[33]||(e[33]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",Le,e[34]||(e[34]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),e[36]||(e[36]=t("div",{class:"my-8"}," Which service team are you allocating this voucher set to? ",-1)),f.value?(s(),l("div",Ae,[r(" Selected service team: "+a(f.value.name)+" ",1),f.value?(s(),l("span",{key:0,class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:e[3]||(e[3]=o=>ve())}," Remove ")):u("",!0)])):(s(),l("div",Ie,[t("label",qe,[_(t("input",{id:"service-team-search","onUpdate:modelValue":e[2]||(e[2]=o=>T.value=o),class:"block w-1/2 md:w-1/3 mt-1",placeholder:"Filter your service teams..",type:"search"},null,512),[[C,T.value]])]),t("div",Ne,[(s(!0),l(h,null,w(S.value,o=>(s(),z(q,{onClick:m=>de(o.service_team)},{default:k(()=>[r(a(o.service_team.name),1)]),_:2},1032,["onClick"]))),256))])]))]),t("div",De,[t("div",Oe,[e[39]||(e[39]=r(" The merchant team ")),v.value.length?(s(),l("svg",Re,e[37]||(e[37]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",We,e[38]||(e[38]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),e[41]||(e[41]=t("div",{class:"my-8"}," Which merchant team(s) are you assigning this voucher set to? ",-1)),t("div",null,[t("label",Ye,[_(t("input",{id:"merchant-team-search","onUpdate:modelValue":e[4]||(e[4]=o=>B.value=o),class:"block w-1/2 md:w-1/3 mt-1",placeholder:"Filter merchant teams..",type:"search"},null,512),[[C,B.value]])]),t("div",Pe,[(s(!0),l(h,null,w(L.value,o=>(s(),z(q,{onClick:m=>ae(o.merchant_team)},{default:k(()=>[r(a(o.merchant_team.name),1)]),_:2},1032,["onClick"]))),256))])]),v.value.length?(s(),l("div",Qe,[e[40]||(e[40]=r(" Selected merchant team(s): ")),t("div",null,[(s(!0),l(h,null,w(v.value,(o,m)=>(s(),l("div",Ge,[r(a(o.name)+" ",1),t("span",{class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:O=>me(m)}," Remove ",8,Ke)]))),256))])])):u("",!0)]),t("div",Je,[t("div",Xe,[e[44]||(e[44]=r(" The funding team ")),x.value?(s(),l("svg",et,e[42]||(e[42]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",tt,e[43]||(e[43]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),e[46]||(e[46]=t("div",{class:"my-8"}," Is this voucher set funded by anyone? If so, please nominate the team here. ",-1)),x.value?(s(),l("div",nt,[r(" Selected funding team: "+a(x.value.name)+" ",1),x.value?(s(),l("span",{key:0,class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:e[6]||(e[6]=o=>x.value="")}," Remove ")):u("",!0)])):(s(),l("div",st,[t("label",ot,[e[45]||(e[45]=r(" Search for a funding team ")),_(t("input",{id:"merchant-team-search","onUpdate:modelValue":e[5]||(e[5]=o=>M.value=o),class:"block w-1/2 md:w-1/3",type:"search"},null,512),[[C,M.value]])]),t("div",lt,[(s(!0),l(h,null,w(E.value,o=>(s(),z(q,{onClick:m=>re(o)},{default:k(()=>[r(a(o.name),1)]),_:2},1032,["onClick"]))),256))])]))]),t("div",it,[t("div",rt,[e[49]||(e[49]=r(" Total value ")),i.value.total_set_value>0?(s(),l("svg",at,e[47]||(e[47]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",dt,e[48]||(e[48]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",ut,[t("label",vt,[e[50]||(e[50]=r(" What will the total value of the voucher set be, in ")),t("span",ct,a((y=Z(g).auth.teamCountry)==null?void 0:y.currency_code),1),e[51]||(e[51]=r("? ")),_(t("input",{id:"voucherSet.total_set_value","onUpdate:modelValue":e[7]||(e[7]=o=>D.value=o),class:"block mt-2",type:"number"},null,512),[[C,D.value]])])])]),t("div",mt,[t("div",pt,[e[55]||(e[55]=r(" Denominations ")),p()===0?(s(),l("svg",ht,e[52]||(e[52]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):p()>0?(s(),l("svg",xt,e[53]||(e[53]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",ft,e[54]||(e[54]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",_t,[t("div",wt,[t("div",null," Available to assign: "+a((i.value.total_set_value/100).toFixed(2))+" "+a((G=Z(g).auth.teamCountry)==null?void 0:G.currency_code),1),t("div",{class:R({"text-red":p()<0})}," Remaining: "+a((p()/100).toFixed(2)),3),t("div",null,[(s(!0),l(h,null,w(i.value.denominations,(o,m)=>{var O;return s(),l("div",gt,[t("div",null,[e[56]||(e[56]=t("div",{class:"text-xs"}," Create ",-1)),t("div",null,[_(t("input",{"onUpdate:modelValue":$=>o.number=$,class:"border rounded p-1",type:"number"},null,8,kt),[[C,o.number]])])]),t("div",yt,[t("div",bt," of "+a((O=Z(g).auth.teamCountry)==null?void 0:O.currency_code),1),t("div",null,[_(t("input",{"onUpdate:modelValue":$=>o.colloquialCurrencyUnitValue=$,class:"border rounded p-1",onKeyup:$=>pe(o),step:"1",type:"number"},null,40,Ct),[[C,o.colloquialCurrencyUnitValue]])])]),t("div",Mt,[m!==0?(s(),l("button",{key:0,class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:$=>ee(m)},e[57]||(e[57]=[t("i",{class:"fa fa-times"},null,-1),r(" Remove ")]),8,St)):u("",!0)])])}),256)),t("div",Tt,[F(K,{onClick:e[8]||(e[8]=o=>Y())},{default:k(()=>e[58]||(e[58]=[r(" Add row "),t("i",{class:"fa fa-plus"},null,-1)])),_:1})])])]),t("div",jt,[e[59]||(e[59]=t("div",{class:"text-2xl"}," Total assigned: ",-1)),t("div",{class:R([{"text-green-500":p()>=0,"text-red-500":p()<0},"text-3xl mt-4"])},[r(a((Q()/100).toFixed(2))+" ",1),t("div",Zt," out of "+a((i.value.total_set_value/100).toFixed(2)),1)],2),p()<0?(s(),l("div",Vt," - over budget - ")):p()>0?(s(),l("div",Bt,a((p()/100).toFixed(2))+" remaining ",1)):(s(),l("div",$t," Voucher fully allocated "))])])]),t("div",zt,[t("div",Ft,[e[62]||(e[62]=r(" Expiration ")),i.value.expires_at?(s(),l("svg",Ut,e[60]||(e[60]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",Et,e[61]||(e[61]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",Ht,[e[64]||(e[64]=r(" When will these vouchers expire? ")),t("div",Lt,[t("label",It,[e[63]||(e[63]=r(" Select expiry date ")),_(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>i.value.expires_at=o),class:"rounded",type:"date"},null,512),[[C,i.value.expires_at]])])]),t("div",qt,[i.value.expires_at?(s(),l("div",Nt,[r(" Selected expiry date: "+a(i.value.expires_at)+" ",1),t("span",{class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:e[10]||(e[10]=o=>i.value.expires_at="")}," Remove ")])):(s(),l("div",At," Not selecting an expiry date will mean vouchers stay valid forever. "))])])]),t("div",Dt,[t("div",Ot,[e[67]||(e[67]=r(" Type ")),i.value.voucher_set_type?(s(),l("svg",Rt,e[65]||(e[65]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",Wt,e[66]||(e[66]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",Yt,[t("label",Pt,[e[69]||(e[69]=r(" Choose the type of the voucher set ")),_(t("select",{"onUpdate:modelValue":e[11]||(e[11]=o=>i.value.voucher_set_type=o),class:"ml-2"},[e[68]||(e[68]=t("option",{value:""},"Select a type",-1)),(s(!0),l(h,null,w(Z(g).voucherSetTypes,o=>(s(),l("option",{value:o},a(o),9,Qt))),256))],512),[[ge,i.value.voucher_set_type]])])])]),t("div",Gt,[t("div",Kt,[e[72]||(e[72]=r(" Template ")),i.value.voucher_template_id?(s(),l("svg",Jt,e[70]||(e[70]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",Xt,e[71]||(e[71]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",es,[(s(!0),l(h,null,w(W.value,o=>(s(),l("div",null,[t("div",{class:R([{"border-green-500":o.id===i.value.voucher_template_id,"opacity-40":i.value.voucher_template_id&&o.id!==i.value.voucher_template_id},"hover:cursor-pointer border-2 rounded"]),onClick:m=>ue(o)},[t("img",{src:o.example_template_image_url,alt:"",class:"border rounded"},null,8,ss)],10,ts),o.id===i.value.voucher_template_id?(s(),l("div",os," Selected! ")):u("",!0)]))),256))])])])):u("",!0),V.value?(s(),l("div",ls,[t("div",ns,[e[75]||(e[75]=r(" Review ")),t("div",is,[U.value?(s(),l("div",rs,e[73]||(e[73]=[r(" You have completed all the required sections "),t("svg",{class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(s(),l("div",as,e[74]||(e[74]=[r(" You have required sections that still need completing "),t("svg",{class:"size-6 fill-red-100 ml-2",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])))])]),e[89]||(e[89]=t("div",{class:"my-8"},[t("div",null," Please review the following details for your voucher set. ")],-1)),t("div",ds,[t("ul",us,[t("li",null,[e[76]||(e[76]=r(" The voucher set is ")),t("span",vs,a(i.value.is_test?"a test":"not a test"),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[12]||(e[12]=o=>c("testSection"))}," Edit ")]),t("li",null,[r(" It has "+a(f.value?"":" not yet ")+" been allocated to service team ",1),f.value?(s(),l("span",cs,a(f.value.name),1)):u("",!0),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[13]||(e[13]=o=>c("serviceTeamSection"))}," Edit ")]),t("li",null,[r(" It has "+a(v.value.length?"":" not yet ")+" been assigned to a merchant team(s) ",1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[14]||(e[14]=o=>c("merchantTeamSection"))}," Edit "),(s(!0),l(h,null,w(v.value,o=>(s(),l("div",{key:o.id,class:"my-1 font-bold"},a(o.name),1))),128))]),t("li",null,[e[77]||(e[77]=r(" It has ")),t("span",ms,a(x.value?"":" not "),1),e[78]||(e[78]=r(" been associated to funding team ")),x.value?(s(),l("span",ps,a(x.value.name),1)):u("",!0),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[15]||(e[15]=o=>c("fundingTeamSection"))}," Edit ")]),t("li",null,[e[79]||(e[79]=r(" It has a total value of: ")),t("span",hs,a((i.value.total_set_value/100).toFixed(2)),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[16]||(e[16]=o=>c("totalValueSection"))}," Edit ")]),t("li",null,[e[80]||(e[80]=r(" Divided into denominations of: ")),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[17]||(e[17]=o=>c("denominationsSection"))}," Edit "),t("ul",null,[(s(!0),l(h,null,w(i.value.denominations,o=>{var m;return s(),l("li",xs,a(o.number)+" "+a(o.number===1?"unit":"units")+" of "+a(o.colloquialCurrencyUnitValue)+" "+a((m=Z(g).auth.teamCountry)==null?void 0:m.currency_code),1)}),256))])]),t("li",null,[e[81]||(e[81]=r(" The voucher ")),t("span",fs,a(i.value.expires_at?"expires at "+i.value.expires_at:"does not expire"),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[18]||(e[18]=o=>c("expirationSection"))}," Edit ")]),t("li",_s,[i.value.voucher_set_type?(s(),l("div",ws,[e[82]||(e[82]=r(" Has a type of ")),t("span",gs,a(i.value.voucher_set_type),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[19]||(e[19]=o=>c("expirationSection"))}," Edit ")])):(s(),l("div",ks,[e[83]||(e[83]=r(" Does ")),e[84]||(e[84]=t("span",{class:"font-bold"},"not yet have a type",-1)),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[20]||(e[20]=o=>c("expirationSection"))}," Edit ")]))]),t("li",ys,[i.value.voucher_template_id?(s(),l("div",bs,[e[85]||(e[85]=r(" Is using this voucher template ")),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[21]||(e[21]=o=>c("voucherTemplateSection"))}," Edit "),t("div",Cs,[t("img",{src:A.value.example_template_image_url,alt:"",class:"border rounded max-h-48"},null,8,Ms)])])):(s(),l("div",Ss,[e[86]||(e[86]=r(" Does ")),e[87]||(e[87]=t("span",{class:"font-bold"},"not yet have a template",-1)),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[22]||(e[22]=o=>c("voucherTemplateSection"))}," Edit ")]))])])]),t("div",Ts,[U.value?(s(),z(q,{key:0,onClick:e[23]||(e[23]=o=>X())},{default:k(()=>e[88]||(e[88]=[r(" Generate! ")])),_:1})):u("",!0)])])):u("",!0)])])}}},Es={__name:"VoucherSetNew",setup(J){return(g,U)=>(s(),l(h,null,[F(Z(ke),{title:"Vouchers"}),F(he,null,{header:k(()=>[F(ye)]),default:k(()=>[F(js)]),_:1})],64))}};export{Es as default};
