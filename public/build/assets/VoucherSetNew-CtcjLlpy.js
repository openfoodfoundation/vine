import{S as b,_ as xe}from"./AuthenticatedLayout-DhZ8Mz1x.js";import{Q as fe,r as d,o as _e,p as j,b as s,c as l,d as t,f as u,q as we,h as F,w as k,e as r,l as _,m as ge,s as C,F as h,g as w,t as a,u as Z,n as W,a as U,v as ke,Z as ye}from"./app-CtYkBliV.js";import{_ as be}from"./AdminTopNavigation-D0bjfYga.js";import{_ as J}from"./SecondaryButton-Dp34ds6-.js";import{P as N}from"./PrimaryButton-C1WZO_zL.js";import"./ApplicationLogo-5loxlVpb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Ce={class:"py-8 space-y-8"},Me={class:"card"},Se={class:""},Te={key:0},je={class:"flex justify-start mt-8"},Ze={key:0,class:"space-y-8"},Ve={id:"testSection",class:"card"},Be={class:"card-header flex justify-between"},$e={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ze={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Fe={class:"my-8"},Ue={class:"mb-2",for:"voucherSet.is_test"},Ee={id:"serviceTeamSection",class:"card"},He={class:"card-header flex justify-between"},Le={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ie={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},qe={key:0},Ne={for:"service-team-search"},Ae={class:"my-4 flex flex-wrap gap-2"},De={key:1},Oe={id:"merchantTeamSection",class:"card"},Re={class:"card-header flex justify-between"},We={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ye={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ge={for:"service-team-search"},Pe={class:"my-4 flex flex-wrap gap-2"},Qe={key:0,class:"mt-8"},Ke={class:"mt-2"},Je=["onClick"],Xe={id:"fundingTeamSection",class:"card"},et={class:"card-header flex justify-between"},tt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},st={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ot={key:0},lt={for:"service-team-search"},nt={class:"my-4 flex flex-wrap gap-2"},it={key:1},rt={id:"totalValueSection",class:"card"},at={class:"card-header flex justify-between"},dt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ut={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},vt={class:"my-8"},ct={for:"voucherSet.total_set_value"},mt={class:"font-bold"},pt={id:"denominationsSection",class:"card"},ht={class:"card-header flex justify-between"},xt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ft={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_t={key:2,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},wt={class:"flex justify-between items-center"},gt={class:"mt-4"},kt={class:"mb-2 flex justify-start items-center border-b py-4"},yt=["onUpdate:modelValue"],bt={class:"pl-4"},Ct={class:"text-xs"},Mt=["onUpdate:modelValue","onKeyup"],St={class:"pt-6"},Tt=["onClick"],jt={class:"pt-8"},Zt={class:"text-center mx-24 p-8 rounded-lg border-4 border-gray-200"},Vt={class:"text-xs"},Bt={key:0,class:"text-xs text-red-500 mt-4"},$t={key:1,class:"text-xs text-green-500 mt-4"},zt={key:2,class:"text-xs text-gray-500 mt-4"},Ft={id:"expirationSection",class:"card"},Ut={class:"card-header flex justify-between"},Et={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ht={key:1,class:"size-6 text-orange-500 fill-orange-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Lt={class:"my-8"},It={class:"mt-4"},qt={class:"italic"},Nt={class:"mt-4"},At={key:0,class:"mt-8"},Dt={key:1,class:"text-xs italic"},Ot={id:"voucherTypeSection",class:"card"},Rt={class:"card-header flex justify-between"},Wt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Yt={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Gt={class:"mt-4"},Pt={class:""},Qt=["value"],Kt={id:"voucherTemplateSection",class:"card"},Jt={class:"card-header flex justify-between"},Xt={key:0,class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},es={key:1,class:"size-6 text-red-500 fill-red-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ts={class:"grid gap-4 grid-cols-6 mt-8"},ss=["onClick"],os=["src"],ls={key:0,class:"text-xs italic text-center mt-1 text-green-500"},ns={key:1,class:"card"},is={class:"card-header flex justify-between"},rs={class:""},as={key:0,class:"flex text-green-500 items-center"},ds={key:1,class:"flex text-red-500 items-center"},us={class:"my-8"},vs={class:"list-disc space-y-6 pl-4"},cs={class:"font-bold"},ms={key:0,class:"font-bold"},ps={class:"font-bold"},hs={key:0,class:"font-bold"},xs={class:"font-bold"},fs={class:"font-bold"},_s={class:"font-bold"},ws={class:""},gs={key:0},ks={class:"font-bold"},ys={key:1},bs={class:""},Cs={key:0},Ms={class:"mt-2"},Ss=["src"],Ts={key:1},js={class:"flex justify-end"},Zs={key:0},Vs={key:1},Bs={__name:"VoucherSetNewComponent",setup(X){const g=fe().props,E=d(!1),V=d(!1),B=d(!1),A=d([]),H=d([]),M=d(""),x=d(""),L=d([]),I=d([]),$=d(""),v=d([]),q=d([]),S=d([]),f=d(""),T=d(""),Y=d([]),D=d({}),O=d(0),i=d({is_test:0,allocated_to_service_team_id:"",merchant_team_ids:[],funded_by_team_id:"",voucher_template_id:"",total_set_value:0,denominations:[],expires_at:"",voucher_set_type:""});function p(){return i.value.total_set_value-Q()}function ee(){b.fire({title:"Are you sure?",icon:"info",text:"This will not only create a voucher set, but also email all the merchants you selected, asking for their approval to partake in the voucher set. Are you sure you want to do this?",showConfirmButton:!0,showCancelButton:!0}).then(n=>{n.isConfirmed&&(B.value=!0,Object.assign({},i.value),axios.post("/admin/voucher-sets",i.value).then(e=>{b.fire({title:"Nice!",icon:"success",text:e.data.data.message,showConfirmButton:!1,timer:600}).then(()=>{window.location.href="/admin/voucher-set/"+e.data.data.id}),B.value=!1}).catch(e=>{b.fire({title:"Oops!",icon:"error",text:e.response.data.meta.message}),console.log(e),B.value=!1}))})}function G(){i.value.denominations.push({value:500,colloquialCurrencyUnitValue:5,number:1})}function te(n){n>-1&&i.value.denominations.splice(n,1)}function se(){M.value.length?H.value=A.value.filter(n=>n.name.toLowerCase().includes(M.value)):H.value=A.value}function P(){if($.value.length){const n=L.value.filter(e=>{var y;return(y=e.merchant_team)==null?void 0:y.name.toLowerCase().includes($.value)});I.value=n.filter(e=>!v.value.some(y=>e.merchant_team.id===y.id))}else I.value=L.value}function oe(){T.value.length?S.value=q.value.filter(n=>{var e;return(e=n.service_team)==null?void 0:e.name.toLowerCase().includes(T.value)}):S.value=q.value}function le(){axios.get("/admin/teams").then(n=>{A.value=n.data.data.data}).catch(n=>{b.fire({icon:"error",title:"Oops!",text:n.response.data.meta.message})})}function ne(n){axios.get("/admin/team-merchant-teams?relations=merchantTeam&where[]=team_id,"+n.id).then(e=>{L.value=e.data.data.data,I.value=e.data.data.data}).catch(e=>{b.fire({icon:"error",title:"Oops!",text:e.response.data.meta.message})})}function ie(){axios.get("/admin/team-service-teams?relations=serviceTeam&where[]=team_id,"+g.auth.user.current_team_id).then(n=>{q.value=n.data.data.data,S.value=n.data.data.data}).catch(n=>{b.fire({icon:"error",title:"Oops!",text:n.response.data.meta.message})})}function re(){axios.get("/admin/team-voucher-templates?cached=false&where[]=team_id,"+g.auth.user.current_team_id+"&where[]=archived_at,null").then(n=>{Y.value=n.data.data.data}).catch(n=>{b.fire({icon:"error",title:"Oops!",text:n.response.data.meta.message})})}function c(n){const e=document.getElementById(n);e&&e.scrollIntoView({behavior:"smooth"})}function ae(n){x.value=n,i.value.funded_by_team_id=n.id,H.value=[],M.value=""}function de(n){i.value.merchant_team_ids=[],i.value.merchant_team_ids.includes(n.id)||(i.value.merchant_team_ids.push(n.id),v.value=[],v.value.push(n))}function ue(n){f.value=n,i.value.allocated_to_service_team_id=n.id,S.value=[],T.value="",ne(n)}function ve(n){i.value.voucher_template_id===n.id?(i.value.voucher_template_id="",D.value={}):(i.value.voucher_template_id=n.id,D.value=n)}function ce(){f.value="",i.value.allocated_to_service_team_id="",S.value=Object.assign({},q.value),v.value=[],L.value=[],i.value.merchant_team_ids=[]}function me(){V.value=!0}function Q(){let n=0;return i.value.denominations.forEach(e=>{n+=e.number*e.value}),n}function pe(n){n>-1&&v.value.splice(n,1)}function he(n){n.value=n.colloquialCurrencyUnitValue*100}return _e(()=>{le(),ie(),re(),G()}),j(v,()=>{P()},{deep:!0}),j(i,()=>{E.value=i.value.total_set_value>0&&i.value.merchant_team_ids.length>0&&i.value.voucher_template_id&&i.value.allocated_to_service_team_id&&i.value.voucher_set_type&&p()>=0},{deep:!0}),j(M,()=>{se()}),j($,()=>{P()}),j(T,()=>{oe()}),j(O,n=>{i.value.total_set_value=n*100}),(n,e)=>{var y,K;return s(),l("div",null,[t("div",Ce,[t("div",Me,[e[27]||(e[27]=t("div",{class:"card-header"}," Create A Voucher Set ",-1)),t("div",Se,[V.value?u("",!0):(s(),l("div",Te,e[24]||(e[24]=[t("div",{class:"my-8"}," This process will bring you through creating a voucher set. There are 8 steps to complete. ",-1),t("div",{class:"mt-8"}," The following icons are used: ",-1)]))),e[26]||(e[26]=we('<ul class="mt-6 italic space-y-4"><li class="flex gap-x-1"><svg class="size-6 text-green-500 fill-green-100" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="not-italic font-semibold">Complete</span> ‐ You have met the requirements for this section </li><li class="flex gap-x-1"><svg class="size-6 text-orange-500 fill-orange-100" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="not-italic font-semibold">Warning</span> ‐ This section is not required, so please double check the default answer </li><li class="flex gap-x-1"><svg class="size-6 text-red-500 fill-red-100" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="not-italic font-semibold">Incomplete</span> ‐ You have not met the requirements for this section </li></ul>',1)),t("div",je,[V.value?u("",!0):(s(),F(J,{key:0,onClick:e[0]||(e[0]=o=>me())},{default:k(()=>e[25]||(e[25]=[r(" Get started ")])),_:1}))])])]),V.value?(s(),l("div",Ze,[t("div",Ve,[t("div",Be,[e[30]||(e[30]=r(" Is this a test voucher set? ")),i.value.is_test?(s(),l("svg",$e,e[28]||(e[28]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",ze,e[29]||(e[29]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),e[32]||(e[32]=t("div",{class:"my-8"}," A test voucher set is for when you want to test the process, but the vouchers are not real. ",-1)),t("div",Fe,[t("label",Ue,[_(t("input",{id:"voucherSet.is_test","onUpdate:modelValue":e[1]||(e[1]=o=>i.value.is_test=o),class:"mr-2",type:"checkbox"},null,512),[[ge,i.value.is_test]]),e[31]||(e[31]=r(" YES - this is a test voucher set. "))])])]),t("div",Ee,[t("div",He,[e[35]||(e[35]=r(" The service team ")),f.value?(s(),l("svg",Le,e[33]||(e[33]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",Ie,e[34]||(e[34]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),e[36]||(e[36]=t("div",{class:"my-8"}," Which service team are you allocating this voucher set to? ",-1)),f.value?(s(),l("div",De,[r(" Selected service team: "+a(f.value.name)+" ",1),f.value?(s(),l("span",{key:0,class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:e[3]||(e[3]=o=>ce())}," Remove ")):u("",!0)])):(s(),l("div",qe,[t("label",Ne,[_(t("input",{id:"service-team-search","onUpdate:modelValue":e[2]||(e[2]=o=>T.value=o),class:"block w-1/2 md:w-1/3 mt-1",placeholder:"Filter your service teams..",type:"search"},null,512),[[C,T.value]])]),t("div",Ae,[(s(!0),l(h,null,w(S.value,o=>(s(),F(N,{onClick:m=>ue(o.service_team)},{default:k(()=>[r(a(o.service_team.name),1)]),_:2},1032,["onClick"]))),256))])]))]),t("div",Oe,[t("div",Re,[e[39]||(e[39]=r(" The merchant team ")),v.value.length?(s(),l("svg",We,e[37]||(e[37]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",Ye,e[38]||(e[38]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),e[41]||(e[41]=t("div",{class:"my-8"}," Which merchant team(s) are you assigning this voucher set to? ",-1)),t("div",null,[t("label",Ge,[_(t("input",{id:"merchant-team-search","onUpdate:modelValue":e[4]||(e[4]=o=>$.value=o),class:"block w-1/2 md:w-1/3 mt-1",placeholder:"Filter merchant teams..",type:"search"},null,512),[[C,$.value]])]),t("div",Pe,[(s(!0),l(h,null,w(I.value,o=>(s(),F(N,{onClick:m=>de(o.merchant_team)},{default:k(()=>[r(a(o.merchant_team.name),1)]),_:2},1032,["onClick"]))),256))])]),v.value.length?(s(),l("div",Qe,[e[40]||(e[40]=r(" Selected merchant team(s): ")),t("div",null,[(s(!0),l(h,null,w(v.value,(o,m)=>(s(),l("div",Ke,[r(a(o.name)+" ",1),t("span",{class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:R=>pe(m)}," Remove ",8,Je)]))),256))])])):u("",!0)]),t("div",Xe,[t("div",et,[e[44]||(e[44]=r(" The funding team ")),x.value?(s(),l("svg",tt,e[42]||(e[42]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",st,e[43]||(e[43]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),e[46]||(e[46]=t("div",{class:"my-8"}," Is this voucher set funded by anyone? If so, please nominate the team here. ",-1)),x.value?(s(),l("div",it,[r(" Selected funding team: "+a(x.value.name)+" ",1),x.value?(s(),l("span",{key:0,class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:e[6]||(e[6]=o=>x.value="")}," Remove ")):u("",!0)])):(s(),l("div",ot,[t("label",lt,[e[45]||(e[45]=r(" Search for a funding team ")),_(t("input",{id:"merchant-team-search","onUpdate:modelValue":e[5]||(e[5]=o=>M.value=o),class:"block w-1/2 md:w-1/3",type:"search"},null,512),[[C,M.value]])]),t("div",nt,[(s(!0),l(h,null,w(H.value,o=>(s(),F(N,{onClick:m=>ae(o)},{default:k(()=>[r(a(o.name),1)]),_:2},1032,["onClick"]))),256))])]))]),t("div",rt,[t("div",at,[e[49]||(e[49]=r(" Total value ")),i.value.total_set_value>0?(s(),l("svg",dt,e[47]||(e[47]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",ut,e[48]||(e[48]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",vt,[t("label",ct,[e[50]||(e[50]=r(" What will the total value of the voucher set be, in ")),t("span",mt,a((y=Z(g).auth.teamCountry)==null?void 0:y.currency_code),1),e[51]||(e[51]=r("? ")),_(t("input",{id:"voucherSet.total_set_value","onUpdate:modelValue":e[7]||(e[7]=o=>O.value=o),class:"block mt-2",type:"number"},null,512),[[C,O.value]])])])]),t("div",pt,[t("div",ht,[e[55]||(e[55]=r(" Denominations ")),p()===0?(s(),l("svg",xt,e[52]||(e[52]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):p()>0?(s(),l("svg",ft,e[53]||(e[53]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",_t,e[54]||(e[54]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",wt,[t("div",gt,[t("div",null," Available to assign: "+a((i.value.total_set_value/100).toFixed(2))+" "+a((K=Z(g).auth.teamCountry)==null?void 0:K.currency_code),1),t("div",{class:W({"text-red":p()<0})}," Remaining: "+a((p()/100).toFixed(2)),3),t("div",null,[(s(!0),l(h,null,w(i.value.denominations,(o,m)=>{var R;return s(),l("div",kt,[t("div",null,[e[56]||(e[56]=t("div",{class:"text-xs"}," Create ",-1)),t("div",null,[_(t("input",{"onUpdate:modelValue":z=>o.number=z,class:"border rounded p-1",type:"number"},null,8,yt),[[C,o.number]])])]),t("div",bt,[t("div",Ct," of "+a((R=Z(g).auth.teamCountry)==null?void 0:R.currency_code),1),t("div",null,[_(t("input",{"onUpdate:modelValue":z=>o.colloquialCurrencyUnitValue=z,class:"border rounded p-1",onKeyup:z=>he(o),step:"1",type:"number"},null,40,Mt),[[C,o.colloquialCurrencyUnitValue]])])]),t("div",St,[m!==0?(s(),l("button",{key:0,class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:z=>te(m)},e[57]||(e[57]=[t("i",{class:"fa fa-times"},null,-1),r(" Remove ")]),8,Tt)):u("",!0)])])}),256)),t("div",jt,[U(J,{onClick:e[8]||(e[8]=o=>G())},{default:k(()=>e[58]||(e[58]=[r(" Add row "),t("i",{class:"fa fa-plus"},null,-1)])),_:1})])])]),t("div",Zt,[e[59]||(e[59]=t("div",{class:"text-2xl"}," Total assigned: ",-1)),t("div",{class:W([{"text-green-500":p()>=0,"text-red-500":p()<0},"text-3xl mt-4"])},[r(a((Q()/100).toFixed(2))+" ",1),t("div",Vt," out of "+a((i.value.total_set_value/100).toFixed(2)),1)],2),p()<0?(s(),l("div",Bt," - over budget - ")):p()>0?(s(),l("div",$t,a((p()/100).toFixed(2))+" remaining ",1)):(s(),l("div",zt," Voucher fully allocated "))])])]),t("div",Ft,[t("div",Ut,[e[62]||(e[62]=r(" Expiration ")),i.value.expires_at?(s(),l("svg",Et,e[60]||(e[60]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",Ht,e[61]||(e[61]=[t("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",Lt,[e[64]||(e[64]=r(" When will these vouchers expire? ")),t("div",It,[t("label",qt,[e[63]||(e[63]=r(" Select expiry date ")),_(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>i.value.expires_at=o),class:"rounded",type:"date"},null,512),[[C,i.value.expires_at]])])]),t("div",Nt,[i.value.expires_at?(s(),l("div",At,[r(" Selected expiry date: "+a(i.value.expires_at)+" ",1),t("span",{class:"text-red-500 text-xs underline hover:cursor-pointer ml-2",onClick:e[10]||(e[10]=o=>i.value.expires_at="")}," Remove ")])):(s(),l("div",Dt," Not selecting an expiry date will mean vouchers stay valid forever. "))])])]),t("div",Ot,[t("div",Rt,[e[67]||(e[67]=r(" Type ")),i.value.voucher_set_type?(s(),l("svg",Wt,e[65]||(e[65]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",Yt,e[66]||(e[66]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",Gt,[t("label",Pt,[e[69]||(e[69]=r(" Choose the type of the voucher set ")),_(t("select",{"onUpdate:modelValue":e[11]||(e[11]=o=>i.value.voucher_set_type=o),class:"ml-2"},[e[68]||(e[68]=t("option",{value:""},"Select a type",-1)),(s(!0),l(h,null,w(Z(g).voucherSetTypes,o=>(s(),l("option",{value:o},a(o),9,Qt))),256))],512),[[ke,i.value.voucher_set_type]])])])]),t("div",Kt,[t("div",Jt,[e[72]||(e[72]=r(" Template ")),i.value.voucher_template_id?(s(),l("svg",Xt,e[70]||(e[70]=[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),l("svg",es,e[71]||(e[71]=[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",ts,[(s(!0),l(h,null,w(Y.value,o=>(s(),l("div",null,[t("div",{class:W([{"border-green-500":o.id===i.value.voucher_template_id,"opacity-40":i.value.voucher_template_id&&o.id!==i.value.voucher_template_id},"hover:cursor-pointer border-2 rounded"]),onClick:m=>ve(o)},[t("img",{src:o.example_template_image_url,alt:"",class:"border rounded"},null,8,os)],10,ss),o.id===i.value.voucher_template_id?(s(),l("div",ls," Selected! ")):u("",!0)]))),256))])])])):u("",!0),V.value?(s(),l("div",ns,[t("div",is,[e[75]||(e[75]=r(" Review ")),t("div",rs,[E.value?(s(),l("div",as,e[73]||(e[73]=[r(" You have completed all the required sections "),t("svg",{class:"size-6 text-green-500 fill-green-100",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(s(),l("div",ds,e[74]||(e[74]=[r(" You have required sections that still need completing "),t("svg",{class:"size-6 fill-red-100 ml-2",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])))])]),e[88]||(e[88]=t("div",{class:"my-8"},[t("div",null," Please review the following details for your voucher set. ")],-1)),t("div",us,[t("ul",vs,[t("li",null,[e[76]||(e[76]=r(" The voucher set is ")),t("span",cs,a(i.value.is_test?"a test":"not a test"),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[12]||(e[12]=o=>c("testSection"))}," Edit ")]),t("li",null,[r(" It has "+a(f.value?"":" not yet ")+" been allocated to service team ",1),f.value?(s(),l("span",ms,a(f.value.name),1)):u("",!0),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[13]||(e[13]=o=>c("serviceTeamSection"))}," Edit ")]),t("li",null,[r(" It has "+a(v.value.length?"":" not yet ")+" been assigned to a merchant team(s) ",1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[14]||(e[14]=o=>c("merchantTeamSection"))}," Edit "),(s(!0),l(h,null,w(v.value,o=>(s(),l("div",{key:o.id,class:"my-1 font-bold"},a(o.name),1))),128))]),t("li",null,[e[77]||(e[77]=r(" It has ")),t("span",ps,a(x.value?"":" not "),1),e[78]||(e[78]=r(" been associated to funding team ")),x.value?(s(),l("span",hs,a(x.value.name),1)):u("",!0),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[15]||(e[15]=o=>c("fundingTeamSection"))}," Edit ")]),t("li",null,[e[79]||(e[79]=r(" It has a total value of: ")),t("span",xs,a((i.value.total_set_value/100).toFixed(2)),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[16]||(e[16]=o=>c("totalValueSection"))}," Edit ")]),t("li",null,[e[80]||(e[80]=r(" Divided into denominations of: ")),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[17]||(e[17]=o=>c("denominationsSection"))}," Edit "),t("ul",null,[(s(!0),l(h,null,w(i.value.denominations,o=>{var m;return s(),l("li",fs,a(o.number)+" "+a(o.number===1?"unit":"units")+" of "+a(o.colloquialCurrencyUnitValue)+" "+a((m=Z(g).auth.teamCountry)==null?void 0:m.currency_code),1)}),256))])]),t("li",null,[e[81]||(e[81]=r(" The voucher ")),t("span",_s,a(i.value.expires_at?"expires at "+i.value.expires_at:"does not expire"),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[18]||(e[18]=o=>c("expirationSection"))}," Edit ")]),t("li",ws,[i.value.voucher_set_type?(s(),l("div",gs,[e[82]||(e[82]=r(" Has a type of ")),t("span",ks,a(i.value.voucher_set_type),1),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[19]||(e[19]=o=>c("expirationSection"))}," Edit ")])):(s(),l("div",ys,[e[83]||(e[83]=r(" Does ")),e[84]||(e[84]=t("span",{class:"font-bold"},"not yet have a type",-1)),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[20]||(e[20]=o=>c("expirationSection"))}," Edit ")]))]),t("li",bs,[i.value.voucher_template_id?(s(),l("div",Cs,[e[85]||(e[85]=r(" Is using this voucher template ")),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[21]||(e[21]=o=>c("voucherTemplateSection"))}," Edit "),t("div",Ms,[t("img",{src:D.value.example_template_image_url,alt:"",class:"border rounded max-h-48"},null,8,Ss)])])):(s(),l("div",Ts,[e[86]||(e[86]=r(" Does ")),e[87]||(e[87]=t("span",{class:"font-bold"},"not yet have a template",-1)),t("button",{class:"text-xs text-blue-500 ml-2 underline",onClick:e[22]||(e[22]=o=>c("voucherTemplateSection"))}," Edit ")]))])])]),t("div",js,[E.value?(s(),F(N,{key:0,disabled:B.value,onClick:e[23]||(e[23]=o=>ee())},{default:k(()=>[B.value?(s(),l("div",Zs," Generating.. ")):(s(),l("div",Vs," Generate! "))]),_:1},8,["disabled"])):u("",!0)])])):u("",!0)])])}}},Is={__name:"VoucherSetNew",setup(X){return(g,E)=>(s(),l(h,null,[U(Z(ye),{title:"Vouchers"}),U(xe,null,{header:k(()=>[U(be)]),default:k(()=>[U(Bs)]),_:1})],64))}};export{Is as default};
