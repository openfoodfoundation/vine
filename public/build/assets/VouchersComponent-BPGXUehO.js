import{r as g,o as p,c as u,e as x,a as c,d as e,F as b,g as w,b as o,w as d,f as _,t as a,u as n,l as i}from"./app-BnsIz3m0.js";import{P as V}from"./PaginatorComponent-DNGFqvg6.js";import{d as v}from"./dayjs.min-qm02jCzg.js";import{r as B}from"./relativeTime-COb53a5N.js";import{u as I}from"./utc-BuHW2XgP.js";const S={key:0},k={class:"w-full text-xs"},T={class:"hover:bg-gray-100 border-b"},C={class:"py-1"},N={class:"text-right"},j={class:"text-right"},F={class:"flex justify-end"},q={class:"flex justify-end items-center mt-4"},D={class:"w-full lg:w-1/3"},R={__name:"VouchersComponent",props:{teamId:{required:!1,default:null},filterVouchers:{required:!1,default:null},voucherSetId:{required:!1,default:null}},setup(y){v.extend(B),v.extend(I);const r=y,m=g(50),l=g({});p(()=>{(r.teamId||r.voucherSetId)&&(m.value=10),f()});function f(h=1){let s="";r.teamId&&r.filterVouchers?s="&where[]="+r.filterVouchers+","+r.teamId:r.voucherSetId&&(s="&where[]=voucher_set_id,"+r.voucherSetId),axios.get("/admin/vouchers?cached=false&page="+h+"&limit="+m.value+s+"&orderBy=created_at,desc&relations=voucherSet.currencyCountry,createdByTeam,allocatedToServiceTeam").then(t=>{l.value=t.data.data}).catch(t=>{console.log(t)})}return(h,s)=>l.value.data&&l.value.data.length?(c(),u("div",S,[e("table",k,[s[1]||(s[1]=e("thead",{class:"bg-gray-200 font-bold border-b"},[e("tr",null,[e("td",{class:"p-2"},"ID"),e("td",null,"Test?"),e("td",null,"Voucher Set"),e("td",null,"Created By"),e("td",null,"Allocated To"),e("td",{class:"text-right"},"Total Value"),e("td",{class:"text-right"},"Value Remaining"),e("td")])],-1)),e("tbody",null,[(c(!0),u(b,null,w(l.value.data,t=>(c(),u("tr",T,[e("td",C,[o(n(i),{href:"/admin/voucher/"+t.id},{default:d(()=>[_(" #"+a(t.id),1)]),_:2},1032,["href"])]),e("td",null,a(t.is_test?"Yes":""),1),e("td",null,a(t.voucher_set?.name??"(Voucher set name not generated yet)"),1),e("td",null,[o(n(i),{href:"/admin/team/"+t.created_by_team_id},{default:d(()=>[_(a(t.created_by_team?.name),1)]),_:2},1032,["href"])]),e("td",null,[o(n(i),{href:"/admin/team/"+t.allocated_to_service_team_id},{default:d(()=>[_(a(t.allocated_to_service_team?.name),1)]),_:2},1032,["href"])]),e("td",N,[e("div",null,a(Number(t.voucher_value_original/100).toFixed(2))+" "+a(t.voucher_set.currency_country?.currency_code),1)]),e("td",j,[e("div",null,a(Number(t.voucher_value_remaining/100).toFixed(2))+" "+a(t.voucher_set.currency_country?.currency_code),1)]),e("td",F,[o(n(i),{class:"secondaryButton",href:"/admin/voucher/"+t.id},{default:d(()=>[...s[0]||(s[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})],-1)])]),_:2},1032,["href"])])]))),256))])]),e("div",q,[e("div",D,[o(V,{onSetDataPage:f,"pagination-data":l.value},null,8,["pagination-data"])])])])):x("",!0)}};export{R as _};
