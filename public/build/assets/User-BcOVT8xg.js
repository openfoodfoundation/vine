import{r as m,Q as T,e as V,o as s,c as o,d,u as v,w as h,F as u,Z as $,b as e,t as c,h as p,a as _,g as N,n as P,j as w,k as S,i as D,l as M,v as j}from"./app-D7vdOgIt.js";import{_ as F}from"./AuthenticatedLayout-R47MbXuc.js";import{_ as q,S as E}from"./AdminTopNavigation-Fmss29Es.js";import{P as z}from"./PaginatorComponent-Y05VD0hV.js";import{_ as G}from"./AdminUserDetailsComponent-Co0y9Bmi.js";import{P as L}from"./PrimaryButton-9z9RrTGZ.js";import{_ as Q,a as Z}from"./InputLabel-BCWRcgez.js";import"./ApplicationLogo-D1AC-3fn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-Lp9hBCYQ.js";const H={class:"card"},I={class:"flex items-start font-bold"},J={class:"pl-2 text-2xl"},K={class:"card"},O=e("div",{class:"card-header"}," User details ",-1),R={class:"card"},W=e("div",{class:"card-header"}," User teams ",-1),X={key:0},Y={key:0},ee={key:0,class:"text-xs text-red-500"},te={class:""},se={class:"flex justify-end items-center mt-4"},ae={class:"w-full lg:w-1/3"},oe={class:"card"},ie=e("div",{class:"card-header"}," User Personal Access Tokens (PATs)) ",-1),ne={key:0},le={class:"border-b py-2"},de={class:"list-item ml-8"},re={key:0},ce={class:"ml-8 text-xs"},ue={key:1},_e={class:"card"},me=e("div",{class:"card-header"}," Create Personal Access Token (No Edit) ",-1),ve={key:0},he={class:"pb-4"},pe={class:"grid grid-cols-1 md:grid-cols-4"},fe=["for"],ke=["id","value"],ge={class:"flex items-center justify-end mt-4"},Ve={__name:"User",props:{id:{required:!0,type:Number}},setup(A){const f=A,U=m(5),n=m({name:"",token_abilities:[]}),g=T().props.personalAccessTokenAbilities,r=m({}),l=m({});V(()=>{b(),x()});function C(){n.value.user_id=l.value.id,axios.post("/admin/user-personal-access-tokens",n.value).then(a=>{let i=a.data.data.token;E.fire({title:"Personal access token issued!",html:"Please note that the token will be displayed only once. Make sure to save it securely. </br> <b>"+i+"</b>",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Got it"}).then(t=>{n.value={name:"",token_abilities:[]},b()})}).catch(a=>{console.log(a)})}function b(){axios.get("/admin/users/"+f.id+"?cached=false&relations=currentTeam").then(a=>{l.value=a.data.data}).catch(a=>{console.log(a)})}function x(a=1){axios.get("/admin/team-users?cached=false&page="+a+"&where[]=user_id,"+f.id+"&relations=team&limit="+U.value+"&orderBy=id,desc").then(i=>{r.value=i.data.data}).catch(i=>{console.log(i)})}function B(a){x(a)}function y(a){return a.replaceAll("-"," ")}return(a,i)=>(s(),o(u,null,[d(v($),{title:"Users"}),d(F,null,{header:h(()=>[d(q)]),default:h(()=>[e("div",H,[e("div",I,[e("div",null,"#"+c(f.id),1),e("div",J,c(l.value.name),1)])]),e("div",K,[O,d(G,{user:l.value},null,8,["user"])]),e("div",R,[W,r.value.data&&r.value.data.length>0?(s(),o("div",X,[(s(!0),o(u,null,p(r.value.data,t=>(s(),S(v(D),{href:a.route("admin.team",t.team_id),class:"hover:no-underline hover:opacity-75"},{default:h(()=>[e("div",{class:P({"border-b p-2":r.value.data.length>1})},[t.team?(s(),o("div",Y,[t.team_id===l.value.current_team_id?(s(),o("div",ee,"*Current team")):_("",!0),e("div",te,c(t.team.name),1)])):_("",!0)],2)]),_:2},1032,["href"]))),256))])):_("",!0),e("div",se,[e("div",ae,[d(z,{onSetDataPage:B,"pagination-data":r.value},null,8,["pagination-data"])])])]),e("div",oe,[ie,l.value.tokens&&l.value.tokens.length?(s(),o("div",ne,[(s(!0),o(u,null,p(l.value.tokens,t=>(s(),o("div",le,[e("div",de,c(t.name),1),t.abilities&&t.abilities.length?(s(),o("div",re,[(s(!0),o(u,null,p(t.abilities,k=>(s(),o("div",ce," - "+c(y(k)),1))),256))])):_("",!0)]))),256))])):(s(),o("div",ue,"User does not have PATs."))]),e("div",_e,[me,v(g).length?(s(),o("div",ve,[e("div",he,[d(Q,{for:"name",value:"PAT name"}),d(Z,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:n.value.name,"onUpdate:modelValue":i[0]||(i[0]=t=>n.value.name=t),required:""},null,8,["modelValue"])]),e("div",pe,[(s(!0),o(u,null,p(v(g),t=>(s(),o("div",null,[e("label",{for:t,class:"cursor-pointer"},[M(e("input",{type:"checkbox",id:t,class:"mr-4",value:t,"onUpdate:modelValue":i[1]||(i[1]=k=>n.value.token_abilities=k)},null,8,ke),[[j,n.value.token_abilities]]),w(" "+c(y(t)),1)],8,fe)]))),256))]),e("div",ge,[d(L,{onClick:i[2]||(i[2]=N(t=>C(),["prevent"])),class:P(["ms-4",{"opacity-25":!n.value.name}]),desabled:!n.value.name},{default:h(()=>[w(" Submit ")]),_:1},8,["class","desabled"])])])):_("",!0)])]),_:1})],64))}};export{Ve as default};
